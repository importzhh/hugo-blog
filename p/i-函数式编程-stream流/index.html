<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³ åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œçº¯å‡½æ•°æ˜¯æŒ‡æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶çš„å‡½æ•°ï¼š ç›¸åŒçš„è¾“å…¥å§‹ç»ˆäº§ç”Ÿç›¸åŒçš„è¾“å‡ºï¼šçº¯å‡½æ•°çš„è¾“å‡ºä»…ç”±è¾“å…¥å†³å®šï¼Œä¸å—ä»»ä½•å¤–éƒ¨çŠ¶æ€çš„å½±"><title>I: å‡½æ•°å¼ç¼–ç¨‹-Streamæµ</title><link rel=canonical href=https://blog.importzhh.me/p/i-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-stream%E6%B5%81/><link rel=stylesheet href=/scss/style.min.0d8902b26558cddb5286ea49f2a7aadd5761ed898547e29e5ab572d8c0619ba6.css><meta property="og:title" content="I: å‡½æ•°å¼ç¼–ç¨‹-Streamæµ"><meta property="og:description" content="å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³ åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œçº¯å‡½æ•°æ˜¯æŒ‡æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶çš„å‡½æ•°ï¼š ç›¸åŒçš„è¾“å…¥å§‹ç»ˆäº§ç”Ÿç›¸åŒçš„è¾“å‡ºï¼šçº¯å‡½æ•°çš„è¾“å‡ºä»…ç”±è¾“å…¥å†³å®šï¼Œä¸å—ä»»ä½•å¤–éƒ¨çŠ¶æ€çš„å½±"><meta property="og:url" content="https://blog.importzhh.me/p/i-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-stream%E6%B5%81/"><meta property="og:site_name" content="importzhhçš„å°ç ´ç«™"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="javaåŸºç¡€"><meta property="article:published_time" content="2023-08-09T23:01:50+08:00"><meta property="article:modified_time" content="2023-08-09T23:01:50+08:00"><meta name=twitter:title content="I: å‡½æ•°å¼ç¼–ç¨‹-Streamæµ"><meta name=twitter:description content="å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³ åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œçº¯å‡½æ•°æ˜¯æŒ‡æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶çš„å‡½æ•°ï¼š ç›¸åŒçš„è¾“å…¥å§‹ç»ˆäº§ç”Ÿç›¸åŒçš„è¾“å‡ºï¼šçº¯å‡½æ•°çš„è¾“å‡ºä»…ç”±è¾“å…¥å†³å®šï¼Œä¸å—ä»»ä½•å¤–éƒ¨çŠ¶æ€çš„å½±"><link rel="shortcut icon" href=/favicon.ico></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_huce6e906a97de2553354850eae15a0392_8624_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>ğŸ¥</span></figure><div class=site-meta><h1 class=site-name><a href=/>importzhhçš„å°ç ´ç«™</a></h1><h2 class=site-description>å®äº‹æ±‚æ˜¯ æ€å±æ€é€€æ€å˜</h2></div></header><ol class=social-menu><li><a href=https://github.com/importzhh target=_blank title=GitHub rel=me><svg width="800" height="800" viewBox="-1.65 0 259.3 259.3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid"><g><path fill="#9edcf2" d="M200.9 199.8c0 13.9-32.2 25.1-71.9 25.1-39.7.0-71.9-11.3-71.9-25.1.0-13.9 32.2-25.1 71.9-25.1C168.7 174.7 200.9 185.9 200.9 199.8zm0 0"/><g><defs><path id="SVGID_1_" d="M98.1 244.8c1.6 7.5 5.5 11.9 9.4 14.5h41.1c5-3.4 10.1-9.8 10.1-21.8v-31s.6-7.7 7.7-10.2c0 0 4.1-2.9-.3-4.5.0.0-19.5-1.6-19.5 14.4v23.6s.8 8.7-3.8 12.3v-29.2s.3-9.3 5.1-12.8c0 0 3.2-5.7-3.8-4.2.0.0-13.4 1.9-14 17.6l-.3 30h-3.2l-.3-30c-.6-15.6-14-17.6-14-17.6-7-1.6-3.8 4.2-3.8 4.2 4.8 3.5 5.1 12.8 5.1 12.8v29.5c-4.6-3.3-3.8-12.6-3.8-12.6v-23.6c0-16-19.5-14.4-19.5-14.4-4.5 1.6-.3 4.5-.3 4.5 7 2.6 7.7 10.2 7.7 10.2v21.7L98.1 244.8z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" overflow="visible"/></clipPath><path clip-path="url(#SVGID_2_)" fill="#7dbce7" d="M200.9 199.8c0 13.9-32.2 25.1-71.9 25.1-39.7.0-71.9-11.3-71.9-25.1.0-13.9 32.2-25.1 71.9-25.1C168.7 174.7 200.9 185.9 200.9 199.8zm0 0"/></g><path fill="#9edcf2" d="M46.9 125.9l-2.1 7.2s-.5 2.6 1.9 3.1c2.6-.1 2.4-2.5 2.2-3.2L46.9 125.9zm0 0"/><path fill="#010101" d="M255.8 95.6l.2-.9c-21.1-4.2-42.7-4.3-55.8-3.7 2.1-7.7 2.8-16.7 2.8-26.6.0-14.3-5.4-25.7-14-34.3 1.5-4.9 3.5-15.8-2-29.7.0.0-9.8-3.1-32.1 11.8-8.7-2.2-18-3.3-27.3-3.3-10.2.0-20.5 1.3-30.2 3.9C74.4-2.9 64.3.3 64.3.3c-6.6 16.5-2.5 28.8-1.3 31.8-7.8 8.4-12.5 19.1-12.5 32.2.0 9.9 1.1 18.8 3.9 26.5-13.2-.5-34-.3-54.4 3.8l.2.9c20.4-4.1 41.4-4.2 54.5-3.7.6 1.6 1.3 3.2 2 4.7-13 .4-35.1 2.1-56.3 8.1l.3.9c21.4-6 43.7-7.6 56.6-8 7.8 14.4 23 23.8 50.2 26.7-3.9 2.6-7.8 7-9.4 14.5-5.3 2.5-21.9 8.7-31.9-8.5.0.0-5.6-10.2-16.3-11 0 0-10.4-.2-.7 6.5.0.0 6.9 3.3 11.7 15.6.0.0 6.3 21 36.4 14.2V177s-.6 7.7-7.7 10.2c0 0-4.2 2.9.3 4.5.0.0 19.5 1.6 19.5-14.4v-23.6s-.8-9.4 3.8-12.6v38.8s-.3 9.3-5.1 12.8c0 0-3.2 5.7 3.8 4.2.0.0 13.4-1.9 14-17.6l.3-39.3h3.2l.3 39.3c.6 15.6 14 17.6 14 17.6 7 1.6 3.8-4.2 3.8-4.2-4.8-3.5-5.1-12.8-5.1-12.8v-38.5c4.6 3.6 3.8 12.3 3.8 12.3v23.6c0 16 19.5 14.4 19.5 14.4 4.5-1.6.3-4.5.3-4.5-7-2.6-7.7-10.2-7.7-10.2v-31c0-12.1-5.1-18.5-10.1-21.8 29-2.9 42.9-12.2 49.3-26.8 12.7.3 35.6 1.9 57.4 8.1l.3-.9c-21.7-6.1-44.4-7.7-57.3-8.1.6-1.5 1.1-3 1.6-4.6C212.9 91.4 234.6 91.4 255.8 95.6zm0 0"/><path fill="#f5ccb3" d="M174.6 63.7c6.2 5.7 9.9 12.5 9.9 19.8.0 34.4-25.6 35.3-57.2 35.3S70.1 114 70.1 83.5c0-7.3 3.6-14.1 9.8-19.7 10.3-9.4 27.7-4.4 47.4-4.4 19.7.0 37-5.1 47.3 4.3zm0 0"/><path fill="#fff" d="M108.3 85.3c0 9.5-5.3 17.1-11.9 17.1-6.6.0-11.9-7.7-11.9-17.1.0-9.5 5.3-17.1 11.9-17.1C103 68.1 108.3 75.8 108.3 85.3zm0 0"/><path fill="#af5c51" d="M104.5 85.5c0 6.3-3.6 11.4-7.9 11.4-4.4.0-7.9-5.1-7.9-11.4.0-6.3 3.6-11.4 7.9-11.4S104.5 79.2 104.5 85.5zm0 0"/><path fill="#fff" d="M172.2 85.3c0 9.5-5.3 17.1-11.9 17.1s-11.9-7.7-11.9-17.1c0-9.5 5.3-17.1 11.9-17.1C166.8 68.1 172.2 75.8 172.2 85.3zm0 0"/><path fill="#af5c51" d="M168.3 85.5c0 6.3-3.6 11.4-7.9 11.4-4.4.0-7.9-5.1-7.9-11.4.0-6.3 3.6-11.4 7.9-11.4C164.8 74.1 168.3 79.2 168.3 85.5zm0 0"/><path fill="#af5c51" d="M130.5 100.5c0 1.6-1.3 3-3 3-1.6.0-3-1.3-3-3s1.3-3 3-3c1.59999999999999.0 3 1.3 3 3zm0 0"/><path fill="#af5c51" d="M120.6 108c-.2-.5.1-1 .6-1.2s1 .1 1.2.6c.8 2.2 2.8 3.6 5.1 3.6s4.3-1.5 5.1-3.6c.2-.5.7-.8 1.2-.6s.8.7.6 1.2c-1 2.9-3.8 4.9-6.9 4.9C124.4 112.9 121.6 110.9 120.6 108zm0 0"/><path fill="#c4e5d9" d="M54.5 121.6c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4.0-.8.9-1.4 2.1-1.4C53.6 120.2 54.5 120.8 54.5 121.6zm0 0"/><path fill="#c4e5d9" d="M60.3 124.8c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4.0-.8.9-1.4 2.1-1.4C59.4 123.4 60.3 124 60.3 124.8zm0 0"/><path fill="#c4e5d9" d="M63.8 129c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4s.9-1.4 2.1-1.4C62.9 127.5 63.8 128.2 63.8 129zm0 0"/><path fill="#c4e5d9" d="M67 133.8c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4s.9-1.4 2.1-1.4C66.1 132.3 67 133 67 133.8zm0 0"/><path fill="#c4e5d9" d="M70.5 138.2c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4s.9-1.4 2.1-1.4C69.6 136.8 70.5 137.4 70.5 138.2zm0 0"/><path fill="#c4e5d9" d="M75.3 142.1c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4s.9-1.4 2.1-1.4C74.4 140.6 75.3 141.3 75.3 142.1zm0 0"/><path fill="#c4e5d9" d="M82 144.6c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4s.9-1.4 2.1-1.4S82 143.8 82 144.6zm0 0"/><path fill="#c4e5d9" d="M88.7 144.6c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4s.9-1.4 2.1-1.4S88.7 143.8 88.7 144.6zm0 0"/><path fill="#c4e5d9" d="M95.5 143.5c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4s.9-1.4 2.1-1.4C94.5 142.1 95.5 142.7 95.5 143.5zm0 0"/></g></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><li><a href=/links/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg><span>Links</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>æš—è‰²æ¨¡å¼</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³>å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³</a></li><li><a href=#lambdaè¡¨è¾¾å¼>Lambdaè¡¨è¾¾å¼</a><ol><li><a href=#ä¾‹å­>ä¾‹å­</a><ol><li><a href=#ä¾‹ä¸€>ä¾‹ä¸€</a></li><li><a href=#ä¾‹äºŒ>ä¾‹äºŒ:</a></li><li><a href=#ä¾‹ä¸‰>ä¾‹ä¸‰ï¼š</a></li><li><a href=#ä¾‹å››>ä¾‹å››ï¼š</a></li><li><a href=#ä¾‹äº”>ä¾‹äº”ï¼š</a></li></ol></li><li><a href=#çœç•¥è§„åˆ™>çœç•¥è§„åˆ™</a></li></ol></li><li><a href=#streamæµ>Streamæµ</a><ol><li><a href=#æ¦‚è¿°>æ¦‚è¿°</a></li><li><a href=#æ¡ˆä¾‹æ•°æ®å‡†å¤‡>æ¡ˆä¾‹æ•°æ®å‡†å¤‡</a></li><li><a href=#å¿«é€Ÿå…¥é—¨>å¿«é€Ÿå…¥é—¨</a><ol><li><a href=#éœ€æ±‚>éœ€æ±‚</a></li><li><a href=#å®ç°>å®ç°</a></li></ol></li><li><a href=#å¸¸ç”¨æ“ä½œ>å¸¸ç”¨æ“ä½œ</a><ol><li><a href=#åˆ›å»ºæµ>åˆ›å»ºæµ</a></li><li><a href=#ä¸­é—´æ“ä½œ>ä¸­é—´æ“ä½œ</a></li><li><a href=#ç»ˆç»“æ“ä½œ>ç»ˆç»“æ“ä½œ</a></li></ol></li><li><a href=#æ³¨æ„äº‹é¡¹>æ³¨æ„äº‹é¡¹</a></li></ol></li><li><a href=#optional>Optional</a><ol><li><a href=#æ¦‚è¿°-1>æ¦‚è¿°</a></li><li><a href=#ä½¿ç”¨>ä½¿ç”¨</a><ol><li><a href=#åˆ›å»ºå¯¹è±¡>åˆ›å»ºå¯¹è±¡</a></li><li><a href=#å®‰å…¨æ¶ˆè´¹å€¼>å®‰å…¨æ¶ˆè´¹å€¼</a></li><li><a href=#è·å–å€¼>è·å–å€¼</a></li><li><a href=#å®‰å…¨è·å–å€¼>å®‰å…¨è·å–å€¼</a></li><li><a href=#è¿‡æ»¤>è¿‡æ»¤</a></li><li><a href=#åˆ¤æ–­>åˆ¤æ–­</a></li><li><a href=#æ•°æ®è½¬æ¢>æ•°æ®è½¬æ¢</a></li></ol></li></ol></li><li><a href=#å‡½æ•°å¼æ¥å£>å‡½æ•°å¼æ¥å£</a><ol><li><a href=#æ¦‚è¿°-2>æ¦‚è¿°</a></li><li><a href=#å¸¸è§å‡½æ•°å¼æ¥å£>å¸¸è§å‡½æ•°å¼æ¥å£</a></li><li><a href=#å¸¸ç”¨çš„é»˜è®¤æ–¹æ³•>å¸¸ç”¨çš„é»˜è®¤æ–¹æ³•</a><ol><li></li><li><a href=#å¼•ç”¨å¯¹è±¡çš„å®ä¾‹æ–¹æ³•>å¼•ç”¨å¯¹è±¡çš„å®ä¾‹æ–¹æ³•</a></li><li><a href=#å¼•ç”¨ç±»çš„å®ä¾‹æ–¹æ³•>å¼•ç”¨ç±»çš„å®ä¾‹æ–¹æ³•</a></li><li><a href=#æ„é€ å™¨å¼•ç”¨>æ„é€ å™¨å¼•ç”¨</a></li></ol></li></ol></li><li><a href=#é«˜çº§ç”¨æ³•>é«˜çº§ç”¨æ³•</a><ol><li><a href=#åŸºæœ¬æ•°æ®ç±»å‹ä¼˜åŒ–>åŸºæœ¬æ•°æ®ç±»å‹ä¼˜åŒ–</a></li><li><a href=#å¹¶è¡Œæµ>å¹¶è¡Œæµ</a></li></ol></li><li><a href=#é“¾æ¥>é“¾æ¥</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/java/>JAVA</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/i-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-stream%E6%B5%81/>I: å‡½æ•°å¼ç¼–ç¨‹-Streamæµ</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Aug 09, 2023</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>é˜…è¯»æ—¶é•¿: 22 åˆ†é’Ÿ</time></div></footer></div></header><section class=article-content><h2 id=å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³>å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³</h2><p>åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œçº¯å‡½æ•°æ˜¯æŒ‡æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶çš„å‡½æ•°ï¼š</p><ol><li><p>ç›¸åŒçš„è¾“å…¥å§‹ç»ˆäº§ç”Ÿç›¸åŒçš„è¾“å‡ºï¼šçº¯å‡½æ•°çš„è¾“å‡ºä»…ç”±è¾“å…¥å†³å®šï¼Œä¸å—ä»»ä½•å¤–éƒ¨çŠ¶æ€çš„å½±å“ã€‚å¯¹äºç›¸åŒçš„è¾“å…¥ï¼Œçº¯å‡½æ•°å§‹ç»ˆè¿”å›ç›¸åŒçš„è¾“å‡ºã€‚è¿™ç§ç¡®å®šæ€§çš„è¡Œä¸ºä½¿å¾—çº¯å‡½æ•°æ˜“äºç†è§£å’Œæ¨ç†ã€‚</p></li><li><p>æ²¡æœ‰å‰¯ä½œç”¨ï¼šçº¯å‡½æ•°åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸ä¼šä¿®æ”¹å¤–éƒ¨çŠ¶æ€æˆ–äº§ç”Ÿå…¶ä»–å¯è§‚å¯Ÿåˆ°çš„å‰¯ä½œç”¨ã€‚å‰¯ä½œç”¨åŒ…æ‹¬å¯¹å…¨å±€å˜é‡çš„ä¿®æ”¹ã€å¯¹æ–‡ä»¶ç³»ç»Ÿçš„è¯»å†™ã€ç½‘ç»œè¯·æ±‚ç­‰ã€‚çº¯å‡½æ•°ä»…é€šè¿‡è¾“å…¥å’Œè¾“å‡ºä¹‹é—´çš„æ˜ å°„æ¥å®Œæˆè®¡ç®—ï¼Œä¸ä¼šå¯¹å¤–éƒ¨ç¯å¢ƒé€ æˆä»»ä½•å½±å“ã€‚</p></li></ol><p>çº¯å‡½æ•°çš„ç‰¹æ€§ä½¿å¾—å…¶å…·æœ‰å¾ˆå¤šä¼˜ç‚¹ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li><p>å¯æµ‹è¯•æ€§ï¼šç”±äºçº¯å‡½æ•°çš„è¾“å‡ºä»…ç”±è¾“å…¥å†³å®šï¼Œå› æ­¤å¾ˆå®¹æ˜“ç¼–å†™æµ‹è¯•æ¥éªŒè¯å…¶è¡Œä¸ºã€‚æµ‹è¯•å¯ä»¥é’ˆå¯¹ä¸åŒçš„è¾“å…¥å’Œè¾¹ç•Œæƒ…å†µè¿›è¡Œï¼Œè€Œæ— éœ€è€ƒè™‘å¤–éƒ¨çŠ¶æ€çš„å˜åŒ–ã€‚</p></li><li><p>å¯é‡ç”¨æ€§ï¼šçº¯å‡½æ•°å¯ä»¥è¢«é‡å¤ä½¿ç”¨ï¼Œå› ä¸ºå®ƒä»¬çš„è¡Œä¸ºæ˜¯ç¡®å®šæ€§çš„ï¼Œä¸ä¼šå—åˆ°å¤–éƒ¨çŠ¶æ€çš„å½±å“ã€‚å¯ä»¥åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­è°ƒç”¨çº¯å‡½æ•°ï¼Œè€Œæ— éœ€æ‹…å¿ƒå‰¯ä½œç”¨å¯¹ç³»ç»Ÿçš„å½±å“ã€‚</p></li><li><p>å¹¶å‘å®‰å…¨æ€§ï¼šç”±äºçº¯å‡½æ•°æ²¡æœ‰å‰¯ä½œç”¨ï¼Œå®ƒä»¬å¯ä»¥åœ¨å¹¶å‘ç¯å¢ƒä¸­å®‰å…¨åœ°æ‰§è¡Œã€‚å¤šä¸ªçº¿ç¨‹æˆ–è¿›ç¨‹å¯ä»¥åŒæ—¶è°ƒç”¨çº¯å‡½æ•°ï¼Œè€Œä¸ä¼šå‘ç”Ÿç«äº‰æ¡ä»¶æˆ–æ•°æ®æŸåã€‚</p></li></ul><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œçº¯å‡½æ•°å¹¶ä¸æ„å‘³ç€æ‰€æœ‰å‡½æ•°éƒ½å¿…é¡»æ˜¯çº¯å‡½æ•°ã€‚åœ¨å®é™…çš„åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ä¸å¤–éƒ¨ç¯å¢ƒè¿›è¡Œäº¤äº’æˆ–å¤„ç†å¯å˜çŠ¶æ€ã€‚ç„¶è€Œï¼Œé€šè¿‡ä½¿ç”¨çº¯å‡½æ•°æ¥å°è£…å’Œéš”ç¦»è¿™äº›å‰¯ä½œç”¨ï¼Œå¯ä»¥æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æµ‹è¯•æ€§ã€‚</p><p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå…·ä½“çš„ä¾‹å­æ¥è¯´æ˜è¿™ä¸ªæ¦‚å¿µã€‚å‡è®¾æˆ‘ä»¬éœ€è¦ä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®ï¼Œå¹¶è®¡ç®—æ•°æ®çš„å¹³å‡å€¼ã€‚</p><p>å¦‚æœæˆ‘ä»¬ä¸ä½¿ç”¨çº¯å‡½æ•°ï¼Œå¯èƒ½ä¼šç›´æ¥åœ¨å‡½æ•°ä¸­è¯»å–æ–‡ä»¶å’Œè®¡ç®—å¹³å‡å€¼ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>calculate_average</span><span class=p>(</span><span class=n>filename</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>filename</span><span class=p>,</span> <span class=s1>&#39;r&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>file</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>numbers</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=nb>map</span><span class=p>(</span><span class=nb>int</span><span class=p>,</span> <span class=n>file</span><span class=o>.</span><span class=n>readlines</span><span class=p>()))</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nb>sum</span><span class=p>(</span><span class=n>numbers</span><span class=p>)</span> <span class=o>/</span> <span class=nb>len</span><span class=p>(</span><span class=n>numbers</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¸Šé¢çš„ <code>calculate_average</code> å‡½æ•°æ˜¯éçº¯å‡½æ•°ï¼Œå› ä¸ºå®ƒæœ‰ä¸€ä¸ªå‰¯ä½œç”¨ï¼šè¯»å–æ–‡ä»¶ã€‚è¿™ä½¿å¾—å‡½æ•°çš„è¡Œä¸ºä¾èµ–äºå¤–éƒ¨çŠ¶æ€ï¼ˆæ–‡ä»¶çš„å†…å®¹ï¼‰ï¼Œå¹¶ä¸”æ¯æ¬¡è°ƒç”¨å‡½æ•°å¯èƒ½ä¼šå¾—åˆ°ä¸åŒçš„ç»“æœã€‚</p><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬è¯•ç€å°†å‰¯ä½œç”¨å°è£…åœ¨çº¯å‡½æ•°ä¹‹å¤–ï¼Œå°†éçº¯å‡½æ•°è½¬æ¢ä¸ºçº¯å‡½æ•°ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>read_numbers</span><span class=p>(</span><span class=n>filename</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>filename</span><span class=p>,</span> <span class=s1>&#39;r&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>file</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>list</span><span class=p>(</span><span class=nb>map</span><span class=p>(</span><span class=nb>int</span><span class=p>,</span> <span class=n>file</span><span class=o>.</span><span class=n>readlines</span><span class=p>()))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>calculate_average</span><span class=p>(</span><span class=n>numbers</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nb>sum</span><span class=p>(</span><span class=n>numbers</span><span class=p>)</span> <span class=o>/</span> <span class=nb>len</span><span class=p>(</span><span class=n>numbers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>numbers</span> <span class=o>=</span> <span class=n>read_numbers</span><span class=p>(</span><span class=s1>&#39;data.txt&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>average</span> <span class=o>=</span> <span class=n>calculate_average</span><span class=p>(</span><span class=n>numbers</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†è¯»å–æ–‡ä»¶çš„å‰¯ä½œç”¨å°è£…åœ¨ <code>read_numbers</code> å‡½æ•°ä¸­ï¼Œè€Œ <code>calculate_average</code> å‡½æ•°åˆ™æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œå®ƒåªè´Ÿè´£è®¡ç®—å¹³å‡å€¼ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å°†å‰¯ä½œç”¨éš”ç¦»åœ¨çº¯å‡½æ•°ä¹‹å¤–ï¼Œä½¿å¾—çº¯å‡½æ•°çš„è¡Œä¸ºæ›´å®¹æ˜“ç†è§£å’Œæµ‹è¯•ã€‚</p><p>å½“ç„¶ï¼Œå‡½æ•°å¼ç¼–ç¨‹å…è®¸å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å…¶ä»–å‡½æ•°ï¼Œè¿™è¢«ç§°ä¸ºé«˜é˜¶å‡½æ•°ã€‚è¿™æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç¼–å†™æ›´çµæ´»å’Œå¯é‡ç”¨çš„ä»£ç ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>apply_function</span><span class=p>(</span><span class=n>func</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>func</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>double</span><span class=p>(</span><span class=n>x</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>x</span> <span class=o>*</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>square</span><span class=p>(</span><span class=n>x</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>x</span> <span class=o>**</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>apply_function</span><span class=p>(</span><span class=n>double</span><span class=p>,</span> <span class=mi>5</span><span class=p>))</span>  <span class=c1># è¾“å‡ºï¼š10</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>apply_function</span><span class=p>(</span><span class=n>square</span><span class=p>,</span> <span class=mi>5</span><span class=p>))</span>  <span class=c1># è¾“å‡ºï¼š25</span>
</span></span></code></pre></td></tr></table></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>apply_function</code> æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå‡½æ•° <code>func</code> å’Œä¸€ä¸ªå€¼ <code>value</code> ä½œä¸ºå‚æ•°ï¼Œç„¶åè¿”å› <code>func(value)</code> çš„ç»“æœã€‚</p><p>æˆ‘ä»¬å¯ä»¥å°† <code>double</code> å‡½æ•°æˆ– <code>square</code> å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™ <code>apply_function</code>ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ <code>apply_function</code> æ¥åº”ç”¨ä»»ä½•æˆ‘ä»¬æƒ³è¦çš„å‡½æ•°ï¼Œä½¿å¾—ä»£ç æ›´å…·çµæ´»æ€§å’Œå¯é‡ç”¨æ€§ã€‚</p><p>è¿™å°±æ˜¯å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„é«˜é˜¶å‡½æ•°æ¦‚å¿µï¼Œé€šè¿‡ä¼ é€’å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºæ›´å¼ºå¤§ã€æ›´çµæ´»çš„æŠ½è±¡ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>apply_function</code> çš„è¡Œä¸ºä¾èµ–äºå®ƒçš„è¾“å…¥å‚æ•° <code>func</code> å’Œ <code>value</code>ã€‚</p><p>å½“æˆ‘ä»¬è¯´å‡½æ•°ä¸åº”è¯¥ä¾èµ–äºå¤–éƒ¨çŠ¶æ€ï¼Œæˆ‘ä»¬æ˜¯æŒ‡å‡½æ•°çš„è¡Œä¸ºä¸åº”è¯¥ä¾èµ–äºä¸ä½œä¸ºå…¶è¾“å…¥å‚æ•°çš„å¤–éƒ¨çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œå…¨å±€å˜é‡æˆ–è€…ç±»çš„æˆå‘˜å˜é‡ã€‚</p><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œè™½ç„¶ <code>apply_function</code> çš„è¡Œä¸ºä¼šæ ¹æ®ä¼ å…¥çš„å‡½æ•° <code>func</code> è€Œæ”¹å˜ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€ <code>apply_function</code> ä¾èµ–äºå¤–éƒ¨çŠ¶æ€ï¼Œå› ä¸º <code>func</code> æ˜¯ <code>apply_function</code> çš„ä¸€ä¸ªè¾“å…¥å‚æ•°ã€‚</p><p>å¦‚æœæˆ‘ä»¬æ€»æ˜¯ç”¨ç›¸åŒçš„å‡½æ•°å’Œå€¼è°ƒç”¨ <code>apply_function</code>ï¼Œé‚£ä¹ˆå®ƒæ€»ä¼šè¿”å›ç›¸åŒçš„ç»“æœã€‚è¿™ä¹Ÿæ˜¯çº¯å‡½æ•°çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼šç»™å®šç›¸åŒçš„è¾“å…¥ï¼Œæ€»ä¼šäº§ç”Ÿç›¸åŒçš„è¾“å‡ºï¼Œè€Œä¸å—å¤–éƒ¨çŠ¶æ€çš„å½±å“ã€‚</p><p>æˆ‘ä»¬ä½¿ç”¨Pythonæ¥ç¼–å†™ä¸€ä¸ªç®€å•çš„MapReduceç¤ºä¾‹ã€‚æˆ‘ä»¬å°†è®¡ç®—ä¸€ç»„æ•°å­—çš„å¹³å‡å€¼ï¼Œä½¿ç”¨Mapé˜¶æ®µå°†æ•°å­—åˆ†å‰²ä¸ºé”®å€¼å¯¹ï¼Œç„¶åä½¿ç”¨Reduceé˜¶æ®µè®¡ç®—å¹³å‡å€¼ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>collections</span> <span class=kn>import</span> <span class=n>defaultdict</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># è¾“å…¥æ•°æ®</span>
</span></span><span class=line><span class=cl><span class=n>data</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>9</span><span class=p>,</span> <span class=mi>10</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Mapé˜¶æ®µ</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>mapper</span><span class=p>(</span><span class=n>data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>result</span> <span class=o>=</span> <span class=n>defaultdict</span><span class=p>(</span><span class=nb>list</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>num</span> <span class=ow>in</span> <span class=n>data</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>key</span> <span class=o>=</span> <span class=n>num</span> <span class=o>%</span> <span class=mi>2</span>  <span class=c1># å°†å¥‡æ•°å’Œå¶æ•°åˆ†ä¸ºä¸¤ç»„</span>
</span></span><span class=line><span class=cl>        <span class=n>result</span><span class=p>[</span><span class=n>key</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>num</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>result</span><span class=o>.</span><span class=n>items</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Reduceé˜¶æ®µ</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>reducer</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>values</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>count</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>values</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>total</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span><span class=n>values</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>average</span> <span class=o>=</span> <span class=n>total</span> <span class=o>/</span> <span class=n>count</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>key</span><span class=p>,</span> <span class=n>average</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ‰§è¡ŒMapReduce</span>
</span></span><span class=line><span class=cl><span class=n>mapped_data</span> <span class=o>=</span> <span class=n>mapper</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>reduced_data</span> <span class=o>=</span> <span class=p>[</span><span class=n>reducer</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>values</span><span class=p>)</span> <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>values</span> <span class=ow>in</span> <span class=n>mapped_data</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ‰“å°ç»“æœ</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>average</span> <span class=ow>in</span> <span class=n>reduced_data</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Key: </span><span class=si>{</span><span class=n>key</span><span class=si>}</span><span class=s2>, Average: </span><span class=si>{</span><span class=n>average</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>
</span></span><span class=line><span class=cl>è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†æ•°å­—åˆ†ä¸ºå¥‡æ•°å’Œå¶æ•°ä¸¤ç»„ï¼Œå¹¶è®¡ç®—æ¯ç»„çš„å¹³å‡å€¼ã€‚åœ¨Mapé˜¶æ®µï¼Œæˆ‘ä»¬ä½¿ç”¨å–æ¨¡è¿ç®—ç¬¦å°†æ•°å­—åˆ†ä¸ºä¸¤ç»„ï¼Œå¹¶å°†æ•°å­—æ·»åŠ åˆ°å¯¹åº”çš„é”®ä¸­ã€‚åœ¨Reduceé˜¶æ®µï¼Œæˆ‘ä»¬è®¡ç®—æ¯ç»„æ•°å­—çš„æ€»å’Œå’Œæ•°é‡ï¼Œç„¶åè®¡ç®—å¹³å‡å€¼ã€‚
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>è¿è¡Œè¿™æ®µä»£ç ï¼Œä½ ä¼šçœ‹åˆ°è¾“å‡ºç»“æœç±»ä¼¼äºï¼š
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Key: 0, Average: 6.0
</span></span><span class=line><span class=cl>Key: 1, Average: 5.5
</span></span></code></pre></td></tr></table></div></div><p>å…¶ä¸­ï¼ŒKeyè¡¨ç¤ºå¥‡æ•°æˆ–å¶æ•°ç»„ï¼ŒAverageè¡¨ç¤ºå¯¹åº”ç»„çš„å¹³å‡å€¼ã€‚è¿™ä¸ªç®€å•çš„ç¤ºä¾‹å±•ç¤ºäº†MapReduceæ€æƒ³çš„åŸºæœ¬åŸç†ï¼Œé€šè¿‡å°†æ•°æ®åˆ†å‰²ä¸ºé”®å€¼å¯¹ï¼Œç„¶åå¯¹ç›¸åŒé”®çš„å€¼è¿›è¡Œèšåˆå¤„ç†ï¼Œä»¥å®ç°æ•°æ®å¤„ç†å’Œè®¡ç®—ã€‚</p><p><a class=link href=https://codewords.recurse.com/issues/one/an-introduction-to-functional-programming target=_blank rel=noopener>https://codewords.recurse.com/issues/one/an-introduction-to-functional-programming</a></p><h2 id=lambdaè¡¨è¾¾å¼>Lambdaè¡¨è¾¾å¼</h2><h3 id=ä¾‹å­>ä¾‹å­</h3><h4 id=ä¾‹ä¸€>ä¾‹ä¸€</h4><p>æˆ‘ä»¬åœ¨åˆ›å»ºçº¿ç¨‹å¹¶å¯åŠ¨æ—¶å¯ä»¥ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»çš„å†™æ³•ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=k>new</span> <span class=n>Thread</span><span class=o>(</span><span class=k>new</span> <span class=n>Runnable</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>run</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;hello world &#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}).</span><span class=na>start</span><span class=o>();</span>
</span></span></code></pre></td></tr></table></div></div><p>å¯ä»¥ä½¿ç”¨Lambdaçš„æ ¼å¼å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚ä¿®æ”¹åå¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=k>new</span> <span class=n>Thread</span><span class=o>(()-&gt;{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;hello world &#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}).</span><span class=na>start</span><span class=o>();</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=ä¾‹äºŒ>ä¾‹äºŒ:</h4><p>ç°æœ‰æ–¹æ³•å®šä¹‰å¦‚ä¸‹ï¼Œå…¶ä¸­IntBinaryOperatoræ˜¯ä¸€ä¸ªæ¥å£ã€‚å…ˆä½¿ç”¨åŒ¿åå†…éƒ¨ç±»çš„å†™æ³•è°ƒç”¨è¯¥æ–¹æ³•ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>int</span> <span class=nf>calculateNum</span><span class=o>(</span><span class=n>IntBinaryOperator</span> <span class=n>operator</span><span class=o>){</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>a</span> <span class=o>=</span> <span class=mi>10</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>b</span> <span class=o>=</span> <span class=mi>20</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>operator</span><span class=o>.</span><span class=na>applyAsInt</span><span class=o>(</span><span class=n>a</span><span class=o>,</span> <span class=n>b</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>calculateNum</span><span class=o>(</span><span class=k>new</span> <span class=n>IntBinaryOperator</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>        <span class=kd>public</span> <span class=kt>int</span> <span class=nf>applyAsInt</span><span class=o>(</span><span class=kt>int</span> <span class=n>left</span><span class=o>,</span> <span class=kt>int</span> <span class=n>right</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>left</span> <span class=o>+</span> <span class=n>right</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>});</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>i</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Lambdaå†™æ³•ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>calculateNum</span><span class=o>((</span><span class=kt>int</span> <span class=n>left</span><span class=o>,</span> <span class=kt>int</span> <span class=n>right</span><span class=o>)-&gt;{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>left</span> <span class=o>+</span> <span class=n>right</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>});</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>i</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=ä¾‹ä¸‰>ä¾‹ä¸‰ï¼š</h4><p>ç°æœ‰æ–¹æ³•å®šä¹‰å¦‚ä¸‹ï¼Œå…¶ä¸­IntPredicateæ˜¯ä¸€ä¸ªæ¥å£ã€‚å…ˆä½¿ç”¨åŒ¿åå†…éƒ¨ç±»çš„å†™æ³•è°ƒç”¨è¯¥æ–¹æ³•ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>printNum</span><span class=o>(</span><span class=n>IntPredicate</span> <span class=n>predicate</span><span class=o>){</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span><span class=o>[]</span> <span class=n>arr</span> <span class=o>=</span> <span class=o>{</span><span class=mi>1</span><span class=o>,</span><span class=mi>2</span><span class=o>,</span><span class=mi>3</span><span class=o>,</span><span class=mi>4</span><span class=o>,</span><span class=mi>5</span><span class=o>,</span><span class=mi>6</span><span class=o>,</span><span class=mi>7</span><span class=o>,</span><span class=mi>8</span><span class=o>,</span><span class=mi>9</span><span class=o>,</span><span class=mi>10</span><span class=o>};</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>:</span> <span class=n>arr</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=o>(</span><span class=n>predicate</span><span class=o>.</span><span class=na>test</span><span class=o>(</span><span class=n>i</span><span class=o>)){</span>
</span></span><span class=line><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>i</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>printNum</span><span class=o>(</span><span class=k>new</span> <span class=n>IntPredicate</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>        <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>test</span><span class=o>(</span><span class=kt>int</span> <span class=n>value</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>value</span><span class=o>%</span><span class=mi>2</span><span class=o>==</span><span class=mi>0</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>});</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Lambdaå†™æ³•ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>printNum</span><span class=o>((</span><span class=kt>int</span> <span class=n>value</span><span class=o>)-&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>value</span><span class=o>%</span><span class=mi>2</span><span class=o>==</span><span class=mi>0</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>});</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>printNum</span><span class=o>(</span><span class=n>IntPredicate</span> <span class=n>predicate</span><span class=o>){</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span><span class=o>[]</span> <span class=n>arr</span> <span class=o>=</span> <span class=o>{</span><span class=mi>1</span><span class=o>,</span><span class=mi>2</span><span class=o>,</span><span class=mi>3</span><span class=o>,</span><span class=mi>4</span><span class=o>,</span><span class=mi>5</span><span class=o>,</span><span class=mi>6</span><span class=o>,</span><span class=mi>7</span><span class=o>,</span><span class=mi>8</span><span class=o>,</span><span class=mi>9</span><span class=o>,</span><span class=mi>10</span><span class=o>};</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>:</span> <span class=n>arr</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=o>(</span><span class=n>predicate</span><span class=o>.</span><span class=na>test</span><span class=o>(</span><span class=n>i</span><span class=o>)){</span>
</span></span><span class=line><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>i</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=ä¾‹å››>ä¾‹å››ï¼š</h4><p>ç°æœ‰æ–¹æ³•å®šä¹‰å¦‚ä¸‹ï¼Œå…¶ä¸­Functionæ˜¯ä¸€ä¸ªæ¥å£ã€‚å…ˆä½¿ç”¨åŒ¿åå†…éƒ¨ç±»çš„å†™æ³•è°ƒç”¨è¯¥æ–¹æ³•ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=o>&lt;</span><span class=n>R</span><span class=o>&gt;</span> <span class=n>R</span> <span class=nf>typeConver</span><span class=o>(</span><span class=n>Function</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span><span class=n>R</span><span class=o>&gt;</span> <span class=n>function</span><span class=o>){</span>
</span></span><span class=line><span class=cl>    <span class=n>String</span> <span class=n>str</span> <span class=o>=</span> <span class=s>&#34;1235&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=n>R</span> <span class=n>result</span> <span class=o>=</span> <span class=n>function</span><span class=o>.</span><span class=na>apply</span><span class=o>(</span><span class=n>str</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>result</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Integer</span> <span class=n>result</span> <span class=o>=</span> <span class=n>typeConver</span><span class=o>(</span><span class=k>new</span> <span class=n>Function</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>Integer</span><span class=o>&gt;()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>        <span class=kd>public</span> <span class=n>Integer</span> <span class=nf>apply</span><span class=o>(</span><span class=n>String</span> <span class=n>s</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>Integer</span><span class=o>.</span><span class=na>valueOf</span><span class=o>(</span><span class=n>s</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>});</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>result</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Lambdaå†™æ³•ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Integer</span> <span class=n>result</span> <span class=o>=</span> <span class=n>typeConver</span><span class=o>((</span><span class=n>String</span> <span class=n>s</span><span class=o>)-&gt;{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>Integer</span><span class=o>.</span><span class=na>valueOf</span><span class=o>(</span><span class=n>s</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>});</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>result</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=ä¾‹äº”>ä¾‹äº”ï¼š</h4><p>ç°æœ‰æ–¹æ³•å®šä¹‰å¦‚ä¸‹ï¼Œå…¶ä¸­IntConsumeræ˜¯ä¸€ä¸ªæ¥å£ã€‚å…ˆä½¿ç”¨åŒ¿åå†…éƒ¨ç±»çš„å†™æ³•è°ƒç”¨è¯¥æ–¹æ³•ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>foreachArr</span><span class=o>(</span><span class=n>IntConsumer</span> <span class=n>consumer</span><span class=o>){</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span><span class=o>[]</span> <span class=n>arr</span> <span class=o>=</span> <span class=o>{</span><span class=mi>1</span><span class=o>,</span><span class=mi>2</span><span class=o>,</span><span class=mi>3</span><span class=o>,</span><span class=mi>4</span><span class=o>,</span><span class=mi>5</span><span class=o>,</span><span class=mi>6</span><span class=o>,</span><span class=mi>7</span><span class=o>,</span><span class=mi>8</span><span class=o>,</span><span class=mi>9</span><span class=o>,</span><span class=mi>10</span><span class=o>};</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>:</span> <span class=n>arr</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>consumer</span><span class=o>.</span><span class=na>accept</span><span class=o>(</span><span class=n>i</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>foreachArr</span><span class=o>(</span><span class=k>new</span> <span class=n>IntConsumer</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>        <span class=kd>public</span> <span class=kt>void</span> <span class=nf>accept</span><span class=o>(</span><span class=kt>int</span> <span class=n>value</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>value</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>});</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Lambdaå†™æ³•ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>foreachArr</span><span class=o>((</span><span class=kt>int</span> <span class=n>value</span><span class=o>)-&gt;{</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>value</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>});</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=çœç•¥è§„åˆ™>çœç•¥è§„åˆ™</h3><ul><li>å‚æ•°ç±»å‹å¯ä»¥çœç•¥</li><li>æ–¹æ³•ä½“åªæœ‰ä¸€å¥ä»£ç æ—¶å¤§æ‹¬å·returnå’Œå”¯ä¸€ä¸€å¥ä»£ç çš„åˆ†å·å¯ä»¥çœç•¥</li><li>æ–¹æ³•åªæœ‰ä¸€ä¸ªå‚æ•°æ—¶å°æ‹¬å·å¯ä»¥çœç•¥</li><li>ä»¥ä¸Šè¿™äº›è§„åˆ™éƒ½è®°ä¸ä½ä¹Ÿå¯ä»¥çœç•¥ä¸è®°</li></ul><h2 id=streamæµ>Streamæµ</h2><h3 id=æ¦‚è¿°>æ¦‚è¿°</h3><p>Java8çš„Streamä½¿ç”¨çš„æ˜¯å‡½æ•°å¼ç¼–ç¨‹æ¨¡å¼ï¼Œå¦‚åŒå®ƒçš„åå­—ä¸€æ ·ï¼Œå®ƒå¯ä»¥è¢«ç”¨æ¥å¯¹é›†åˆæˆ–æ•°ç»„è¿›è¡Œé“¾çŠ¶æµå¼çš„æ“ä½œã€‚å¯ä»¥æ›´æ–¹ä¾¿çš„è®©æˆ‘ä»¬å¯¹é›†åˆæˆ–æ•°ç»„æ“ä½œã€‚</p><h3 id=æ¡ˆä¾‹æ•°æ®å‡†å¤‡>æ¡ˆä¾‹æ•°æ®å‡†å¤‡</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;dependencies&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;groupId&gt;</span>org.projectlombok<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;artifactId&gt;</span>lombok<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;version&gt;</span>1.18.16<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/dependency&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependencies&gt;</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Data</span>
</span></span><span class=line><span class=cl><span class=nd>@NoArgsConstructor</span>
</span></span><span class=line><span class=cl><span class=nd>@AllArgsConstructor</span>
</span></span><span class=line><span class=cl><span class=nd>@EqualsAndHashCode</span><span class=c1>//ç”¨äºåæœŸçš„å»é‡ä½¿ç”¨
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Author</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>//id
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>private</span> <span class=n>Long</span> <span class=n>id</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>//å§“å
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>private</span> <span class=n>String</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>//å¹´é¾„
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>private</span> <span class=n>Integer</span> <span class=n>age</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>//ç®€ä»‹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>private</span> <span class=n>String</span> <span class=n>intro</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>//ä½œå“
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>private</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>Book</span><span class=o>&gt;</span> <span class=n>books</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Data</span>
</span></span><span class=line><span class=cl><span class=nd>@AllArgsConstructor</span>
</span></span><span class=line><span class=cl><span class=nd>@NoArgsConstructor</span>
</span></span><span class=line><span class=cl><span class=nd>@EqualsAndHashCode</span><span class=c1>//ç”¨äºåæœŸçš„å»é‡ä½¿ç”¨
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Book</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>//id
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>private</span> <span class=n>Long</span> <span class=n>id</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>//ä¹¦å
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>private</span> <span class=n>String</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>//åˆ†ç±»
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>private</span> <span class=n>String</span> <span class=n>category</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>//è¯„åˆ†
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>private</span> <span class=n>Integer</span> <span class=n>score</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>//ç®€ä»‹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>private</span> <span class=n>String</span> <span class=n>intro</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>private</span> <span class=kd>static</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=nf>getAuthors</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>//æ•°æ®åˆå§‹åŒ–
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>Author</span> <span class=n>author</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Author</span><span class=o>(</span><span class=mi>1L</span><span class=o>,</span><span class=s>&#34;å¼ ä¸‰&#34;</span><span class=o>,</span><span class=mi>33</span><span class=o>,</span><span class=s>&#34;ä¸€ä¸ªå‹¤åŠ³çš„å†œæ°‘&#34;</span><span class=o>,</span><span class=kc>null</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>Author</span> <span class=n>author2</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Author</span><span class=o>(</span><span class=mi>2L</span><span class=o>,</span><span class=s>&#34;æå››&#34;</span><span class=o>,</span><span class=mi>15</span><span class=o>,</span><span class=s>&#34;èªæ˜å¥½å­¦çš„é’å¹´&#34;</span><span class=o>,</span><span class=kc>null</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>Author</span> <span class=n>author3</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Author</span><span class=o>(</span><span class=mi>3L</span><span class=o>,</span><span class=s>&#34;ç‹äº”&#34;</span><span class=o>,</span><span class=mi>14</span><span class=o>,</span><span class=s>&#34;é˜³å…‰å¼€æœ—çš„å°‘å¹´&#34;</span><span class=o>,</span><span class=kc>null</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>Author</span> <span class=n>author4</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Author</span><span class=o>(</span><span class=mi>3L</span><span class=o>,</span><span class=s>&#34;ç‹äº”&#34;</span><span class=o>,</span><span class=mi>14</span><span class=o>,</span><span class=s>&#34;é˜³å…‰å¼€æœ—çš„å°‘å¹´&#34;</span><span class=o>,</span><span class=kc>null</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>//ä¹¦ç±åˆ—è¡¨
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>List</span><span class=o>&lt;</span><span class=n>Book</span><span class=o>&gt;</span> <span class=n>books1</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>    <span class=n>List</span><span class=o>&lt;</span><span class=n>Book</span><span class=o>&gt;</span> <span class=n>books2</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>    <span class=n>List</span><span class=o>&lt;</span><span class=n>Book</span><span class=o>&gt;</span> <span class=n>books3</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>books1</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>Book</span><span class=o>(</span><span class=mi>1L</span><span class=o>,</span><span class=s>&#34;åŠªåŠ›æ”¹å˜äººç”Ÿ&#34;</span><span class=o>,</span><span class=s>&#34;è‡ªä¼ ,åŠ±å¿—&#34;</span><span class=o>,</span><span class=mi>88</span><span class=o>,</span><span class=s>&#34;ä¸æ‡ˆåŠªåŠ›æ‰èƒ½æ”¹å˜å‘½è¿&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=n>books1</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>Book</span><span class=o>(</span><span class=mi>2L</span><span class=o>,</span><span class=s>&#34;é’æ˜¥ä¸ç•™ç™½&#34;</span><span class=o>,</span><span class=s>&#34;æˆé•¿,åŠ±å¿—&#34;</span><span class=o>,</span><span class=mi>99</span><span class=o>,</span><span class=s>&#34;è¦å……å®é’æ˜¥,äº‰å–è¿›æ­¥&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>books2</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>Book</span><span class=o>(</span><span class=mi>3L</span><span class=o>,</span><span class=s>&#34;ä¸–ç•Œä¹‹å¤§&#34;</span><span class=o>,</span><span class=s>&#34;å“²å­¦&#34;</span><span class=o>,</span><span class=mi>85</span><span class=o>,</span><span class=s>&#34;è¦ç”¨æ€è€ƒæ¥é¢†æ‚Ÿä¸–ç•Œ&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=n>books2</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>Book</span><span class=o>(</span><span class=mi>3L</span><span class=o>,</span><span class=s>&#34;ä¸–ç•Œä¹‹å¤§&#34;</span><span class=o>,</span><span class=s>&#34;å“²å­¦&#34;</span><span class=o>,</span><span class=mi>85</span><span class=o>,</span><span class=s>&#34;è¦ç”¨æ€è€ƒæ¥é¢†æ‚Ÿä¸–ç•Œ&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=n>books2</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>Book</span><span class=o>(</span><span class=mi>4L</span><span class=o>,</span><span class=s>&#34;éšå¿ƒè€ŒåŠ¨&#34;</span><span class=o>,</span><span class=s>&#34;çˆ±æƒ…,è‡ªä¼ &#34;</span><span class=o>,</span><span class=mi>56</span><span class=o>,</span><span class=s>&#34;è¦å­¦ä¼šé¡ºå…¶è‡ªç„¶&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>books3</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>Book</span><span class=o>(</span><span class=mi>5L</span><span class=o>,</span><span class=s>&#34;ä½ æˆ‘çš†ä¸€ä½“&#34;</span><span class=o>,</span><span class=s>&#34;çˆ±æƒ…&#34;</span><span class=o>,</span><span class=mi>56</span><span class=o>,</span><span class=s>&#34;è¦çæƒœå½¼æ­¤&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=n>books3</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>Book</span><span class=o>(</span><span class=mi>6L</span><span class=o>,</span><span class=s>&#34;å¿ƒä¸è¡Œ&#34;</span><span class=o>,</span><span class=s>&#34;è‡ªä¼ &#34;</span><span class=o>,</span><span class=mi>100</span><span class=o>,</span><span class=s>&#34;è¦è¨€è¡Œä¸€è‡´&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=n>books3</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>Book</span><span class=o>(</span><span class=mi>6L</span><span class=o>,</span><span class=s>&#34;å¿ƒä¸è¡Œ&#34;</span><span class=o>,</span><span class=s>&#34;è‡ªä¼ &#34;</span><span class=o>,</span><span class=mi>100</span><span class=o>,</span><span class=s>&#34;è¦è¨€è¡Œä¸€è‡´&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>author</span><span class=o>.</span><span class=na>setBooks</span><span class=o>(</span><span class=n>books1</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>author2</span><span class=o>.</span><span class=na>setBooks</span><span class=o>(</span><span class=n>books2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>author3</span><span class=o>.</span><span class=na>setBooks</span><span class=o>(</span><span class=n>books3</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>author4</span><span class=o>.</span><span class=na>setBooks</span><span class=o>(</span><span class=n>books3</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authorList</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;(</span><span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span><span class=n>author</span><span class=o>,</span><span class=n>author2</span><span class=o>,</span><span class=n>author3</span><span class=o>,</span><span class=n>author4</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>authorList</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=å¿«é€Ÿå…¥é—¨>å¿«é€Ÿå…¥é—¨</h3><h4 id=éœ€æ±‚>éœ€æ±‚</h4><p>æˆ‘ä»¬å¯ä»¥è°ƒç”¨getAuthorsæ–¹æ³•è·å–åˆ°ä½œå®¶çš„é›†åˆã€‚ç°åœ¨éœ€è¦æ‰“å°æ‰€æœ‰å¹´é¾„å°äº18çš„ä½œå®¶çš„åå­—ï¼Œå¹¶ä¸”è¦æ³¨æ„å»é‡ã€‚</p><h4 id=å®ç°>å®ç°</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//æ‰“å°æ‰€æœ‰å¹´é¾„å°äº18çš„ä½œå®¶çš„åå­—ï¼Œå¹¶ä¸”è¦æ³¨æ„å»é‡
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>authors</span><span class=o>.</span>
</span></span><span class=line><span class=cl>        <span class=nf>stream</span><span class=o>()</span><span class=c1>//æŠŠé›†åˆè½¬æ¢æˆæµ
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=o>.</span><span class=na>distinct</span><span class=o>()</span><span class=c1>//å…ˆå»é™¤é‡å¤çš„ä½œå®¶
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>()&lt;</span><span class=mi>18</span><span class=o>)</span><span class=c1>//ç­›é€‰å¹´é¾„å°äº18çš„
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>()));</span><span class=c1>//éå†æ‰“å°åå­—
</span></span></span></code></pre></td></tr></table></div></div><h3 id=å¸¸ç”¨æ“ä½œ>å¸¸ç”¨æ“ä½œ</h3><h4 id=åˆ›å»ºæµ>åˆ›å»ºæµ</h4><p>å•åˆ—é›†åˆï¼š <code>é›†åˆå¯¹è±¡.stream()</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>stream</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>();</span>
</span></span></code></pre></td></tr></table></div></div><p>æ•°ç»„ï¼š<code>Arrays.stream(æ•°ç»„) </code>æˆ–è€…ä½¿ç”¨<code>Stream.of</code>æ¥åˆ›å»º</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-JAVA data-lang=JAVA><span class=line><span class=cl><span class=n>Integer</span><span class=o>[]</span> <span class=n>arr</span> <span class=o>=</span> <span class=o>{</span><span class=mi>1</span><span class=o>,</span><span class=mi>2</span><span class=o>,</span><span class=mi>3</span><span class=o>,</span><span class=mi>4</span><span class=o>,</span><span class=mi>5</span><span class=o>};</span>
</span></span><span class=line><span class=cl><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>stream</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>stream</span><span class=o>(</span><span class=n>arr</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>stream2</span> <span class=o>=</span> <span class=n>Stream</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>arr</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><p>åŒåˆ—é›†åˆï¼šè½¬æ¢æˆå•åˆ—é›†åˆåå†åˆ›å»º</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>map</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashMap</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl><span class=n>map</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;èœ¡ç¬”å°æ–°&#34;</span><span class=o>,</span><span class=mi>19</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>map</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;é»‘å­&#34;</span><span class=o>,</span><span class=mi>17</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>map</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;æ—¥å‘ç¿”é˜³&#34;</span><span class=o>,</span><span class=mi>16</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Map</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>Integer</span><span class=o>&gt;&gt;</span> <span class=n>stream</span> <span class=o>=</span> <span class=n>map</span><span class=o>.</span><span class=na>entrySet</span><span class=o>().</span><span class=na>stream</span><span class=o>();</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=ä¸­é—´æ“ä½œ>ä¸­é—´æ“ä½œ</h4><h5 id=filter>filter</h5><p>å¯ä»¥å¯¹æµä¸­çš„å…ƒç´ è¿›è¡Œæ¡ä»¶è¿‡æ»¤ï¼Œç¬¦åˆè¿‡æ»¤æ¡ä»¶çš„æ‰èƒ½ç»§ç»­ç•™åœ¨æµä¸­ã€‚</p><p>ä¾‹å¦‚ï¼š</p><p>æ‰“å°æ‰€æœ‰å§“åé•¿åº¦å¤§äº1çš„ä½œå®¶çš„å§“å</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>().</span><span class=na>length</span><span class=o>()&gt;</span><span class=mi>1</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>()));</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=map>map</h5><p>å¯ä»¥æŠŠå¯¹æµä¸­çš„å…ƒç´ è¿›è¡Œè®¡ç®—æˆ–è½¬æ¢ã€‚</p><p>ä¾‹å¦‚ï¼š</p><p>æ‰“å°æ‰€æœ‰ä½œå®¶çš„å§“å</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>authors</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>name</span><span class=o>-&gt;</span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>name</span><span class=o>));</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// æ‰“å°æ‰€æœ‰ä½œå®¶çš„å§“å
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>age</span><span class=o>-&gt;</span><span class=n>age</span><span class=o>+</span><span class=mi>10</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>age</span><span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>age</span><span class=o>));</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=distinct>distinct</h5><p>å¯ä»¥å»é™¤æµä¸­çš„é‡å¤å…ƒç´ ã€‚</p><p>ä¾‹å¦‚ï¼š</p><p>æ‰“å°æ‰€æœ‰ä½œå®¶çš„å§“åï¼Œå¹¶ä¸”è¦æ±‚å…¶ä¸­ä¸èƒ½æœ‰é‡å¤å…ƒç´ ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>distinct</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>()));</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>æ³¨æ„ï¼šdistinctæ–¹æ³•æ˜¯ä¾èµ–Objectçš„equalsæ–¹æ³•æ¥åˆ¤æ–­æ˜¯å¦æ˜¯ç›¸åŒå¯¹è±¡çš„ã€‚æ‰€ä»¥éœ€è¦æ³¨æ„é‡å†™equalsæ–¹æ³•ã€‚</strong></p><h5 id=sorted>sorted</h5><p>å¯ä»¥å¯¹æµä¸­çš„å…ƒç´ è¿›è¡Œæ’åºã€‚</p><p>ä¾‹å¦‚ï¼š</p><p>å¯¹æµä¸­çš„å…ƒç´ æŒ‰ç…§å¹´é¾„è¿›è¡Œé™åºæ’åºï¼Œå¹¶ä¸”è¦æ±‚ä¸èƒ½æœ‰é‡å¤çš„å…ƒç´ ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=c1>// å¯¹æµä¸­çš„å…ƒç´ æŒ‰ç…§å¹´é¾„è¿›è¡Œé™åºæ’åºï¼Œå¹¶ä¸”è¦æ±‚ä¸èƒ½æœ‰é‡å¤çš„å…ƒç´ ã€‚
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>distinct</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>sorted</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>()));</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=c1>// å¯¹æµä¸­çš„å…ƒç´ æŒ‰ç…§å¹´é¾„è¿›è¡Œé™åºæ’åºï¼Œå¹¶ä¸”è¦æ±‚ä¸èƒ½æœ‰é‡å¤çš„å…ƒç´ ã€‚
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>distinct</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>sorted</span><span class=o>((</span><span class=n>o1</span><span class=o>,</span> <span class=n>o2</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>o2</span><span class=o>.</span><span class=na>getAge</span><span class=o>()-</span><span class=n>o1</span><span class=o>.</span><span class=na>getAge</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>()));</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>æ³¨æ„ï¼šå¦‚æœè°ƒç”¨ç©ºå‚çš„sorted()æ–¹æ³•ï¼Œéœ€è¦æµä¸­çš„å…ƒç´ æ˜¯å®ç°äº†Comparableã€‚</strong></p><h5 id=limit>limit</h5><p>å¯ä»¥è®¾ç½®æµçš„æœ€å¤§é•¿åº¦ï¼Œè¶…å‡ºçš„éƒ¨åˆ†å°†è¢«æŠ›å¼ƒã€‚</p><p>ä¾‹å¦‚ï¼š</p><p>å¯¹æµä¸­çš„å…ƒç´ æŒ‰ç…§å¹´é¾„è¿›è¡Œé™åºæ’åºï¼Œå¹¶ä¸”è¦æ±‚ä¸èƒ½æœ‰é‡å¤çš„å…ƒç´ ,ç„¶åæ‰“å°å…¶ä¸­å¹´é¾„æœ€å¤§çš„ä¸¤ä¸ªä½œå®¶çš„å§“åã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>distinct</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>sorted</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>limit</span><span class=o>(</span><span class=mi>2</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>()));</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=skip>skip</h5><p>è·³è¿‡æµä¸­çš„å‰nä¸ªå…ƒç´ ï¼Œè¿”å›å‰©ä¸‹çš„å…ƒç´ </p><p>ä¾‹å¦‚ï¼š</p><p>æ‰“å°é™¤äº†å¹´é¾„æœ€å¤§çš„ä½œå®¶å¤–çš„å…¶ä»–ä½œå®¶ï¼Œè¦æ±‚ä¸èƒ½æœ‰é‡å¤å…ƒç´ ï¼Œå¹¶ä¸”æŒ‰ç…§å¹´é¾„é™åºæ’åºã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// æ‰“å°é™¤äº†å¹´é¾„æœ€å¤§çš„ä½œå®¶å¤–çš„å…¶ä»–ä½œå®¶ï¼Œè¦æ±‚ä¸èƒ½æœ‰é‡å¤å…ƒç´ ï¼Œå¹¶ä¸”æŒ‰ç…§å¹´é¾„é™åºæ’åºã€‚
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>distinct</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>sorted</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>skip</span><span class=o>(</span><span class=mi>1</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>()));</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=flatmap>flatMap</h5><p>mapåªèƒ½æŠŠä¸€ä¸ªå¯¹è±¡è½¬æ¢æˆå¦ä¸€ä¸ªå¯¹è±¡æ¥ä½œä¸ºæµä¸­çš„å…ƒç´ ã€‚è€ŒflatMapå¯ä»¥æŠŠä¸€ä¸ªå¯¹è±¡è½¬æ¢æˆå¤šä¸ªå¯¹è±¡ä½œä¸ºæµä¸­çš„å…ƒç´ ã€‚</p><p>ä¾‹ä¸€ï¼š</p><p>æ‰“å°æ‰€æœ‰ä¹¦ç±çš„åå­—ã€‚è¦æ±‚å¯¹é‡å¤çš„å…ƒç´ è¿›è¡Œå»é‡ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// æ‰“å°æ‰€æœ‰ä¹¦ç±çš„åå­—ã€‚è¦æ±‚å¯¹é‡å¤çš„å…ƒç´ è¿›è¡Œå»é‡ã€‚
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>flatMap</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getBooks</span><span class=o>().</span><span class=na>stream</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>distinct</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>book</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>book</span><span class=o>.</span><span class=na>getName</span><span class=o>()));</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¾‹äºŒï¼š</p><p>æ‰“å°ç°æœ‰æ•°æ®çš„æ‰€æœ‰åˆ†ç±»ã€‚è¦æ±‚å¯¹åˆ†ç±»è¿›è¡Œå»é‡ã€‚ä¸èƒ½å‡ºç°è¿™ç§æ ¼å¼ï¼šå“²å­¦,çˆ±æƒ…</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// æ‰“å°ç°æœ‰æ•°æ®çš„æ‰€æœ‰åˆ†ç±»ã€‚è¦æ±‚å¯¹åˆ†ç±»è¿›è¡Œå»é‡ã€‚ä¸èƒ½å‡ºç°è¿™ç§æ ¼å¼ï¼šå“²å­¦,çˆ±æƒ…     çˆ±æƒ…
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>flatMap</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getBooks</span><span class=o>().</span><span class=na>stream</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>distinct</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>flatMap</span><span class=o>(</span><span class=n>book</span> <span class=o>-&gt;</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>stream</span><span class=o>(</span><span class=n>book</span><span class=o>.</span><span class=na>getCategory</span><span class=o>().</span><span class=na>split</span><span class=o>(</span><span class=s>&#34;,&#34;</span><span class=o>)))</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>distinct</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>category</span><span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>category</span><span class=o>));</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=ç»ˆç»“æ“ä½œ>ç»ˆç»“æ“ä½œ</h4><h5 id=foreach>forEach</h5><p>å¯¹æµä¸­çš„å…ƒç´ è¿›è¡Œéå†æ“ä½œï¼Œæˆ‘ä»¬é€šè¿‡ä¼ å…¥çš„å‚æ•°å»æŒ‡å®šå¯¹éå†åˆ°çš„å…ƒç´ è¿›è¡Œä»€ä¹ˆå…·ä½“æ“ä½œã€‚</p><p>ä¾‹å­ï¼š</p><p>è¾“å‡ºæ‰€æœ‰ä½œå®¶çš„åå­—</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//  è¾“å‡ºæ‰€æœ‰ä½œå®¶çš„åå­—
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>distinct</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>name</span><span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>name</span><span class=o>));</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=count>count</h5><p>å¯ä»¥ç”¨æ¥è·å–å½“å‰æµä¸­å…ƒç´ çš„ä¸ªæ•°ã€‚</p><p>ä¾‹å­ï¼š</p><p>æ‰“å°è¿™äº›ä½œå®¶çš„æ‰€å‡ºä¹¦ç±çš„æ•°ç›®ï¼Œæ³¨æ„åˆ é™¤é‡å¤å…ƒç´ ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// æ‰“å°è¿™äº›ä½œå®¶çš„æ‰€å‡ºä¹¦ç±çš„æ•°ç›®ï¼Œæ³¨æ„åˆ é™¤é‡å¤å…ƒç´ ã€‚
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>long</span> <span class=n>count</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>flatMap</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getBooks</span><span class=o>().</span><span class=na>stream</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>distinct</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>count</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>count</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=maxmin>max&amp;min</h5><p>å¯ä»¥ç”¨æ¥æˆ–è€…æµä¸­çš„æœ€å€¼ã€‚</p><p>ä¾‹å­ï¼š</p><p>åˆ†åˆ«è·å–è¿™äº›ä½œå®¶çš„æ‰€å‡ºä¹¦ç±çš„æœ€é«˜åˆ†å’Œæœ€ä½åˆ†å¹¶æ‰“å°ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//  åˆ†åˆ«è·å–è¿™äº›ä½œå®¶çš„æ‰€å‡ºä¹¦ç±çš„æœ€é«˜åˆ†å’Œæœ€ä½åˆ†å¹¶æ‰“å°ã€‚
</span></span></span><span class=line><span class=cl><span class=c1>//Stream&lt;Author&gt;  -&gt; Stream&lt;Book&gt; -&gt;Stream&lt;Integer&gt;  -&gt;æ±‚å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>max</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>flatMap</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getBooks</span><span class=o>().</span><span class=na>stream</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>book</span> <span class=o>-&gt;</span> <span class=n>book</span><span class=o>.</span><span class=na>getScore</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>max</span><span class=o>((</span><span class=n>score1</span><span class=o>,</span> <span class=n>score2</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>score1</span> <span class=o>-</span> <span class=n>score2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>min</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>flatMap</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getBooks</span><span class=o>().</span><span class=na>stream</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>book</span> <span class=o>-&gt;</span> <span class=n>book</span><span class=o>.</span><span class=na>getScore</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>min</span><span class=o>((</span><span class=n>score1</span><span class=o>,</span> <span class=n>score2</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>score1</span> <span class=o>-</span> <span class=n>score2</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>max</span><span class=o>.</span><span class=na>get</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>min</span><span class=o>.</span><span class=na>get</span><span class=o>());</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=collect>collect</h5><p>æŠŠå½“å‰æµè½¬æ¢æˆä¸€ä¸ªé›†åˆã€‚</p><p>ä¾‹å­ï¼š</p><p>è·å–ä¸€ä¸ªå­˜æ”¾æ‰€æœ‰ä½œè€…åå­—çš„Listé›†åˆã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// è·å–ä¸€ä¸ªå­˜æ”¾æ‰€æœ‰ä½œè€…åå­—çš„Listé›†åˆã€‚
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>nameList</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>toList</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>nameList</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><p>è·å–ä¸€ä¸ªæ‰€æœ‰ä¹¦åçš„Seté›†åˆã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// è·å–ä¸€ä¸ªæ‰€æœ‰ä¹¦åçš„Seté›†åˆã€‚
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>Set</span><span class=o>&lt;</span><span class=n>Book</span><span class=o>&gt;</span> <span class=n>books</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>flatMap</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getBooks</span><span class=o>().</span><span class=na>stream</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>toSet</span><span class=o>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>books</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><p>è·å–ä¸€ä¸ªMapé›†åˆï¼Œmapçš„keyä¸ºä½œè€…åï¼Œvalueä¸ºList</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// è·å–ä¸€ä¸ªMapé›†åˆï¼Œmapçš„keyä¸ºä½œè€…åï¼Œvalueä¸ºList&lt;Book&gt;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>Book</span><span class=o>&gt;&gt;</span> <span class=n>map</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>distinct</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>toMap</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>(),</span> <span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getBooks</span><span class=o>()));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>map</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=æŸ¥æ‰¾ä¸åŒ¹é…>æŸ¥æ‰¾ä¸åŒ¹é…</h5><h6 id=anymatch>anyMatch</h6><p>å¯ä»¥ç”¨æ¥åˆ¤æ–­æ˜¯å¦æœ‰ä»»æ„ç¬¦åˆåŒ¹é…æ¡ä»¶çš„å…ƒç´ ï¼Œç»“æœä¸ºbooleanç±»å‹ã€‚</p><p>ä¾‹å­ï¼š</p><p>åˆ¤æ–­æ˜¯å¦æœ‰å¹´é¾„åœ¨29ä»¥ä¸Šçš„ä½œå®¶</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//  åˆ¤æ–­æ˜¯å¦æœ‰å¹´é¾„åœ¨29ä»¥ä¸Šçš„ä½œå®¶
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=kt>boolean</span> <span class=n>flag</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>anyMatch</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>()</span> <span class=o>&gt;</span> <span class=mi>29</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>flag</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=allmatch>allMatch</h6><p>å¯ä»¥ç”¨æ¥åˆ¤æ–­æ˜¯å¦éƒ½ç¬¦åˆåŒ¹é…æ¡ä»¶ï¼Œç»“æœä¸ºbooleanç±»å‹ã€‚å¦‚æœéƒ½ç¬¦åˆç»“æœä¸ºtrueï¼Œå¦åˆ™ç»“æœä¸ºfalseã€‚</p><p>ä¾‹å­ï¼š</p><p>åˆ¤æ–­æ˜¯å¦æ‰€æœ‰çš„ä½œå®¶éƒ½æ˜¯æˆå¹´äºº</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// åˆ¤æ–­æ˜¯å¦æ‰€æœ‰çš„ä½œå®¶éƒ½æ˜¯æˆå¹´äºº
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=kt>boolean</span> <span class=n>flag</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>allMatch</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>()</span> <span class=o>&gt;=</span> <span class=mi>18</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>flag</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=nonematch>noneMatch</h6><p>å¯ä»¥åˆ¤æ–­æµä¸­çš„å…ƒç´ æ˜¯å¦éƒ½ä¸ç¬¦åˆåŒ¹é…æ¡ä»¶ã€‚å¦‚æœéƒ½ä¸ç¬¦åˆç»“æœä¸ºtrueï¼Œå¦åˆ™ç»“æœä¸ºfalse</p><p>ä¾‹å­ï¼š</p><p>åˆ¤æ–­ä½œå®¶æ˜¯å¦éƒ½æ²¡æœ‰è¶…è¿‡100å²çš„ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// åˆ¤æ–­ä½œå®¶æ˜¯å¦éƒ½æ²¡æœ‰è¶…è¿‡100å²çš„ã€‚
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>boolean</span> <span class=n>b</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>noneMatch</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>()</span> <span class=o>&gt;</span> <span class=mi>100</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>b</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=findany>findAny</h6><p>è·å–æµä¸­çš„ä»»æ„ä¸€ä¸ªå…ƒç´ ã€‚è¯¥æ–¹æ³•æ²¡æœ‰åŠæ³•ä¿è¯è·å–çš„ä¸€å®šæ˜¯æµä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</p><p>ä¾‹å­ï¼š</p><p>è·å–ä»»æ„ä¸€ä¸ªå¹´é¾„å¤§äº18çš„ä½œå®¶ï¼Œå¦‚æœå­˜åœ¨å°±è¾“å‡ºä»–çš„åå­—</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// è·å–ä»»æ„ä¸€ä¸ªå¹´é¾„å¤§äº18çš„ä½œå®¶ï¼Œå¦‚æœå­˜åœ¨å°±è¾“å‡ºä»–çš„åå­—
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>optionalAuthor</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>()&gt;</span><span class=mi>18</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>findAny</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>optionalAuthor</span><span class=o>.</span><span class=na>ifPresent</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>()));</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=findfirst>findFirst</h6><p>è·å–æµä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</p><p>ä¾‹å­ï¼š</p><p>è·å–ä¸€ä¸ªå¹´é¾„æœ€å°çš„ä½œå®¶ï¼Œå¹¶è¾“å‡ºä»–çš„å§“åã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// è·å–ä¸€ä¸ªå¹´é¾„æœ€å°çš„ä½œå®¶ï¼Œå¹¶è¾“å‡ºä»–çš„å§“åã€‚
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>first</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>sorted</span><span class=o>((</span><span class=n>o1</span><span class=o>,</span> <span class=n>o2</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>o1</span><span class=o>.</span><span class=na>getAge</span><span class=o>()</span> <span class=o>-</span> <span class=n>o2</span><span class=o>.</span><span class=na>getAge</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>findFirst</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>first</span><span class=o>.</span><span class=na>ifPresent</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>()));</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=reduceå½’å¹¶>reduceå½’å¹¶</h5><p>å¯¹æµä¸­çš„æ•°æ®æŒ‰ç…§ä½ æŒ‡å®šçš„è®¡ç®—æ–¹å¼è®¡ç®—å‡ºä¸€ä¸ªç»“æœã€‚ï¼ˆç¼©å‡æ“ä½œï¼‰</p><p>reduceçš„ä½œç”¨æ˜¯æŠŠstreamä¸­çš„å…ƒç´ ç»™ç»„åˆèµ·æ¥ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ å…¥ä¸€ä¸ªåˆå§‹å€¼ï¼Œå®ƒä¼šæŒ‰ç…§æˆ‘ä»¬çš„è®¡ç®—æ–¹å¼ä¾æ¬¡æ‹¿æµä¸­çš„å…ƒç´ å’Œåˆå§‹åŒ–å€¼è¿›è¡Œè®¡ç®—ï¼Œè®¡ç®—ç»“æœå†å’Œåé¢çš„å…ƒç´ è®¡ç®—ã€‚</p><p>reduceä¸¤ä¸ªå‚æ•°çš„é‡è½½å½¢å¼å†…éƒ¨çš„è®¡ç®—æ–¹å¼å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>T</span> <span class=n>result</span> <span class=o>=</span> <span class=n>identity</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=o>(</span><span class=n>T</span> <span class=n>element</span> <span class=o>:</span> <span class=k>this</span> <span class=n>stream</span><span class=o>)</span>
</span></span><span class=line><span class=cl>	<span class=n>result</span> <span class=o>=</span> <span class=n>accumulator</span><span class=o>.</span><span class=na>apply</span><span class=o>(</span><span class=n>result</span><span class=o>,</span> <span class=n>element</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=k>return</span> <span class=n>result</span><span class=o>;</span>
</span></span></code></pre></td></tr></table></div></div><p>å…¶ä¸­identityå°±æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡æ–¹æ³•å‚æ•°ä¼ å…¥çš„åˆå§‹å€¼ï¼Œaccumulatorçš„applyå…·ä½“è¿›è¡Œä»€ä¹ˆè®¡ç®—ä¹Ÿæ˜¯æˆ‘ä»¬é€šè¿‡æ–¹æ³•å‚æ•°æ¥ç¡®å®šçš„ã€‚</p><p>ä¾‹å­ï¼š</p><p>ä½¿ç”¨reduceæ±‚æ‰€æœ‰ä½œè€…å¹´é¾„çš„å’Œ</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// ä½¿ç”¨reduceæ±‚æ‰€æœ‰ä½œè€…å¹´é¾„çš„å’Œ
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>Integer</span> <span class=n>sum</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>distinct</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>reduce</span><span class=o>(</span><span class=mi>0</span><span class=o>,</span> <span class=o>(</span><span class=n>result</span><span class=o>,</span> <span class=n>element</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>result</span> <span class=o>+</span> <span class=n>element</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>sum</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><p>ä½¿ç”¨reduceæ±‚æ‰€æœ‰ä½œè€…ä¸­å¹´é¾„çš„æœ€å¤§å€¼</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// ä½¿ç”¨reduceæ±‚æ‰€æœ‰ä½œè€…ä¸­å¹´é¾„çš„æœ€å¤§å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>Integer</span> <span class=n>max</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>reduce</span><span class=o>(</span><span class=n>Integer</span><span class=o>.</span><span class=na>MIN_VALUE</span><span class=o>,</span> <span class=o>(</span><span class=n>result</span><span class=o>,</span> <span class=n>element</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>result</span> <span class=o>&lt;</span> <span class=n>element</span> <span class=o>?</span> <span class=n>element</span> <span class=o>:</span> <span class=n>result</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>max</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><p>ä½¿ç”¨reduceæ±‚æ‰€æœ‰ä½œè€…ä¸­å¹´é¾„çš„æœ€å°å€¼</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//  ä½¿ç”¨reduceæ±‚æ‰€æœ‰ä½œè€…ä¸­å¹´é¾„çš„æœ€å°å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>Integer</span> <span class=n>min</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>reduce</span><span class=o>(</span><span class=n>Integer</span><span class=o>.</span><span class=na>MAX_VALUE</span><span class=o>,</span> <span class=o>(</span><span class=n>result</span><span class=o>,</span> <span class=n>element</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>result</span> <span class=o>&gt;</span> <span class=n>element</span> <span class=o>?</span> <span class=n>element</span> <span class=o>:</span> <span class=n>result</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>min</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><p>reduceä¸€ä¸ªå‚æ•°çš„é‡è½½å½¢å¼å†…éƒ¨çš„è®¡ç®—</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kt>boolean</span> <span class=n>foundAny</span> <span class=o>=</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=n>T</span> <span class=n>result</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=o>(</span><span class=n>T</span> <span class=n>element</span> <span class=o>:</span> <span class=k>this</span> <span class=n>stream</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>   <span class=k>if</span> <span class=o>(!</span><span class=n>foundAny</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>       <span class=n>foundAny</span> <span class=o>=</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>       <span class=n>result</span> <span class=o>=</span> <span class=n>element</span><span class=o>;</span>
</span></span><span class=line><span class=cl>   <span class=o>}</span>
</span></span><span class=line><span class=cl>   <span class=k>else</span>
</span></span><span class=line><span class=cl>       <span class=n>result</span> <span class=o>=</span> <span class=n>accumulator</span><span class=o>.</span><span class=na>apply</span><span class=o>(</span><span class=n>result</span><span class=o>,</span> <span class=n>element</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=k>return</span> <span class=n>foundAny</span> <span class=o>?</span> <span class=n>Optional</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>result</span><span class=o>)</span> <span class=o>:</span> <span class=n>Optional</span><span class=o>.</span><span class=na>empty</span><span class=o>();</span>
</span></span></code></pre></td></tr></table></div></div><p>å¦‚æœç”¨ä¸€ä¸ªå‚æ•°çš„é‡è½½æ–¹æ³•å»æ±‚æœ€å°å€¼ä»£ç å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//  ä½¿ç”¨reduceæ±‚æ‰€æœ‰ä½œè€…ä¸­å¹´é¾„çš„æœ€å°å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>minOptional</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>reduce</span><span class=o>((</span><span class=n>result</span><span class=o>,</span> <span class=n>element</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>result</span> <span class=o>&gt;</span> <span class=n>element</span> <span class=o>?</span> <span class=n>element</span> <span class=o>:</span> <span class=n>result</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>minOptional</span><span class=o>.</span><span class=na>ifPresent</span><span class=o>(</span><span class=n>age</span><span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>age</span><span class=o>));</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=æ³¨æ„äº‹é¡¹>æ³¨æ„äº‹é¡¹</h3><ul><li>æƒ°æ€§æ±‚å€¼ï¼ˆå¦‚æœæ²¡æœ‰ç»ˆç»“æ“ä½œï¼Œæ²¡æœ‰ä¸­é—´æ“ä½œæ˜¯ä¸ä¼šå¾—åˆ°æ‰§è¡Œçš„ï¼‰</li><li>æµæ˜¯ä¸€æ¬¡æ€§çš„ï¼ˆä¸€æ—¦ä¸€ä¸ªæµå¯¹è±¡ç»è¿‡ä¸€ä¸ªç»ˆç»“æ“ä½œåã€‚è¿™ä¸ªæµå°±ä¸èƒ½å†è¢«ä½¿ç”¨ï¼‰</li><li>ä¸ä¼šå½±å“åŸæ•°æ®ï¼ˆæˆ‘ä»¬åœ¨æµä¸­å¯ä»¥å¤šæ•°æ®åšå¾ˆå¤šå¤„ç†ã€‚ä½†æ˜¯æ­£å¸¸æƒ…å†µä¸‹æ˜¯ä¸ä¼šå½±å“åŸæ¥é›†åˆä¸­çš„å…ƒç´ çš„ã€‚è¿™å¾€å¾€ä¹Ÿæ˜¯æˆ‘ä»¬æœŸæœ›çš„ï¼‰</li></ul><h2 id=optional>Optional</h2><h3 id=æ¦‚è¿°-1>æ¦‚è¿°</h3><p>æˆ‘ä»¬åœ¨ç¼–å†™ä»£ç çš„æ—¶å€™å‡ºç°æœ€å¤šçš„å°±æ˜¯ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚æ‰€ä»¥åœ¨å¾ˆå¤šæƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦åšå„ç§éç©ºçš„åˆ¤æ–­ã€‚</p><p>ä¾‹å¦‚ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Author</span> <span class=n>author</span> <span class=o>=</span> <span class=n>getAuthor</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=k>if</span><span class=o>(</span><span class=n>author</span><span class=o>!=</span><span class=kc>null</span><span class=o>){</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å°¤å…¶æ˜¯å¯¹è±¡ä¸­çš„å±æ€§è¿˜æ˜¯ä¸€ä¸ªå¯¹è±¡çš„æƒ…å†µä¸‹ã€‚è¿™ç§åˆ¤æ–­ä¼šæ›´å¤šã€‚</p><p>è€Œè¿‡å¤šçš„åˆ¤æ–­è¯­å¥ä¼šè®©æˆ‘ä»¬çš„ä»£ç æ˜¾å¾—è‡ƒè‚¿ä¸å ªã€‚</p><p>æ‰€ä»¥åœ¨JDK8ä¸­å¼•å…¥äº†Optional,å…»æˆä½¿ç”¨Optionalçš„ä¹ æƒ¯åä½ å¯ä»¥å†™å‡ºæ›´ä¼˜é›…çš„ä»£ç æ¥é¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p><p>å¹¶ä¸”åœ¨å¾ˆå¤šå‡½æ•°å¼ç¼–ç¨‹ç›¸å…³çš„APIä¸­ä¹Ÿéƒ½ç”¨åˆ°äº†Optionalï¼Œå¦‚æœä¸ä¼šä½¿ç”¨Optionalä¹Ÿä¼šå¯¹å‡½æ•°å¼ç¼–ç¨‹çš„å­¦ä¹ é€ æˆå½±å“ã€‚</p><h3 id=ä½¿ç”¨>ä½¿ç”¨</h3><h4 id=åˆ›å»ºå¯¹è±¡>åˆ›å»ºå¯¹è±¡</h4><p>Optionalå°±å¥½åƒæ˜¯åŒ…è£…ç±»ï¼Œå¯ä»¥æŠŠæˆ‘ä»¬çš„å…·ä½“æ•°æ®å°è£…Optionalå¯¹è±¡å†…éƒ¨ã€‚ç„¶åæˆ‘ä»¬å»ä½¿ç”¨Optionalä¸­å°è£…å¥½çš„æ–¹æ³•æ“ä½œå°è£…è¿›å»çš„æ•°æ®å°±å¯ä»¥éå¸¸ä¼˜é›…çš„é¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p><p>æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨<strong>Optional</strong>çš„<strong>é™æ€æ–¹æ³•ofNullable</strong>æ¥æŠŠæ•°æ®å°è£…æˆä¸€ä¸ªOptionalå¯¹è±¡ã€‚æ— è®ºä¼ å…¥çš„å‚æ•°æ˜¯å¦ä¸ºnulléƒ½ä¸ä¼šå‡ºç°é—®é¢˜ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Author</span> <span class=n>author</span> <span class=o>=</span> <span class=n>getAuthor</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authorOptional</span> <span class=o>=</span> <span class=n>Optional</span><span class=o>.</span><span class=na>ofNullable</span><span class=o>(</span><span class=n>author</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><p>ä½ å¯èƒ½ä¼šè§‰å¾—è¿˜è¦åŠ ä¸€è¡Œä»£ç æ¥å°è£…æ•°æ®æ¯”è¾ƒéº»çƒ¦ã€‚ä½†æ˜¯å¦‚æœæ”¹é€ ä¸‹getAuthoræ–¹æ³•ï¼Œè®©å…¶çš„è¿”å›å€¼å°±æ˜¯å°è£…å¥½çš„Optionalçš„è¯ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨æ—¶å°±ä¼šæ–¹ä¾¿å¾ˆå¤šã€‚</p><p>è€Œä¸”åœ¨å®é™…å¼€å‘ä¸­æˆ‘ä»¬çš„æ•°æ®å¾ˆå¤šæ˜¯ä»æ•°æ®åº“è·å–çš„ã€‚Mybatisä»3.5ç‰ˆæœ¬å¯ä»¥ä¹Ÿå·²ç»æ”¯æŒOptionaläº†ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠdaoæ–¹æ³•çš„è¿”å›å€¼ç±»å‹å®šä¹‰æˆOptionalç±»å‹ï¼ŒMyBastisä¼šè‡ªå·±æŠŠæ•°æ®å°è£…æˆOptionalå¯¹è±¡è¿”å›ã€‚å°è£…çš„è¿‡ç¨‹ä¹Ÿä¸éœ€è¦æˆ‘ä»¬è‡ªå·±æ“ä½œã€‚</p><p>å¦‚æœä½ <strong>ç¡®å®šä¸€ä¸ªå¯¹è±¡ä¸æ˜¯ç©º</strong>çš„åˆ™å¯ä»¥ä½¿ç”¨<strong>Optional</strong>çš„<strong>é™æ€æ–¹æ³•of</strong>æ¥æŠŠæ•°æ®å°è£…æˆOptionalå¯¹è±¡ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Author</span> <span class=n>author</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Author</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authorOptional</span> <span class=o>=</span> <span class=n>Optional</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>author</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><p>ä½†æ˜¯ä¸€å®šè¦æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨ofçš„æ—¶å€™ä¼ å…¥çš„å‚æ•°å¿…é¡»ä¸ä¸ºnullã€‚ï¼ˆå°è¯•ä¸‹ä¼ å…¥nullä¼šå‡ºç°ä»€ä¹ˆç»“æœï¼‰</p><p>å¦‚æœä¸€ä¸ªæ–¹æ³•çš„è¿”å›å€¼ç±»å‹æ˜¯Optionalç±»å‹ã€‚è€Œå¦‚æœæˆ‘ä»¬ç»åˆ¤æ–­å‘ç°æŸæ¬¡è®¡ç®—å¾—åˆ°çš„è¿”å›å€¼ä¸ºnullï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦æŠŠnullå°è£…æˆOptionalå¯¹è±¡è¿”å›ã€‚è¿™æ—¶åˆ™å¯ä»¥ä½¿ç”¨<strong>Optional</strong>çš„<strong>é™æ€æ–¹æ³•empty</strong>æ¥è¿›è¡Œå°è£…ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Optional</span><span class=o>.</span><span class=na>empty</span><span class=o>()</span>
</span></span></code></pre></td></tr></table></div></div><p>æ‰€ä»¥æœ€åä½ è§‰å¾—å“ªç§æ–¹å¼ä¼šæ›´æ–¹ä¾¿å‘¢ï¼Ÿ<strong>ofNullable</strong></p><h4 id=å®‰å…¨æ¶ˆè´¹å€¼>å®‰å…¨æ¶ˆè´¹å€¼</h4><p>æˆ‘ä»¬è·å–åˆ°ä¸€ä¸ªOptionalå¯¹è±¡åè‚¯å®šéœ€è¦å¯¹å…¶ä¸­çš„æ•°æ®è¿›è¡Œä½¿ç”¨ã€‚è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å…¶<strong>ifPresent</strong>æ–¹æ³•å¯¹æ¥æ¶ˆè´¹å…¶ä¸­çš„å€¼ã€‚</p><p>è¿™ä¸ªæ–¹æ³•ä¼šåˆ¤æ–­å…¶å†…å°è£…çš„æ•°æ®æ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºç©ºæ—¶æ‰ä¼šæ‰§è¡Œå…·ä½“çš„æ¶ˆè´¹ä»£ç ã€‚è¿™æ ·ä½¿ç”¨èµ·æ¥å°±æ›´åŠ å®‰å…¨äº†ã€‚</p><p>ä¾‹å¦‚,ä»¥ä¸‹å†™æ³•å°±ä¼˜é›…çš„é¿å…äº†ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authorOptional</span> <span class=o>=</span> <span class=n>Optional</span><span class=o>.</span><span class=na>ofNullable</span><span class=o>(</span><span class=n>getAuthor</span><span class=o>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>authorOptional</span><span class=o>.</span><span class=na>ifPresent</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>()));</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=è·å–å€¼>è·å–å€¼</h4><p>å¦‚æœæˆ‘ä»¬æƒ³è·å–å€¼è‡ªå·±è¿›è¡Œå¤„ç†å¯ä»¥ä½¿ç”¨getæ–¹æ³•è·å–ï¼Œä½†æ˜¯ä¸æ¨èã€‚å› ä¸ºå½“Optionalå†…éƒ¨çš„æ•°æ®ä¸ºç©ºçš„æ—¶å€™ä¼šå‡ºç°å¼‚å¸¸ã€‚</p><h4 id=å®‰å…¨è·å–å€¼>å®‰å…¨è·å–å€¼</h4><p>å¦‚æœæˆ‘ä»¬æœŸæœ›å®‰å…¨çš„è·å–å€¼ã€‚æˆ‘ä»¬ä¸æ¨èä½¿ç”¨getæ–¹æ³•ï¼Œè€Œæ˜¯ä½¿ç”¨Optionalæä¾›çš„ä»¥ä¸‹æ–¹æ³•ã€‚</p><ul><li><p>orElseGet</p><p>è·å–æ•°æ®å¹¶ä¸”è®¾ç½®æ•°æ®ä¸ºç©ºæ—¶çš„é»˜è®¤å€¼ã€‚å¦‚æœæ•°æ®ä¸ä¸ºç©ºå°±èƒ½è·å–åˆ°è¯¥æ•°æ®ã€‚å¦‚æœä¸ºç©ºåˆ™æ ¹æ®ä½ ä¼ å…¥çš„å‚æ•°æ¥åˆ›å»ºå¯¹è±¡ä½œä¸ºé»˜è®¤å€¼è¿”å›ã€‚</p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl>  <span class=n>Optional</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authorOptional</span> <span class=o>=</span> <span class=n>Optional</span><span class=o>.</span><span class=na>ofNullable</span><span class=o>(</span><span class=n>getAuthor</span><span class=o>());</span>
</span></span><span class=line><span class=cl>  <span class=n>Author</span> <span class=n>author1</span> <span class=o>=</span> <span class=n>authorOptional</span><span class=o>.</span><span class=na>orElseGet</span><span class=o>(()</span> <span class=o>-&gt;</span> <span class=k>new</span> <span class=n>Author</span><span class=o>());</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><p>orElseThrow</p><p>è·å–æ•°æ®ï¼Œå¦‚æœæ•°æ®ä¸ä¸ºç©ºå°±èƒ½è·å–åˆ°è¯¥æ•°æ®ã€‚å¦‚æœä¸ºç©ºåˆ™æ ¹æ®ä½ ä¼ å…¥çš„å‚æ•°æ¥åˆ›å»ºå¼‚å¸¸æŠ›å‡ºã€‚</p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authorOptional</span> <span class=o>=</span> <span class=n>Optional</span><span class=o>.</span><span class=na>ofNullable</span><span class=o>(</span><span class=n>getAuthor</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=k>try</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Author</span> <span class=n>author</span> <span class=o>=</span> <span class=n>authorOptional</span><span class=o>.</span><span class=na>orElseThrow</span><span class=o>((</span><span class=n>Supplier</span><span class=o>&lt;</span><span class=n>Throwable</span><span class=o>&gt;)</span> <span class=o>()</span> <span class=o>-&gt;</span> <span class=k>new</span> <span class=n>RuntimeException</span><span class=o>(</span><span class=s>&#34;authorä¸ºç©º&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>Throwable</span> <span class=n>throwable</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>throwable</span><span class=o>.</span><span class=na>printStackTrace</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=è¿‡æ»¤>è¿‡æ»¤</h4><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨filteræ–¹æ³•å¯¹æ•°æ®è¿›è¡Œè¿‡æ»¤ã€‚å¦‚æœåŸæœ¬æ˜¯æœ‰æ•°æ®çš„ï¼Œä½†æ˜¯ä¸ç¬¦åˆåˆ¤æ–­ï¼Œä¹Ÿä¼šå˜æˆä¸€ä¸ªæ— æ•°æ®çš„Optionalå¯¹è±¡ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authorOptional</span> <span class=o>=</span> <span class=n>Optional</span><span class=o>.</span><span class=na>ofNullable</span><span class=o>(</span><span class=n>getAuthor</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=n>authorOptional</span><span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>()&gt;</span><span class=mi>100</span><span class=o>).</span><span class=na>ifPresent</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>()));</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=åˆ¤æ–­>åˆ¤æ–­</h4><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨isPresentæ–¹æ³•è¿›è¡Œæ˜¯å¦å­˜åœ¨æ•°æ®çš„åˆ¤æ–­ã€‚å¦‚æœä¸ºç©ºè¿”å›å€¼ä¸ºfalse,å¦‚æœä¸ä¸ºç©ºï¼Œè¿”å›å€¼ä¸ºtrueã€‚ä½†æ˜¯è¿™ç§æ–¹å¼å¹¶ä¸èƒ½ä½“ç°Optionalçš„å¥½å¤„ï¼Œ<strong>æ›´æ¨èä½¿ç”¨ifPresentæ–¹æ³•</strong>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authorOptional</span> <span class=o>=</span> <span class=n>Optional</span><span class=o>.</span><span class=na>ofNullable</span><span class=o>(</span><span class=n>getAuthor</span><span class=o>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>(</span><span class=n>authorOptional</span><span class=o>.</span><span class=na>isPresent</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>authorOptional</span><span class=o>.</span><span class=na>get</span><span class=o>().</span><span class=na>getName</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ•°æ®è½¬æ¢>æ•°æ®è½¬æ¢</h4><p>Optionalè¿˜æä¾›äº†mapå¯ä»¥è®©æˆ‘ä»¬çš„å¯¹æ•°æ®è¿›è¡Œè½¬æ¢ï¼Œå¹¶ä¸”è½¬æ¢å¾—åˆ°çš„æ•°æ®ä¹Ÿè¿˜æ˜¯è¢«OptionalåŒ…è£…å¥½çš„ï¼Œä¿è¯äº†æˆ‘ä»¬çš„ä½¿ç”¨å®‰å…¨ã€‚</p><p>ä¾‹å¦‚æˆ‘ä»¬æƒ³è·å–ä½œå®¶çš„ä¹¦ç±é›†åˆã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>private</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>testMap</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Optional</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authorOptional</span> <span class=o>=</span> <span class=n>getAuthorOptional</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>Optional</span><span class=o>&lt;</span><span class=n>List</span><span class=o>&lt;</span><span class=n>Book</span><span class=o>&gt;&gt;</span> <span class=n>optionalBooks</span> <span class=o>=</span> <span class=n>authorOptional</span><span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getBooks</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=n>optionalBooks</span><span class=o>.</span><span class=na>ifPresent</span><span class=o>(</span><span class=n>books</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>books</span><span class=o>));</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=å‡½æ•°å¼æ¥å£>å‡½æ•°å¼æ¥å£</h2><h3 id=æ¦‚è¿°-2>æ¦‚è¿°</h3><p><strong>åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•</strong>çš„æ¥å£æˆ‘ä»¬ç§°ä¹‹ä¸ºå‡½æ•°æ¥å£ã€‚</p><p>JDKçš„å‡½æ•°å¼æ¥å£éƒ½åŠ ä¸Šäº†**@FunctionalInterface** æ³¨è§£è¿›è¡Œæ ‡è¯†ã€‚ä½†æ˜¯æ— è®ºæ˜¯å¦åŠ ä¸Šè¯¥æ³¨è§£åªè¦æ¥å£ä¸­åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œéƒ½æ˜¯å‡½æ•°å¼æ¥å£ã€‚</p><h3 id=å¸¸è§å‡½æ•°å¼æ¥å£>å¸¸è§å‡½æ•°å¼æ¥å£</h3><ul><li><p>Consumer æ¶ˆè´¹æ¥å£</p><p>æ ¹æ®å…¶ä¸­æŠ½è±¡æ–¹æ³•çš„å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹çŸ¥é“ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ–¹æ³•ä¸­å¯¹ä¼ å…¥çš„å‚æ•°è¿›è¡Œæ¶ˆè´¹ã€‚</p><p><img src=/p/i-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-stream%E6%B5%81/image-20211028145622163-16354041894551.png width=698 height=316 srcset="/p/i-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-stream%E6%B5%81/image-20211028145622163-16354041894551_hu742ae4e794ff770f511673bf2dadf21e_19464_480x0_resize_box_3.png 480w, /p/i-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-stream%E6%B5%81/image-20211028145622163-16354041894551_hu742ae4e794ff770f511673bf2dadf21e_19464_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=220 data-flex-basis=530px></p></li><li><p>Function è®¡ç®—è½¬æ¢æ¥å£</p><p>æ ¹æ®å…¶ä¸­æŠ½è±¡æ–¹æ³•çš„å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹çŸ¥é“ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ–¹æ³•ä¸­å¯¹ä¼ å…¥çš„å‚æ•°è®¡ç®—æˆ–è½¬æ¢ï¼ŒæŠŠç»“æœè¿”å›</p><p><img src=/p/i-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-stream%E6%B5%81/image-20211028145707862-16354042291112.png width=676 height=332 srcset="/p/i-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-stream%E6%B5%81/image-20211028145707862-16354042291112_hu808df3852955e07a29697966674921f5_21210_480x0_resize_box_3.png 480w, /p/i-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-stream%E6%B5%81/image-20211028145707862-16354042291112_hu808df3852955e07a29697966674921f5_21210_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=203 data-flex-basis=488px></p></li><li><p>Predicate åˆ¤æ–­æ¥å£</p><p>æ ¹æ®å…¶ä¸­æŠ½è±¡æ–¹æ³•çš„å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹çŸ¥é“ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ–¹æ³•ä¸­å¯¹ä¼ å…¥çš„å‚æ•°æ¡ä»¶åˆ¤æ–­ï¼Œè¿”å›åˆ¤æ–­ç»“æœ</p><p><img src=/p/i-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-stream%E6%B5%81/image-20211028145818743-16354043004393.png width=910 height=392 srcset="/p/i-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-stream%E6%B5%81/image-20211028145818743-16354043004393_hu4d08138e5ed9c2d8ebd48ea50c50ba23_29527_480x0_resize_box_3.png 480w, /p/i-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-stream%E6%B5%81/image-20211028145818743-16354043004393_hu4d08138e5ed9c2d8ebd48ea50c50ba23_29527_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=232 data-flex-basis=557px></p></li><li><p>Supplier ç”Ÿäº§å‹æ¥å£</p><p>æ ¹æ®å…¶ä¸­æŠ½è±¡æ–¹æ³•çš„å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹çŸ¥é“ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ–¹æ³•ä¸­åˆ›å»ºå¯¹è±¡ï¼ŒæŠŠåˆ›å»ºå¥½çš„å¯¹è±¡è¿”å›</p></li></ul><p><img src=/p/i-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-stream%E6%B5%81/image-20211028145843368-16354043246954.png width=539 height=370 srcset="/p/i-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-stream%E6%B5%81/image-20211028145843368-16354043246954_huee90427326c3452915697bcf7520f92a_15901_480x0_resize_box_3.png 480w, /p/i-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-stream%E6%B5%81/image-20211028145843368-16354043246954_huee90427326c3452915697bcf7520f92a_15901_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=145 data-flex-basis=349px></p><h3 id=å¸¸ç”¨çš„é»˜è®¤æ–¹æ³•>å¸¸ç”¨çš„é»˜è®¤æ–¹æ³•</h3><ul><li><p>and</p><p>æˆ‘ä»¬åœ¨ä½¿ç”¨Predicateæ¥å£æ—¶å€™å¯èƒ½éœ€è¦è¿›è¡Œåˆ¤æ–­æ¡ä»¶çš„æ‹¼æ¥ã€‚è€Œandæ–¹æ³•ç›¸å½“äºæ˜¯ä½¿ç”¨&&æ¥æ‹¼æ¥ä¸¤ä¸ªåˆ¤æ–­æ¡ä»¶</p><p>ä¾‹å¦‚ï¼š</p><p>æ‰“å°ä½œå®¶ä¸­å¹´é¾„å¤§äº17å¹¶ä¸”å§“åçš„é•¿åº¦å¤§äº1çš„ä½œå®¶ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java></code></pre></td></tr></table></div></div></li></ul><p>List authors = getAuthors();
Stream authorStream = authors.stream();
authorStream.filter(new Predicate() {
@Override
public boolean test(Author author) {
return author.getAge()>17;
}
}.and(new Predicate() {
@Override
public boolean test(Author author) {
return author.getName().length()>1;
}
})).forEach(author -> System.out.println(author));</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>
</span></span><span class=line><span class=cl>- or
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>æˆ‘ä»¬åœ¨ä½¿ç”¨Predicateæ¥å£æ—¶å€™å¯èƒ½éœ€è¦è¿›è¡Œåˆ¤æ–­æ¡ä»¶çš„æ‹¼æ¥ã€‚è€Œoræ–¹æ³•ç›¸å½“äºæ˜¯ä½¿ç”¨||æ¥æ‹¼æ¥ä¸¤ä¸ªåˆ¤æ–­æ¡ä»¶ã€‚
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ä¾‹å¦‚ï¼š
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>æ‰“å°ä½œå®¶ä¸­å¹´é¾„å¤§äº17æˆ–è€…å§“åçš„é•¿åº¦å°äº2çš„ä½œå®¶ã€‚
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>```java
</span></span><span class=line><span class=cl>//        æ‰“å°ä½œå®¶ä¸­å¹´é¾„å¤§äº17æˆ–è€…å§“åçš„é•¿åº¦å°äº2çš„ä½œå®¶ã€‚
</span></span><span class=line><span class=cl>List&lt;Author&gt; authors = getAuthors();
</span></span><span class=line><span class=cl>authors.stream()
</span></span><span class=line><span class=cl>      .filter(new Predicate&lt;Author&gt;() {
</span></span><span class=line><span class=cl>          @Override
</span></span><span class=line><span class=cl>          public boolean test(Author author) {
</span></span><span class=line><span class=cl>              return author.getAge()&gt;17;
</span></span><span class=line><span class=cl>          }
</span></span><span class=line><span class=cl>      }.or(new Predicate&lt;Author&gt;() {
</span></span><span class=line><span class=cl>          @Override
</span></span><span class=line><span class=cl>          public boolean test(Author author) {
</span></span><span class=line><span class=cl>              return author.getName().length()&lt;2;
</span></span><span class=line><span class=cl>          }
</span></span><span class=line><span class=cl>      })).forEach(author -&gt; System.out.println(author.getName()));
</span></span></code></pre></td></tr></table></div></div><ul><li><p>negate</p><p>Predicateæ¥å£ä¸­çš„æ–¹æ³•ã€‚negateæ–¹æ³•ç›¸å½“äºæ˜¯åœ¨åˆ¤æ–­æ·»åŠ å‰é¢åŠ äº†ä¸ª! è¡¨ç¤ºå–å</p><p>ä¾‹å¦‚ï¼š</p><p>æ‰“å°ä½œå®¶ä¸­å¹´é¾„ä¸å¤§äº17çš„ä½œå®¶ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//        æ‰“å°ä½œå®¶ä¸­å¹´é¾„ä¸å¤§äº17çš„ä½œå®¶ã€‚
</span></span></span></code></pre></td></tr></table></div></div></li></ul><p>List authors = getAuthors();
authors.stream()
.filter(new Predicate() {
@Override
public boolean test(Author author) {
return author.getAge()>17;
}
}.negate()).forEach(author -> System.out.println(author.getAge()));</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>##  æ–¹æ³•å¼•ç”¨
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>æˆ‘ä»¬åœ¨ä½¿ç”¨lambdaæ—¶ï¼Œå¦‚æœæ–¹æ³•ä½“ä¸­åªæœ‰ä¸€ä¸ªæ–¹æ³•çš„è°ƒç”¨çš„è¯ï¼ˆåŒ…æ‹¬æ„é€ æ–¹æ³•ï¼‰,æˆ‘ä»¬å¯ä»¥ç”¨æ–¹æ³•å¼•ç”¨è¿›ä¸€æ­¥ç®€åŒ–ä»£ç ã€‚
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>### æ¨èç”¨æ³•
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>æˆ‘ä»¬åœ¨ä½¿ç”¨lambdaæ—¶ä¸éœ€è¦è€ƒè™‘ä»€ä¹ˆæ—¶å€™ç”¨æ–¹æ³•å¼•ç”¨ï¼Œç”¨å“ªç§æ–¹æ³•å¼•ç”¨ï¼Œæ–¹æ³•å¼•ç”¨çš„æ ¼å¼æ˜¯ä»€ä¹ˆã€‚æˆ‘ä»¬åªéœ€è¦åœ¨å†™å®Œlambdaæ–¹æ³•å‘ç°æ–¹æ³•ä½“åªæœ‰ä¸€è¡Œä»£ç ï¼Œå¹¶ä¸”æ˜¯æ–¹æ³•çš„è°ƒç”¨æ—¶ä½¿ç”¨å¿«æ·é”®å°è¯•æ˜¯å¦èƒ½å¤Ÿè½¬æ¢æˆæ–¹æ³•å¼•ç”¨å³å¯ã€‚
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>å½“æˆ‘ä»¬æ–¹æ³•å¼•ç”¨ä½¿ç”¨çš„å¤šäº†æ…¢æ…¢çš„ä¹Ÿå¯ä»¥ç›´æ¥å†™å‡ºæ–¹æ³•å¼•ç”¨ã€‚
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>### åŸºæœ¬æ ¼å¼
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ç±»åæˆ–è€…å¯¹è±¡å::æ–¹æ³•å
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>### è¯­æ³•è¯¦è§£(äº†è§£)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>#### å¼•ç”¨ç±»çš„é™æ€æ–¹æ³•
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>å…¶å®å°±æ˜¯å¼•ç”¨ç±»çš„é™æ€æ–¹æ³•
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>##### æ ¼å¼
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>```java
</span></span><span class=line><span class=cl>ç±»å::æ–¹æ³•å
</span></span></code></pre></td></tr></table></div></div><h5 id=ä½¿ç”¨å‰æ>ä½¿ç”¨å‰æ</h5><p>å¦‚æœæˆ‘ä»¬åœ¨é‡å†™æ–¹æ³•çš„æ—¶å€™ï¼Œæ–¹æ³•ä½“ä¸­<strong>åªæœ‰ä¸€è¡Œä»£ç </strong>ï¼Œå¹¶ä¸”è¿™è¡Œä»£ç æ˜¯<strong>è°ƒç”¨äº†æŸä¸ªç±»çš„é™æ€æ–¹æ³•</strong>ï¼Œå¹¶ä¸”æˆ‘ä»¬æŠŠè¦é‡å†™çš„<strong>æŠ½è±¡æ–¹æ³•ä¸­æ‰€æœ‰çš„å‚æ•°éƒ½æŒ‰ç…§é¡ºåºä¼ å…¥äº†è¿™ä¸ªé™æ€æ–¹æ³•ä¸­</strong>ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥å¼•ç”¨ç±»çš„é™æ€æ–¹æ³•ã€‚</p><p>ä¾‹å¦‚ï¼š</p><p>å¦‚ä¸‹ä»£ç å°±å¯ä»¥ç”¨æ–¹æ³•å¼•ç”¨è¿›è¡Œç®€åŒ–</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authorStream</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>authorStream</span><span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>age</span><span class=o>-&gt;</span><span class=n>String</span><span class=o>.</span><span class=na>valueOf</span><span class=o>(</span><span class=n>age</span><span class=o>));</span>
</span></span></code></pre></td></tr></table></div></div><p>æ³¨æ„ï¼Œå¦‚æœæˆ‘ä»¬æ‰€é‡å†™çš„æ–¹æ³•æ˜¯æ²¡æœ‰å‚æ•°çš„ï¼Œè°ƒç”¨çš„æ–¹æ³•ä¹Ÿæ˜¯æ²¡æœ‰å‚æ•°çš„ä¹Ÿç›¸å½“äºç¬¦åˆä»¥ä¸Šè§„åˆ™ã€‚</p><p>ä¼˜åŒ–åå¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authorStream</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>authorStream</span><span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>String</span><span class=o>::</span><span class=n>valueOf</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=å¼•ç”¨å¯¹è±¡çš„å®ä¾‹æ–¹æ³•>å¼•ç”¨å¯¹è±¡çš„å®ä¾‹æ–¹æ³•</h4><h5 id=æ ¼å¼>æ ¼å¼</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nl>å¯¹è±¡å:</span><span class=o>:</span><span class=n>æ–¹æ³•å</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=ä½¿ç”¨å‰æ-1>ä½¿ç”¨å‰æ</h5><p>å¦‚æœæˆ‘ä»¬åœ¨é‡å†™æ–¹æ³•çš„æ—¶å€™ï¼Œæ–¹æ³•ä½“ä¸­<strong>åªæœ‰ä¸€è¡Œä»£ç </strong>ï¼Œå¹¶ä¸”è¿™è¡Œä»£ç æ˜¯<strong>è°ƒç”¨äº†æŸä¸ªå¯¹è±¡çš„æˆå‘˜æ–¹æ³•</strong>ï¼Œå¹¶ä¸”æˆ‘ä»¬æŠŠè¦é‡å†™çš„<strong>æŠ½è±¡æ–¹æ³•ä¸­æ‰€æœ‰çš„å‚æ•°éƒ½æŒ‰ç…§é¡ºåºä¼ å…¥äº†è¿™ä¸ªæˆå‘˜æ–¹æ³•ä¸­</strong>ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥å¼•ç”¨å¯¹è±¡çš„å®ä¾‹æ–¹æ³•</p><p>ä¾‹å¦‚ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authorStream</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>StringBuilder</span> <span class=n>sb</span> <span class=o>=</span> <span class=k>new</span> <span class=n>StringBuilder</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>authorStream</span><span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>name</span><span class=o>-&gt;</span><span class=n>sb</span><span class=o>.</span><span class=na>append</span><span class=o>(</span><span class=n>name</span><span class=o>));</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¼˜åŒ–åï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authorStream</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>StringBuilder</span> <span class=n>sb</span> <span class=o>=</span> <span class=k>new</span> <span class=n>StringBuilder</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>authorStream</span><span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>sb</span><span class=o>::</span><span class=n>append</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=å¼•ç”¨ç±»çš„å®ä¾‹æ–¹æ³•>å¼•ç”¨ç±»çš„å®ä¾‹æ–¹æ³•</h4><h5 id=æ ¼å¼-1>æ ¼å¼</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nl>ç±»å:</span><span class=o>:</span><span class=n>æ–¹æ³•å</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=ä½¿ç”¨å‰æ-2>ä½¿ç”¨å‰æ</h5><p>å¦‚æœæˆ‘ä»¬åœ¨é‡å†™æ–¹æ³•çš„æ—¶å€™ï¼Œæ–¹æ³•ä½“ä¸­<strong>åªæœ‰ä¸€è¡Œä»£ç </strong>ï¼Œå¹¶ä¸”è¿™è¡Œä»£ç æ˜¯<strong>è°ƒç”¨äº†ç¬¬ä¸€ä¸ªå‚æ•°çš„æˆå‘˜æ–¹æ³•</strong>ï¼Œå¹¶ä¸”æˆ‘ä»¬æŠŠè¦<strong>é‡å†™çš„æŠ½è±¡æ–¹æ³•ä¸­å‰©ä½™çš„æ‰€æœ‰çš„å‚æ•°éƒ½æŒ‰ç…§é¡ºåºä¼ å…¥äº†è¿™ä¸ªæˆå‘˜æ–¹æ³•ä¸­</strong>ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥å¼•ç”¨ç±»çš„å®ä¾‹æ–¹æ³•ã€‚</p><p>ä¾‹å¦‚ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>interface</span> <span class=nc>UseString</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>String</span> <span class=nf>use</span><span class=o>(</span><span class=n>String</span> <span class=n>str</span><span class=o>,</span><span class=kt>int</span> <span class=n>start</span><span class=o>,</span><span class=kt>int</span> <span class=n>length</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=n>String</span> <span class=nf>subAuthorName</span><span class=o>(</span><span class=n>String</span> <span class=n>str</span><span class=o>,</span> <span class=n>UseString</span> <span class=n>useString</span><span class=o>){</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>start</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>length</span> <span class=o>=</span> <span class=mi>1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>useString</span><span class=o>.</span><span class=na>use</span><span class=o>(</span><span class=n>str</span><span class=o>,</span><span class=n>start</span><span class=o>,</span><span class=n>length</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>subAuthorName</span><span class=o>(</span><span class=s>&#34;ä¸‰æ›´è‰å ‚&#34;</span><span class=o>,</span> <span class=k>new</span> <span class=n>UseString</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>        <span class=kd>public</span> <span class=n>String</span> <span class=nf>use</span><span class=o>(</span><span class=n>String</span> <span class=n>str</span><span class=o>,</span> <span class=kt>int</span> <span class=n>start</span><span class=o>,</span> <span class=kt>int</span> <span class=n>length</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>str</span><span class=o>.</span><span class=na>substring</span><span class=o>(</span><span class=n>start</span><span class=o>,</span><span class=n>length</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¼˜åŒ–åå¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>subAuthorName</span><span class=o>(</span><span class=s>&#34;ä¸‰æ›´è‰å ‚&#34;</span><span class=o>,</span> <span class=n>String</span><span class=o>::</span><span class=n>substring</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ„é€ å™¨å¼•ç”¨>æ„é€ å™¨å¼•ç”¨</h4><p>å¦‚æœæ–¹æ³•ä½“ä¸­çš„ä¸€è¡Œä»£ç æ˜¯æ„é€ å™¨çš„è¯å°±å¯ä»¥ä½¿ç”¨æ„é€ å™¨å¼•ç”¨ã€‚</p><h5 id=æ ¼å¼-2>æ ¼å¼</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nl>ç±»å:</span><span class=o>:</span><span class=k>new</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=ä½¿ç”¨å‰æ-3>ä½¿ç”¨å‰æ</h5><p>å¦‚æœæˆ‘ä»¬åœ¨é‡å†™æ–¹æ³•çš„æ—¶å€™ï¼Œæ–¹æ³•ä½“ä¸­<strong>åªæœ‰ä¸€è¡Œä»£ç </strong>ï¼Œå¹¶ä¸”è¿™è¡Œä»£ç æ˜¯<strong>è°ƒç”¨äº†æŸä¸ªç±»çš„æ„é€ æ–¹æ³•</strong>ï¼Œå¹¶ä¸”æˆ‘ä»¬æŠŠ<strong>è¦é‡å†™çš„æŠ½è±¡æ–¹æ³•ä¸­çš„æ‰€æœ‰çš„å‚æ•°éƒ½æŒ‰ç…§é¡ºåºä¼ å…¥äº†è¿™ä¸ªæ„é€ æ–¹æ³•ä¸­</strong>ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥å¼•ç”¨æ„é€ å™¨ã€‚</p><p>ä¾‹å¦‚ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>name</span><span class=o>-&gt;</span><span class=k>new</span> <span class=n>StringBuilder</span><span class=o>(</span><span class=n>name</span><span class=o>))</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>sb</span><span class=o>-&gt;</span><span class=n>sb</span><span class=o>.</span><span class=na>append</span><span class=o>(</span><span class=s>&#34;-ä¸‰æ›´&#34;</span><span class=o>).</span><span class=na>toString</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>str</span><span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>str</span><span class=o>));</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¼˜åŒ–åï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>StringBuilder</span><span class=o>::</span><span class=k>new</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>sb</span><span class=o>-&gt;</span><span class=n>sb</span><span class=o>.</span><span class=na>append</span><span class=o>(</span><span class=s>&#34;-ä¸‰æ›´&#34;</span><span class=o>).</span><span class=na>toString</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>str</span><span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>str</span><span class=o>));</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=é«˜çº§ç”¨æ³•>é«˜çº§ç”¨æ³•</h2><h3 id=åŸºæœ¬æ•°æ®ç±»å‹ä¼˜åŒ–>åŸºæœ¬æ•°æ®ç±»å‹ä¼˜åŒ–</h3><p>æˆ‘ä»¬ä¹‹å‰ç”¨åˆ°çš„å¾ˆå¤šStreamçš„æ–¹æ³•ç”±äºéƒ½ä½¿ç”¨äº†æ³›å‹ã€‚æ‰€ä»¥æ¶‰åŠåˆ°çš„å‚æ•°å’Œè¿”å›å€¼éƒ½æ˜¯å¼•ç”¨æ•°æ®ç±»å‹ã€‚</p><p>å³ä½¿æˆ‘ä»¬æ“ä½œçš„æ˜¯æ•´æ•°å°æ•°ï¼Œä½†æ˜¯å®é™…ç”¨çš„éƒ½æ˜¯ä»–ä»¬çš„åŒ…è£…ç±»ã€‚JDK5ä¸­å¼•å…¥çš„è‡ªåŠ¨è£…ç®±å’Œè‡ªåŠ¨æ‹†ç®±è®©æˆ‘ä»¬åœ¨ä½¿ç”¨å¯¹åº”çš„åŒ…è£…ç±»æ—¶å°±å¥½åƒä½¿ç”¨åŸºæœ¬æ•°æ®ç±»å‹ä¸€æ ·æ–¹ä¾¿ã€‚ä½†æ˜¯ä½ ä¸€å®šè¦çŸ¥é“è£…ç®±å’Œæ‹†ç®±è‚¯å®šæ˜¯è¦æ¶ˆè€—æ—¶é—´çš„ã€‚è™½ç„¶è¿™ä¸ªæ—¶é—´æ¶ˆè€—å¾ˆä¸‹ã€‚ä½†æ˜¯åœ¨å¤§é‡çš„æ•°æ®ä¸æ–­çš„é‡å¤è£…ç®±æ‹†ç®±çš„æ—¶å€™ï¼Œä½ å°±ä¸èƒ½æ— è§†è¿™ä¸ªæ—¶é—´æŸè€—äº†ã€‚</p><p>æ‰€ä»¥ä¸ºäº†è®©æˆ‘ä»¬èƒ½å¤Ÿå¯¹è¿™éƒ¨åˆ†çš„æ—¶é—´æ¶ˆè€—è¿›è¡Œä¼˜åŒ–ã€‚Streamè¿˜æä¾›äº†å¾ˆå¤šä¸“é—¨é’ˆå¯¹åŸºæœ¬æ•°æ®ç±»å‹çš„æ–¹æ³•ã€‚</p><p>ä¾‹å¦‚ï¼šmapToInt,mapToLong,mapToDouble,flatMapToInt,flatMapToDoubleç­‰ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>private</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>test27</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>())</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>age</span> <span class=o>-&gt;</span> <span class=n>age</span> <span class=o>+</span> <span class=mi>10</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=n>age</span><span class=o>-&gt;</span><span class=n>age</span><span class=o>&gt;</span><span class=mi>18</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>age</span><span class=o>-&gt;</span><span class=n>age</span><span class=o>+</span><span class=mi>2</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>::</span><span class=n>println</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>mapToInt</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>())</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>age</span> <span class=o>-&gt;</span> <span class=n>age</span> <span class=o>+</span> <span class=mi>10</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=n>age</span><span class=o>-&gt;</span><span class=n>age</span><span class=o>&gt;</span><span class=mi>18</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>age</span><span class=o>-&gt;</span><span class=n>age</span><span class=o>+</span><span class=mi>2</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>::</span><span class=n>println</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=å¹¶è¡Œæµ>å¹¶è¡Œæµ</h3><p>å½“æµä¸­æœ‰å¤§é‡å…ƒç´ æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¹¶è¡Œæµå»æé«˜æ“ä½œçš„æ•ˆç‡ã€‚å…¶å®å¹¶è¡Œæµå°±æ˜¯æŠŠä»»åŠ¡åˆ†é…ç»™å¤šä¸ªçº¿ç¨‹å»å®Œå…¨ã€‚å¦‚æœæˆ‘ä»¬è‡ªå·±å»ç”¨ä»£ç å®ç°çš„è¯å…¶å®ä¼šéå¸¸çš„å¤æ‚ï¼Œå¹¶ä¸”è¦æ±‚ä½ å¯¹å¹¶å‘ç¼–ç¨‹æœ‰è¶³å¤Ÿçš„ç†è§£å’Œè®¤è¯†ã€‚è€Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨Streamçš„è¯ï¼Œæˆ‘ä»¬åªéœ€è¦ä¿®æ”¹ä¸€ä¸ªæ–¹æ³•çš„è°ƒç”¨å°±å¯ä»¥ä½¿ç”¨å¹¶è¡Œæµæ¥å¸®æˆ‘ä»¬å®ç°ï¼Œä»è€Œæé«˜æ•ˆç‡ã€‚</p><p>parallelæ–¹æ³•å¯ä»¥æŠŠä¸²è¡Œæµè½¬æ¢æˆå¹¶è¡Œæµã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>private</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>test28</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Stream</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>stream</span> <span class=o>=</span> <span class=n>Stream</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=mi>1</span><span class=o>,</span> <span class=mi>2</span><span class=o>,</span> <span class=mi>3</span><span class=o>,</span> <span class=mi>4</span><span class=o>,</span> <span class=mi>5</span><span class=o>,</span> <span class=mi>6</span><span class=o>,</span> <span class=mi>7</span><span class=o>,</span> <span class=mi>8</span><span class=o>,</span> <span class=mi>9</span><span class=o>,</span> <span class=mi>10</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>Integer</span> <span class=n>sum</span> <span class=o>=</span> <span class=n>stream</span><span class=o>.</span><span class=na>parallel</span><span class=o>()</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>peek</span><span class=o>(</span><span class=k>new</span> <span class=n>Consumer</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>                <span class=kd>public</span> <span class=kt>void</span> <span class=nf>accept</span><span class=o>(</span><span class=n>Integer</span> <span class=n>num</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>num</span><span class=o>+</span><span class=n>Thread</span><span class=o>.</span><span class=na>currentThread</span><span class=o>().</span><span class=na>getName</span><span class=o>());</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>})</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=n>num</span> <span class=o>-&gt;</span> <span class=n>num</span> <span class=o>&gt;</span> <span class=mi>5</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>reduce</span><span class=o>((</span><span class=n>result</span><span class=o>,</span> <span class=n>ele</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>result</span> <span class=o>+</span> <span class=n>ele</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>get</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>sum</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¹Ÿå¯ä»¥é€šè¿‡parallelStreamç›´æ¥è·å–å¹¶è¡Œæµå¯¹è±¡ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>authors</span><span class=o>.</span><span class=na>parallelStream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>age</span> <span class=o>-&gt;</span> <span class=n>age</span> <span class=o>+</span> <span class=mi>10</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=n>age</span><span class=o>-&gt;</span><span class=n>age</span><span class=o>&gt;</span><span class=mi>18</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>age</span><span class=o>-&gt;</span><span class=n>age</span><span class=o>+</span><span class=mi>2</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>::</span><span class=n>println</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=é“¾æ¥>é“¾æ¥</h2><p><a class=link href=https://objcoding.com/2019/03/04/lambda/ target=_blank rel=noopener>https://objcoding.com/2019/03/04/lambda/</a></p></section><footer class=article-footer><section class=article-tags><a href=/tags/java%E5%9F%BA%E7%A1%80/>javaåŸºç¡€</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css integrity="sha256-J+iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s=" crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js integrity="sha256-InsNdER1b2xUewP+pKCUJpkhiqwHgqiPXDlIk7GzBu4=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI=" crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.querySelector(`.article-content`),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script></article><footer class=site-footer><section class=copyright>&copy;
2023 importzhhçš„å°ç ´ç«™</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.16.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>