<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="函数式编程思想 在函数式编程中，纯函数是指满足以下两个条件的函数： 相同的输入始终产生相同的输出：纯函数的输出仅由输入决定，不受任何外部状态的影"><title>I: 函数式编程-Stream流</title><link rel=canonical href=https://blog.importzhh.me/p/i-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-stream%E6%B5%81/><link rel=stylesheet href=/scss/style.min.0d8902b26558cddb5286ea49f2a7aadd5761ed898547e29e5ab572d8c0619ba6.css><meta property="og:title" content="I: 函数式编程-Stream流"><meta property="og:description" content="函数式编程思想 在函数式编程中，纯函数是指满足以下两个条件的函数： 相同的输入始终产生相同的输出：纯函数的输出仅由输入决定，不受任何外部状态的影"><meta property="og:url" content="https://blog.importzhh.me/p/i-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-stream%E6%B5%81/"><meta property="og:site_name" content="importzhh的小破站"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="java基础"><meta property="article:published_time" content="2023-08-09T23:01:50+08:00"><meta property="article:modified_time" content="2023-08-09T23:01:50+08:00"><meta name=twitter:title content="I: 函数式编程-Stream流"><meta name=twitter:description content="函数式编程思想 在函数式编程中，纯函数是指满足以下两个条件的函数： 相同的输入始终产生相同的输出：纯函数的输出仅由输入决定，不受任何外部状态的影"><link rel="shortcut icon" href=/favicon.ico></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_huce6e906a97de2553354850eae15a0392_8624_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>🍥</span></figure><div class=site-meta><h1 class=site-name><a href=/>importzhh的小破站</a></h1><h2 class=site-description>实事求是 思危思退思变</h2></div></header><ol class=social-menu><li><a href=https://github.com/importzhh target=_blank title=GitHub rel=me><svg width="800" height="800" viewBox="-1.65 0 259.3 259.3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid"><g><path fill="#9edcf2" d="M200.9 199.8c0 13.9-32.2 25.1-71.9 25.1-39.7.0-71.9-11.3-71.9-25.1.0-13.9 32.2-25.1 71.9-25.1C168.7 174.7 200.9 185.9 200.9 199.8zm0 0"/><g><defs><path id="SVGID_1_" d="M98.1 244.8c1.6 7.5 5.5 11.9 9.4 14.5h41.1c5-3.4 10.1-9.8 10.1-21.8v-31s.6-7.7 7.7-10.2c0 0 4.1-2.9-.3-4.5.0.0-19.5-1.6-19.5 14.4v23.6s.8 8.7-3.8 12.3v-29.2s.3-9.3 5.1-12.8c0 0 3.2-5.7-3.8-4.2.0.0-13.4 1.9-14 17.6l-.3 30h-3.2l-.3-30c-.6-15.6-14-17.6-14-17.6-7-1.6-3.8 4.2-3.8 4.2 4.8 3.5 5.1 12.8 5.1 12.8v29.5c-4.6-3.3-3.8-12.6-3.8-12.6v-23.6c0-16-19.5-14.4-19.5-14.4-4.5 1.6-.3 4.5-.3 4.5 7 2.6 7.7 10.2 7.7 10.2v21.7L98.1 244.8z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" overflow="visible"/></clipPath><path clip-path="url(#SVGID_2_)" fill="#7dbce7" d="M200.9 199.8c0 13.9-32.2 25.1-71.9 25.1-39.7.0-71.9-11.3-71.9-25.1.0-13.9 32.2-25.1 71.9-25.1C168.7 174.7 200.9 185.9 200.9 199.8zm0 0"/></g><path fill="#9edcf2" d="M46.9 125.9l-2.1 7.2s-.5 2.6 1.9 3.1c2.6-.1 2.4-2.5 2.2-3.2L46.9 125.9zm0 0"/><path fill="#010101" d="M255.8 95.6l.2-.9c-21.1-4.2-42.7-4.3-55.8-3.7 2.1-7.7 2.8-16.7 2.8-26.6.0-14.3-5.4-25.7-14-34.3 1.5-4.9 3.5-15.8-2-29.7.0.0-9.8-3.1-32.1 11.8-8.7-2.2-18-3.3-27.3-3.3-10.2.0-20.5 1.3-30.2 3.9C74.4-2.9 64.3.3 64.3.3c-6.6 16.5-2.5 28.8-1.3 31.8-7.8 8.4-12.5 19.1-12.5 32.2.0 9.9 1.1 18.8 3.9 26.5-13.2-.5-34-.3-54.4 3.8l.2.9c20.4-4.1 41.4-4.2 54.5-3.7.6 1.6 1.3 3.2 2 4.7-13 .4-35.1 2.1-56.3 8.1l.3.9c21.4-6 43.7-7.6 56.6-8 7.8 14.4 23 23.8 50.2 26.7-3.9 2.6-7.8 7-9.4 14.5-5.3 2.5-21.9 8.7-31.9-8.5.0.0-5.6-10.2-16.3-11 0 0-10.4-.2-.7 6.5.0.0 6.9 3.3 11.7 15.6.0.0 6.3 21 36.4 14.2V177s-.6 7.7-7.7 10.2c0 0-4.2 2.9.3 4.5.0.0 19.5 1.6 19.5-14.4v-23.6s-.8-9.4 3.8-12.6v38.8s-.3 9.3-5.1 12.8c0 0-3.2 5.7 3.8 4.2.0.0 13.4-1.9 14-17.6l.3-39.3h3.2l.3 39.3c.6 15.6 14 17.6 14 17.6 7 1.6 3.8-4.2 3.8-4.2-4.8-3.5-5.1-12.8-5.1-12.8v-38.5c4.6 3.6 3.8 12.3 3.8 12.3v23.6c0 16 19.5 14.4 19.5 14.4 4.5-1.6.3-4.5.3-4.5-7-2.6-7.7-10.2-7.7-10.2v-31c0-12.1-5.1-18.5-10.1-21.8 29-2.9 42.9-12.2 49.3-26.8 12.7.3 35.6 1.9 57.4 8.1l.3-.9c-21.7-6.1-44.4-7.7-57.3-8.1.6-1.5 1.1-3 1.6-4.6C212.9 91.4 234.6 91.4 255.8 95.6zm0 0"/><path fill="#f5ccb3" d="M174.6 63.7c6.2 5.7 9.9 12.5 9.9 19.8.0 34.4-25.6 35.3-57.2 35.3S70.1 114 70.1 83.5c0-7.3 3.6-14.1 9.8-19.7 10.3-9.4 27.7-4.4 47.4-4.4 19.7.0 37-5.1 47.3 4.3zm0 0"/><path fill="#fff" d="M108.3 85.3c0 9.5-5.3 17.1-11.9 17.1-6.6.0-11.9-7.7-11.9-17.1.0-9.5 5.3-17.1 11.9-17.1C103 68.1 108.3 75.8 108.3 85.3zm0 0"/><path fill="#af5c51" d="M104.5 85.5c0 6.3-3.6 11.4-7.9 11.4-4.4.0-7.9-5.1-7.9-11.4.0-6.3 3.6-11.4 7.9-11.4S104.5 79.2 104.5 85.5zm0 0"/><path fill="#fff" d="M172.2 85.3c0 9.5-5.3 17.1-11.9 17.1s-11.9-7.7-11.9-17.1c0-9.5 5.3-17.1 11.9-17.1C166.8 68.1 172.2 75.8 172.2 85.3zm0 0"/><path fill="#af5c51" d="M168.3 85.5c0 6.3-3.6 11.4-7.9 11.4-4.4.0-7.9-5.1-7.9-11.4.0-6.3 3.6-11.4 7.9-11.4C164.8 74.1 168.3 79.2 168.3 85.5zm0 0"/><path fill="#af5c51" d="M130.5 100.5c0 1.6-1.3 3-3 3-1.6.0-3-1.3-3-3s1.3-3 3-3c1.59999999999999.0 3 1.3 3 3zm0 0"/><path fill="#af5c51" d="M120.6 108c-.2-.5.1-1 .6-1.2s1 .1 1.2.6c.8 2.2 2.8 3.6 5.1 3.6s4.3-1.5 5.1-3.6c.2-.5.7-.8 1.2-.6s.8.7.6 1.2c-1 2.9-3.8 4.9-6.9 4.9C124.4 112.9 121.6 110.9 120.6 108zm0 0"/><path fill="#c4e5d9" d="M54.5 121.6c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4.0-.8.9-1.4 2.1-1.4C53.6 120.2 54.5 120.8 54.5 121.6zm0 0"/><path fill="#c4e5d9" d="M60.3 124.8c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4.0-.8.9-1.4 2.1-1.4C59.4 123.4 60.3 124 60.3 124.8zm0 0"/><path fill="#c4e5d9" d="M63.8 129c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4s.9-1.4 2.1-1.4C62.9 127.5 63.8 128.2 63.8 129zm0 0"/><path fill="#c4e5d9" d="M67 133.8c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4s.9-1.4 2.1-1.4C66.1 132.3 67 133 67 133.8zm0 0"/><path fill="#c4e5d9" d="M70.5 138.2c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4s.9-1.4 2.1-1.4C69.6 136.8 70.5 137.4 70.5 138.2zm0 0"/><path fill="#c4e5d9" d="M75.3 142.1c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4s.9-1.4 2.1-1.4C74.4 140.6 75.3 141.3 75.3 142.1zm0 0"/><path fill="#c4e5d9" d="M82 144.6c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4s.9-1.4 2.1-1.4S82 143.8 82 144.6zm0 0"/><path fill="#c4e5d9" d="M88.7 144.6c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4s.9-1.4 2.1-1.4S88.7 143.8 88.7 144.6zm0 0"/><path fill="#c4e5d9" d="M95.5 143.5c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4s.9-1.4 2.1-1.4C94.5 142.1 95.5 142.7 95.5 143.5zm0 0"/></g></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><li><a href=/links/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg><span>Links</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>暗色模式</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#函数式编程思想>函数式编程思想</a></li><li><a href=#lambda表达式>Lambda表达式</a><ol><li><a href=#例子>例子</a><ol><li><a href=#例一>例一</a></li><li><a href=#例二>例二:</a></li><li><a href=#例三>例三：</a></li><li><a href=#例四>例四：</a></li><li><a href=#例五>例五：</a></li></ol></li><li><a href=#省略规则>省略规则</a></li></ol></li><li><a href=#stream流>Stream流</a><ol><li><a href=#概述>概述</a></li><li><a href=#案例数据准备>案例数据准备</a></li><li><a href=#快速入门>快速入门</a><ol><li><a href=#需求>需求</a></li><li><a href=#实现>实现</a></li></ol></li><li><a href=#常用操作>常用操作</a><ol><li><a href=#创建流>创建流</a></li><li><a href=#中间操作>中间操作</a></li><li><a href=#终结操作>终结操作</a></li></ol></li><li><a href=#注意事项>注意事项</a></li></ol></li><li><a href=#optional>Optional</a><ol><li><a href=#概述-1>概述</a></li><li><a href=#使用>使用</a><ol><li><a href=#创建对象>创建对象</a></li><li><a href=#安全消费值>安全消费值</a></li><li><a href=#获取值>获取值</a></li><li><a href=#安全获取值>安全获取值</a></li><li><a href=#过滤>过滤</a></li><li><a href=#判断>判断</a></li><li><a href=#数据转换>数据转换</a></li></ol></li></ol></li><li><a href=#函数式接口>函数式接口</a><ol><li><a href=#概述-2>概述</a></li><li><a href=#常见函数式接口>常见函数式接口</a></li><li><a href=#常用的默认方法>常用的默认方法</a><ol><li></li><li><a href=#引用对象的实例方法>引用对象的实例方法</a></li><li><a href=#引用类的实例方法>引用类的实例方法</a></li><li><a href=#构造器引用>构造器引用</a></li></ol></li></ol></li><li><a href=#高级用法>高级用法</a><ol><li><a href=#基本数据类型优化>基本数据类型优化</a></li><li><a href=#并行流>并行流</a></li></ol></li><li><a href=#链接>链接</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/java/>JAVA</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/i-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-stream%E6%B5%81/>I: 函数式编程-Stream流</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Aug 09, 2023</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>阅读时长: 22 分钟</time></div></footer></div></header><section class=article-content><h2 id=函数式编程思想>函数式编程思想</h2><p>在函数式编程中，纯函数是指满足以下两个条件的函数：</p><ol><li><p>相同的输入始终产生相同的输出：纯函数的输出仅由输入决定，不受任何外部状态的影响。对于相同的输入，纯函数始终返回相同的输出。这种确定性的行为使得纯函数易于理解和推理。</p></li><li><p>没有副作用：纯函数在执行过程中不会修改外部状态或产生其他可观察到的副作用。副作用包括对全局变量的修改、对文件系统的读写、网络请求等。纯函数仅通过输入和输出之间的映射来完成计算，不会对外部环境造成任何影响。</p></li></ol><p>纯函数的特性使得其具有很多优点，包括：</p><ul><li><p>可测试性：由于纯函数的输出仅由输入决定，因此很容易编写测试来验证其行为。测试可以针对不同的输入和边界情况进行，而无需考虑外部状态的变化。</p></li><li><p>可重用性：纯函数可以被重复使用，因为它们的行为是确定性的，不会受到外部状态的影响。可以在不同的上下文中调用纯函数，而无需担心副作用对系统的影响。</p></li><li><p>并发安全性：由于纯函数没有副作用，它们可以在并发环境中安全地执行。多个线程或进程可以同时调用纯函数，而不会发生竞争条件或数据损坏。</p></li></ul><p>需要注意的是，纯函数并不意味着所有函数都必须是纯函数。在实际的应用中，我们可能需要与外部环境进行交互或处理可变状态。然而，通过使用纯函数来封装和隔离这些副作用，可以提高代码的可维护性和可测试性。</p><p>让我们通过一个具体的例子来说明这个概念。假设我们需要从文件中读取数据，并计算数据的平均值。</p><p>如果我们不使用纯函数，可能会直接在函数中读取文件和计算平均值：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>calculate_average</span><span class=p>(</span><span class=n>filename</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>filename</span><span class=p>,</span> <span class=s1>&#39;r&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>file</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>numbers</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=nb>map</span><span class=p>(</span><span class=nb>int</span><span class=p>,</span> <span class=n>file</span><span class=o>.</span><span class=n>readlines</span><span class=p>()))</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nb>sum</span><span class=p>(</span><span class=n>numbers</span><span class=p>)</span> <span class=o>/</span> <span class=nb>len</span><span class=p>(</span><span class=n>numbers</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>上面的 <code>calculate_average</code> 函数是非纯函数，因为它有一个副作用：读取文件。这使得函数的行为依赖于外部状态（文件的内容），并且每次调用函数可能会得到不同的结果。</p><p>现在，让我们试着将副作用封装在纯函数之外，将非纯函数转换为纯函数：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>read_numbers</span><span class=p>(</span><span class=n>filename</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>filename</span><span class=p>,</span> <span class=s1>&#39;r&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>file</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>list</span><span class=p>(</span><span class=nb>map</span><span class=p>(</span><span class=nb>int</span><span class=p>,</span> <span class=n>file</span><span class=o>.</span><span class=n>readlines</span><span class=p>()))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>calculate_average</span><span class=p>(</span><span class=n>numbers</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nb>sum</span><span class=p>(</span><span class=n>numbers</span><span class=p>)</span> <span class=o>/</span> <span class=nb>len</span><span class=p>(</span><span class=n>numbers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>numbers</span> <span class=o>=</span> <span class=n>read_numbers</span><span class=p>(</span><span class=s1>&#39;data.txt&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>average</span> <span class=o>=</span> <span class=n>calculate_average</span><span class=p>(</span><span class=n>numbers</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>在这个例子中，我们将读取文件的副作用封装在 <code>read_numbers</code> 函数中，而 <code>calculate_average</code> 函数则是一个纯函数，它只负责计算平均值。这样，我们就将副作用隔离在纯函数之外，使得纯函数的行为更容易理解和测试。</p><p>当然，函数式编程允许函数作为参数传递给其他函数，这被称为高阶函数。这是函数式编程的一个重要特性，可以帮助我们编写更灵活和可重用的代码。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>apply_function</span><span class=p>(</span><span class=n>func</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>func</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>double</span><span class=p>(</span><span class=n>x</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>x</span> <span class=o>*</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>square</span><span class=p>(</span><span class=n>x</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>x</span> <span class=o>**</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>apply_function</span><span class=p>(</span><span class=n>double</span><span class=p>,</span> <span class=mi>5</span><span class=p>))</span>  <span class=c1># 输出：10</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>apply_function</span><span class=p>(</span><span class=n>square</span><span class=p>,</span> <span class=mi>5</span><span class=p>))</span>  <span class=c1># 输出：25</span>
</span></span></code></pre></td></tr></table></div></div><p>在这个例子中，<code>apply_function</code> 是一个高阶函数，它接受一个函数 <code>func</code> 和一个值 <code>value</code> 作为参数，然后返回 <code>func(value)</code> 的结果。</p><p>我们可以将 <code>double</code> 函数或 <code>square</code> 函数作为参数传递给 <code>apply_function</code>。这样，我们就可以使用 <code>apply_function</code> 来应用任何我们想要的函数，使得代码更具灵活性和可重用性。</p><p>这就是函数式编程中的高阶函数概念，通过传递函数作为参数，我们可以创建更强大、更灵活的抽象。在这个例子中，<code>apply_function</code> 的行为依赖于它的输入参数 <code>func</code> 和 <code>value</code>。</p><p>当我们说函数不应该依赖于外部状态，我们是指函数的行为不应该依赖于不作为其输入参数的外部状态。例如，全局变量或者类的成员变量。</p><p>在这个例子中，虽然 <code>apply_function</code> 的行为会根据传入的函数 <code>func</code> 而改变，但这并不意味着 <code>apply_function</code> 依赖于外部状态，因为 <code>func</code> 是 <code>apply_function</code> 的一个输入参数。</p><p>如果我们总是用相同的函数和值调用 <code>apply_function</code>，那么它总会返回相同的结果。这也是纯函数的一个重要特性：给定相同的输入，总会产生相同的输出，而不受外部状态的影响。</p><p>我们使用Python来编写一个简单的MapReduce示例。我们将计算一组数字的平均值，使用Map阶段将数字分割为键值对，然后使用Reduce阶段计算平均值。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>collections</span> <span class=kn>import</span> <span class=n>defaultdict</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 输入数据</span>
</span></span><span class=line><span class=cl><span class=n>data</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>9</span><span class=p>,</span> <span class=mi>10</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Map阶段</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>mapper</span><span class=p>(</span><span class=n>data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>result</span> <span class=o>=</span> <span class=n>defaultdict</span><span class=p>(</span><span class=nb>list</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>num</span> <span class=ow>in</span> <span class=n>data</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>key</span> <span class=o>=</span> <span class=n>num</span> <span class=o>%</span> <span class=mi>2</span>  <span class=c1># 将奇数和偶数分为两组</span>
</span></span><span class=line><span class=cl>        <span class=n>result</span><span class=p>[</span><span class=n>key</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>num</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>result</span><span class=o>.</span><span class=n>items</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Reduce阶段</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>reducer</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>values</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>count</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>values</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>total</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span><span class=n>values</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>average</span> <span class=o>=</span> <span class=n>total</span> <span class=o>/</span> <span class=n>count</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>key</span><span class=p>,</span> <span class=n>average</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 执行MapReduce</span>
</span></span><span class=line><span class=cl><span class=n>mapped_data</span> <span class=o>=</span> <span class=n>mapper</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>reduced_data</span> <span class=o>=</span> <span class=p>[</span><span class=n>reducer</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>values</span><span class=p>)</span> <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>values</span> <span class=ow>in</span> <span class=n>mapped_data</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 打印结果</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>average</span> <span class=ow>in</span> <span class=n>reduced_data</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Key: </span><span class=si>{</span><span class=n>key</span><span class=si>}</span><span class=s2>, Average: </span><span class=si>{</span><span class=n>average</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>
</span></span><span class=line><span class=cl>这个例子中，我们将数字分为奇数和偶数两组，并计算每组的平均值。在Map阶段，我们使用取模运算符将数字分为两组，并将数字添加到对应的键中。在Reduce阶段，我们计算每组数字的总和和数量，然后计算平均值。
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>运行这段代码，你会看到输出结果类似于：
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Key: 0, Average: 6.0
</span></span><span class=line><span class=cl>Key: 1, Average: 5.5
</span></span></code></pre></td></tr></table></div></div><p>其中，Key表示奇数或偶数组，Average表示对应组的平均值。这个简单的示例展示了MapReduce思想的基本原理，通过将数据分割为键值对，然后对相同键的值进行聚合处理，以实现数据处理和计算。</p><p><a class=link href=https://codewords.recurse.com/issues/one/an-introduction-to-functional-programming target=_blank rel=noopener>https://codewords.recurse.com/issues/one/an-introduction-to-functional-programming</a></p><h2 id=lambda表达式>Lambda表达式</h2><h3 id=例子>例子</h3><h4 id=例一>例一</h4><p>我们在创建线程并启动时可以使用匿名内部类的写法：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=k>new</span> <span class=n>Thread</span><span class=o>(</span><span class=k>new</span> <span class=n>Runnable</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>run</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;hello world &#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}).</span><span class=na>start</span><span class=o>();</span>
</span></span></code></pre></td></tr></table></div></div><p>可以使用Lambda的格式对其进行修改。修改后如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=k>new</span> <span class=n>Thread</span><span class=o>(()-&gt;{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;hello world &#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}).</span><span class=na>start</span><span class=o>();</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=例二>例二:</h4><p>现有方法定义如下，其中IntBinaryOperator是一个接口。先使用匿名内部类的写法调用该方法。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>int</span> <span class=nf>calculateNum</span><span class=o>(</span><span class=n>IntBinaryOperator</span> <span class=n>operator</span><span class=o>){</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>a</span> <span class=o>=</span> <span class=mi>10</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>b</span> <span class=o>=</span> <span class=mi>20</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>operator</span><span class=o>.</span><span class=na>applyAsInt</span><span class=o>(</span><span class=n>a</span><span class=o>,</span> <span class=n>b</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>calculateNum</span><span class=o>(</span><span class=k>new</span> <span class=n>IntBinaryOperator</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>        <span class=kd>public</span> <span class=kt>int</span> <span class=nf>applyAsInt</span><span class=o>(</span><span class=kt>int</span> <span class=n>left</span><span class=o>,</span> <span class=kt>int</span> <span class=n>right</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>left</span> <span class=o>+</span> <span class=n>right</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>});</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>i</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Lambda写法：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>calculateNum</span><span class=o>((</span><span class=kt>int</span> <span class=n>left</span><span class=o>,</span> <span class=kt>int</span> <span class=n>right</span><span class=o>)-&gt;{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>left</span> <span class=o>+</span> <span class=n>right</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>});</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>i</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=例三>例三：</h4><p>现有方法定义如下，其中IntPredicate是一个接口。先使用匿名内部类的写法调用该方法。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>printNum</span><span class=o>(</span><span class=n>IntPredicate</span> <span class=n>predicate</span><span class=o>){</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span><span class=o>[]</span> <span class=n>arr</span> <span class=o>=</span> <span class=o>{</span><span class=mi>1</span><span class=o>,</span><span class=mi>2</span><span class=o>,</span><span class=mi>3</span><span class=o>,</span><span class=mi>4</span><span class=o>,</span><span class=mi>5</span><span class=o>,</span><span class=mi>6</span><span class=o>,</span><span class=mi>7</span><span class=o>,</span><span class=mi>8</span><span class=o>,</span><span class=mi>9</span><span class=o>,</span><span class=mi>10</span><span class=o>};</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>:</span> <span class=n>arr</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=o>(</span><span class=n>predicate</span><span class=o>.</span><span class=na>test</span><span class=o>(</span><span class=n>i</span><span class=o>)){</span>
</span></span><span class=line><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>i</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>printNum</span><span class=o>(</span><span class=k>new</span> <span class=n>IntPredicate</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>        <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>test</span><span class=o>(</span><span class=kt>int</span> <span class=n>value</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>value</span><span class=o>%</span><span class=mi>2</span><span class=o>==</span><span class=mi>0</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>});</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Lambda写法：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>printNum</span><span class=o>((</span><span class=kt>int</span> <span class=n>value</span><span class=o>)-&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>value</span><span class=o>%</span><span class=mi>2</span><span class=o>==</span><span class=mi>0</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>});</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>printNum</span><span class=o>(</span><span class=n>IntPredicate</span> <span class=n>predicate</span><span class=o>){</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span><span class=o>[]</span> <span class=n>arr</span> <span class=o>=</span> <span class=o>{</span><span class=mi>1</span><span class=o>,</span><span class=mi>2</span><span class=o>,</span><span class=mi>3</span><span class=o>,</span><span class=mi>4</span><span class=o>,</span><span class=mi>5</span><span class=o>,</span><span class=mi>6</span><span class=o>,</span><span class=mi>7</span><span class=o>,</span><span class=mi>8</span><span class=o>,</span><span class=mi>9</span><span class=o>,</span><span class=mi>10</span><span class=o>};</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>:</span> <span class=n>arr</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=o>(</span><span class=n>predicate</span><span class=o>.</span><span class=na>test</span><span class=o>(</span><span class=n>i</span><span class=o>)){</span>
</span></span><span class=line><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>i</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=例四>例四：</h4><p>现有方法定义如下，其中Function是一个接口。先使用匿名内部类的写法调用该方法。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=o>&lt;</span><span class=n>R</span><span class=o>&gt;</span> <span class=n>R</span> <span class=nf>typeConver</span><span class=o>(</span><span class=n>Function</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span><span class=n>R</span><span class=o>&gt;</span> <span class=n>function</span><span class=o>){</span>
</span></span><span class=line><span class=cl>    <span class=n>String</span> <span class=n>str</span> <span class=o>=</span> <span class=s>&#34;1235&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=n>R</span> <span class=n>result</span> <span class=o>=</span> <span class=n>function</span><span class=o>.</span><span class=na>apply</span><span class=o>(</span><span class=n>str</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>result</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Integer</span> <span class=n>result</span> <span class=o>=</span> <span class=n>typeConver</span><span class=o>(</span><span class=k>new</span> <span class=n>Function</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>Integer</span><span class=o>&gt;()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>        <span class=kd>public</span> <span class=n>Integer</span> <span class=nf>apply</span><span class=o>(</span><span class=n>String</span> <span class=n>s</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>Integer</span><span class=o>.</span><span class=na>valueOf</span><span class=o>(</span><span class=n>s</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>});</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>result</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Lambda写法：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Integer</span> <span class=n>result</span> <span class=o>=</span> <span class=n>typeConver</span><span class=o>((</span><span class=n>String</span> <span class=n>s</span><span class=o>)-&gt;{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>Integer</span><span class=o>.</span><span class=na>valueOf</span><span class=o>(</span><span class=n>s</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>});</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>result</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=例五>例五：</h4><p>现有方法定义如下，其中IntConsumer是一个接口。先使用匿名内部类的写法调用该方法。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>foreachArr</span><span class=o>(</span><span class=n>IntConsumer</span> <span class=n>consumer</span><span class=o>){</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span><span class=o>[]</span> <span class=n>arr</span> <span class=o>=</span> <span class=o>{</span><span class=mi>1</span><span class=o>,</span><span class=mi>2</span><span class=o>,</span><span class=mi>3</span><span class=o>,</span><span class=mi>4</span><span class=o>,</span><span class=mi>5</span><span class=o>,</span><span class=mi>6</span><span class=o>,</span><span class=mi>7</span><span class=o>,</span><span class=mi>8</span><span class=o>,</span><span class=mi>9</span><span class=o>,</span><span class=mi>10</span><span class=o>};</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>:</span> <span class=n>arr</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>consumer</span><span class=o>.</span><span class=na>accept</span><span class=o>(</span><span class=n>i</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>foreachArr</span><span class=o>(</span><span class=k>new</span> <span class=n>IntConsumer</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>        <span class=kd>public</span> <span class=kt>void</span> <span class=nf>accept</span><span class=o>(</span><span class=kt>int</span> <span class=n>value</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>value</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>});</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Lambda写法：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>foreachArr</span><span class=o>((</span><span class=kt>int</span> <span class=n>value</span><span class=o>)-&gt;{</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>value</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>});</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=省略规则>省略规则</h3><ul><li>参数类型可以省略</li><li>方法体只有一句代码时大括号return和唯一一句代码的分号可以省略</li><li>方法只有一个参数时小括号可以省略</li><li>以上这些规则都记不住也可以省略不记</li></ul><h2 id=stream流>Stream流</h2><h3 id=概述>概述</h3><p>Java8的Stream使用的是函数式编程模式，如同它的名字一样，它可以被用来对集合或数组进行链状流式的操作。可以更方便的让我们对集合或数组操作。</p><h3 id=案例数据准备>案例数据准备</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;dependencies&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;groupId&gt;</span>org.projectlombok<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;artifactId&gt;</span>lombok<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;version&gt;</span>1.18.16<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/dependency&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependencies&gt;</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Data</span>
</span></span><span class=line><span class=cl><span class=nd>@NoArgsConstructor</span>
</span></span><span class=line><span class=cl><span class=nd>@AllArgsConstructor</span>
</span></span><span class=line><span class=cl><span class=nd>@EqualsAndHashCode</span><span class=c1>//用于后期的去重使用
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Author</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>//id
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>private</span> <span class=n>Long</span> <span class=n>id</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>//姓名
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>private</span> <span class=n>String</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>//年龄
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>private</span> <span class=n>Integer</span> <span class=n>age</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>//简介
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>private</span> <span class=n>String</span> <span class=n>intro</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>//作品
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>private</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>Book</span><span class=o>&gt;</span> <span class=n>books</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Data</span>
</span></span><span class=line><span class=cl><span class=nd>@AllArgsConstructor</span>
</span></span><span class=line><span class=cl><span class=nd>@NoArgsConstructor</span>
</span></span><span class=line><span class=cl><span class=nd>@EqualsAndHashCode</span><span class=c1>//用于后期的去重使用
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Book</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>//id
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>private</span> <span class=n>Long</span> <span class=n>id</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>//书名
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>private</span> <span class=n>String</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>//分类
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>private</span> <span class=n>String</span> <span class=n>category</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>//评分
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>private</span> <span class=n>Integer</span> <span class=n>score</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>//简介
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>private</span> <span class=n>String</span> <span class=n>intro</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>private</span> <span class=kd>static</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=nf>getAuthors</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>//数据初始化
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>Author</span> <span class=n>author</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Author</span><span class=o>(</span><span class=mi>1L</span><span class=o>,</span><span class=s>&#34;张三&#34;</span><span class=o>,</span><span class=mi>33</span><span class=o>,</span><span class=s>&#34;一个勤劳的农民&#34;</span><span class=o>,</span><span class=kc>null</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>Author</span> <span class=n>author2</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Author</span><span class=o>(</span><span class=mi>2L</span><span class=o>,</span><span class=s>&#34;李四&#34;</span><span class=o>,</span><span class=mi>15</span><span class=o>,</span><span class=s>&#34;聪明好学的青年&#34;</span><span class=o>,</span><span class=kc>null</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>Author</span> <span class=n>author3</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Author</span><span class=o>(</span><span class=mi>3L</span><span class=o>,</span><span class=s>&#34;王五&#34;</span><span class=o>,</span><span class=mi>14</span><span class=o>,</span><span class=s>&#34;阳光开朗的少年&#34;</span><span class=o>,</span><span class=kc>null</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>Author</span> <span class=n>author4</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Author</span><span class=o>(</span><span class=mi>3L</span><span class=o>,</span><span class=s>&#34;王五&#34;</span><span class=o>,</span><span class=mi>14</span><span class=o>,</span><span class=s>&#34;阳光开朗的少年&#34;</span><span class=o>,</span><span class=kc>null</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>//书籍列表
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>List</span><span class=o>&lt;</span><span class=n>Book</span><span class=o>&gt;</span> <span class=n>books1</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>    <span class=n>List</span><span class=o>&lt;</span><span class=n>Book</span><span class=o>&gt;</span> <span class=n>books2</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>    <span class=n>List</span><span class=o>&lt;</span><span class=n>Book</span><span class=o>&gt;</span> <span class=n>books3</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>books1</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>Book</span><span class=o>(</span><span class=mi>1L</span><span class=o>,</span><span class=s>&#34;努力改变人生&#34;</span><span class=o>,</span><span class=s>&#34;自传,励志&#34;</span><span class=o>,</span><span class=mi>88</span><span class=o>,</span><span class=s>&#34;不懈努力才能改变命运&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=n>books1</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>Book</span><span class=o>(</span><span class=mi>2L</span><span class=o>,</span><span class=s>&#34;青春不留白&#34;</span><span class=o>,</span><span class=s>&#34;成长,励志&#34;</span><span class=o>,</span><span class=mi>99</span><span class=o>,</span><span class=s>&#34;要充实青春,争取进步&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>books2</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>Book</span><span class=o>(</span><span class=mi>3L</span><span class=o>,</span><span class=s>&#34;世界之大&#34;</span><span class=o>,</span><span class=s>&#34;哲学&#34;</span><span class=o>,</span><span class=mi>85</span><span class=o>,</span><span class=s>&#34;要用思考来领悟世界&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=n>books2</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>Book</span><span class=o>(</span><span class=mi>3L</span><span class=o>,</span><span class=s>&#34;世界之大&#34;</span><span class=o>,</span><span class=s>&#34;哲学&#34;</span><span class=o>,</span><span class=mi>85</span><span class=o>,</span><span class=s>&#34;要用思考来领悟世界&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=n>books2</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>Book</span><span class=o>(</span><span class=mi>4L</span><span class=o>,</span><span class=s>&#34;随心而动&#34;</span><span class=o>,</span><span class=s>&#34;爱情,自传&#34;</span><span class=o>,</span><span class=mi>56</span><span class=o>,</span><span class=s>&#34;要学会顺其自然&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>books3</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>Book</span><span class=o>(</span><span class=mi>5L</span><span class=o>,</span><span class=s>&#34;你我皆一体&#34;</span><span class=o>,</span><span class=s>&#34;爱情&#34;</span><span class=o>,</span><span class=mi>56</span><span class=o>,</span><span class=s>&#34;要珍惜彼此&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=n>books3</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>Book</span><span class=o>(</span><span class=mi>6L</span><span class=o>,</span><span class=s>&#34;心与行&#34;</span><span class=o>,</span><span class=s>&#34;自传&#34;</span><span class=o>,</span><span class=mi>100</span><span class=o>,</span><span class=s>&#34;要言行一致&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=n>books3</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>Book</span><span class=o>(</span><span class=mi>6L</span><span class=o>,</span><span class=s>&#34;心与行&#34;</span><span class=o>,</span><span class=s>&#34;自传&#34;</span><span class=o>,</span><span class=mi>100</span><span class=o>,</span><span class=s>&#34;要言行一致&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>author</span><span class=o>.</span><span class=na>setBooks</span><span class=o>(</span><span class=n>books1</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>author2</span><span class=o>.</span><span class=na>setBooks</span><span class=o>(</span><span class=n>books2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>author3</span><span class=o>.</span><span class=na>setBooks</span><span class=o>(</span><span class=n>books3</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>author4</span><span class=o>.</span><span class=na>setBooks</span><span class=o>(</span><span class=n>books3</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authorList</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;(</span><span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span><span class=n>author</span><span class=o>,</span><span class=n>author2</span><span class=o>,</span><span class=n>author3</span><span class=o>,</span><span class=n>author4</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>authorList</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=快速入门>快速入门</h3><h4 id=需求>需求</h4><p>我们可以调用getAuthors方法获取到作家的集合。现在需要打印所有年龄小于18的作家的名字，并且要注意去重。</p><h4 id=实现>实现</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//打印所有年龄小于18的作家的名字，并且要注意去重
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>authors</span><span class=o>.</span>
</span></span><span class=line><span class=cl>        <span class=nf>stream</span><span class=o>()</span><span class=c1>//把集合转换成流
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=o>.</span><span class=na>distinct</span><span class=o>()</span><span class=c1>//先去除重复的作家
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>()&lt;</span><span class=mi>18</span><span class=o>)</span><span class=c1>//筛选年龄小于18的
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>()));</span><span class=c1>//遍历打印名字
</span></span></span></code></pre></td></tr></table></div></div><h3 id=常用操作>常用操作</h3><h4 id=创建流>创建流</h4><p>单列集合： <code>集合对象.stream()</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>stream</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>();</span>
</span></span></code></pre></td></tr></table></div></div><p>数组：<code>Arrays.stream(数组) </code>或者使用<code>Stream.of</code>来创建</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-JAVA data-lang=JAVA><span class=line><span class=cl><span class=n>Integer</span><span class=o>[]</span> <span class=n>arr</span> <span class=o>=</span> <span class=o>{</span><span class=mi>1</span><span class=o>,</span><span class=mi>2</span><span class=o>,</span><span class=mi>3</span><span class=o>,</span><span class=mi>4</span><span class=o>,</span><span class=mi>5</span><span class=o>};</span>
</span></span><span class=line><span class=cl><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>stream</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>stream</span><span class=o>(</span><span class=n>arr</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>stream2</span> <span class=o>=</span> <span class=n>Stream</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>arr</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><p>双列集合：转换成单列集合后再创建</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>map</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashMap</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl><span class=n>map</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;蜡笔小新&#34;</span><span class=o>,</span><span class=mi>19</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>map</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;黑子&#34;</span><span class=o>,</span><span class=mi>17</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>map</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;日向翔阳&#34;</span><span class=o>,</span><span class=mi>16</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Map</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>Integer</span><span class=o>&gt;&gt;</span> <span class=n>stream</span> <span class=o>=</span> <span class=n>map</span><span class=o>.</span><span class=na>entrySet</span><span class=o>().</span><span class=na>stream</span><span class=o>();</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=中间操作>中间操作</h4><h5 id=filter>filter</h5><p>可以对流中的元素进行条件过滤，符合过滤条件的才能继续留在流中。</p><p>例如：</p><p>打印所有姓名长度大于1的作家的姓名</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>().</span><span class=na>length</span><span class=o>()&gt;</span><span class=mi>1</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>()));</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=map>map</h5><p>可以把对流中的元素进行计算或转换。</p><p>例如：</p><p>打印所有作家的姓名</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>authors</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>name</span><span class=o>-&gt;</span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>name</span><span class=o>));</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 打印所有作家的姓名
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>age</span><span class=o>-&gt;</span><span class=n>age</span><span class=o>+</span><span class=mi>10</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>age</span><span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>age</span><span class=o>));</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=distinct>distinct</h5><p>可以去除流中的重复元素。</p><p>例如：</p><p>打印所有作家的姓名，并且要求其中不能有重复元素。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>distinct</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>()));</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>注意：distinct方法是依赖Object的equals方法来判断是否是相同对象的。所以需要注意重写equals方法。</strong></p><h5 id=sorted>sorted</h5><p>可以对流中的元素进行排序。</p><p>例如：</p><p>对流中的元素按照年龄进行降序排序，并且要求不能有重复的元素。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=c1>// 对流中的元素按照年龄进行降序排序，并且要求不能有重复的元素。
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>distinct</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>sorted</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>()));</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=c1>// 对流中的元素按照年龄进行降序排序，并且要求不能有重复的元素。
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>distinct</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>sorted</span><span class=o>((</span><span class=n>o1</span><span class=o>,</span> <span class=n>o2</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>o2</span><span class=o>.</span><span class=na>getAge</span><span class=o>()-</span><span class=n>o1</span><span class=o>.</span><span class=na>getAge</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>()));</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>注意：如果调用空参的sorted()方法，需要流中的元素是实现了Comparable。</strong></p><h5 id=limit>limit</h5><p>可以设置流的最大长度，超出的部分将被抛弃。</p><p>例如：</p><p>对流中的元素按照年龄进行降序排序，并且要求不能有重复的元素,然后打印其中年龄最大的两个作家的姓名。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>distinct</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>sorted</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>limit</span><span class=o>(</span><span class=mi>2</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>()));</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=skip>skip</h5><p>跳过流中的前n个元素，返回剩下的元素</p><p>例如：</p><p>打印除了年龄最大的作家外的其他作家，要求不能有重复元素，并且按照年龄降序排序。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 打印除了年龄最大的作家外的其他作家，要求不能有重复元素，并且按照年龄降序排序。
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>distinct</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>sorted</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>skip</span><span class=o>(</span><span class=mi>1</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>()));</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=flatmap>flatMap</h5><p>map只能把一个对象转换成另一个对象来作为流中的元素。而flatMap可以把一个对象转换成多个对象作为流中的元素。</p><p>例一：</p><p>打印所有书籍的名字。要求对重复的元素进行去重。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 打印所有书籍的名字。要求对重复的元素进行去重。
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>flatMap</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getBooks</span><span class=o>().</span><span class=na>stream</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>distinct</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>book</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>book</span><span class=o>.</span><span class=na>getName</span><span class=o>()));</span>
</span></span></code></pre></td></tr></table></div></div><p>例二：</p><p>打印现有数据的所有分类。要求对分类进行去重。不能出现这种格式：哲学,爱情</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 打印现有数据的所有分类。要求对分类进行去重。不能出现这种格式：哲学,爱情     爱情
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>flatMap</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getBooks</span><span class=o>().</span><span class=na>stream</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>distinct</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>flatMap</span><span class=o>(</span><span class=n>book</span> <span class=o>-&gt;</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>stream</span><span class=o>(</span><span class=n>book</span><span class=o>.</span><span class=na>getCategory</span><span class=o>().</span><span class=na>split</span><span class=o>(</span><span class=s>&#34;,&#34;</span><span class=o>)))</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>distinct</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>category</span><span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>category</span><span class=o>));</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=终结操作>终结操作</h4><h5 id=foreach>forEach</h5><p>对流中的元素进行遍历操作，我们通过传入的参数去指定对遍历到的元素进行什么具体操作。</p><p>例子：</p><p>输出所有作家的名字</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//  输出所有作家的名字
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>distinct</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>name</span><span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>name</span><span class=o>));</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=count>count</h5><p>可以用来获取当前流中元素的个数。</p><p>例子：</p><p>打印这些作家的所出书籍的数目，注意删除重复元素。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 打印这些作家的所出书籍的数目，注意删除重复元素。
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>long</span> <span class=n>count</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>flatMap</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getBooks</span><span class=o>().</span><span class=na>stream</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>distinct</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>count</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>count</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=maxmin>max&amp;min</h5><p>可以用来或者流中的最值。</p><p>例子：</p><p>分别获取这些作家的所出书籍的最高分和最低分并打印。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//  分别获取这些作家的所出书籍的最高分和最低分并打印。
</span></span></span><span class=line><span class=cl><span class=c1>//Stream&lt;Author&gt;  -&gt; Stream&lt;Book&gt; -&gt;Stream&lt;Integer&gt;  -&gt;求值
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>max</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>flatMap</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getBooks</span><span class=o>().</span><span class=na>stream</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>book</span> <span class=o>-&gt;</span> <span class=n>book</span><span class=o>.</span><span class=na>getScore</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>max</span><span class=o>((</span><span class=n>score1</span><span class=o>,</span> <span class=n>score2</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>score1</span> <span class=o>-</span> <span class=n>score2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>min</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>flatMap</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getBooks</span><span class=o>().</span><span class=na>stream</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>book</span> <span class=o>-&gt;</span> <span class=n>book</span><span class=o>.</span><span class=na>getScore</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>min</span><span class=o>((</span><span class=n>score1</span><span class=o>,</span> <span class=n>score2</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>score1</span> <span class=o>-</span> <span class=n>score2</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>max</span><span class=o>.</span><span class=na>get</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>min</span><span class=o>.</span><span class=na>get</span><span class=o>());</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=collect>collect</h5><p>把当前流转换成一个集合。</p><p>例子：</p><p>获取一个存放所有作者名字的List集合。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 获取一个存放所有作者名字的List集合。
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>nameList</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>toList</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>nameList</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><p>获取一个所有书名的Set集合。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 获取一个所有书名的Set集合。
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>Set</span><span class=o>&lt;</span><span class=n>Book</span><span class=o>&gt;</span> <span class=n>books</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>flatMap</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getBooks</span><span class=o>().</span><span class=na>stream</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>toSet</span><span class=o>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>books</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><p>获取一个Map集合，map的key为作者名，value为List</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 获取一个Map集合，map的key为作者名，value为List&lt;Book&gt;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>Book</span><span class=o>&gt;&gt;</span> <span class=n>map</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>distinct</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>toMap</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>(),</span> <span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getBooks</span><span class=o>()));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>map</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=查找与匹配>查找与匹配</h5><h6 id=anymatch>anyMatch</h6><p>可以用来判断是否有任意符合匹配条件的元素，结果为boolean类型。</p><p>例子：</p><p>判断是否有年龄在29以上的作家</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//  判断是否有年龄在29以上的作家
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=kt>boolean</span> <span class=n>flag</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>anyMatch</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>()</span> <span class=o>&gt;</span> <span class=mi>29</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>flag</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=allmatch>allMatch</h6><p>可以用来判断是否都符合匹配条件，结果为boolean类型。如果都符合结果为true，否则结果为false。</p><p>例子：</p><p>判断是否所有的作家都是成年人</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 判断是否所有的作家都是成年人
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=kt>boolean</span> <span class=n>flag</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>allMatch</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>()</span> <span class=o>&gt;=</span> <span class=mi>18</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>flag</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=nonematch>noneMatch</h6><p>可以判断流中的元素是否都不符合匹配条件。如果都不符合结果为true，否则结果为false</p><p>例子：</p><p>判断作家是否都没有超过100岁的。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 判断作家是否都没有超过100岁的。
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>boolean</span> <span class=n>b</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>noneMatch</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>()</span> <span class=o>&gt;</span> <span class=mi>100</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>b</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=findany>findAny</h6><p>获取流中的任意一个元素。该方法没有办法保证获取的一定是流中的第一个元素。</p><p>例子：</p><p>获取任意一个年龄大于18的作家，如果存在就输出他的名字</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 获取任意一个年龄大于18的作家，如果存在就输出他的名字
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>optionalAuthor</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>()&gt;</span><span class=mi>18</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>findAny</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>optionalAuthor</span><span class=o>.</span><span class=na>ifPresent</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>()));</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=findfirst>findFirst</h6><p>获取流中的第一个元素。</p><p>例子：</p><p>获取一个年龄最小的作家，并输出他的姓名。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 获取一个年龄最小的作家，并输出他的姓名。
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>first</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>sorted</span><span class=o>((</span><span class=n>o1</span><span class=o>,</span> <span class=n>o2</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>o1</span><span class=o>.</span><span class=na>getAge</span><span class=o>()</span> <span class=o>-</span> <span class=n>o2</span><span class=o>.</span><span class=na>getAge</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>findFirst</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>first</span><span class=o>.</span><span class=na>ifPresent</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>()));</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=reduce归并>reduce归并</h5><p>对流中的数据按照你指定的计算方式计算出一个结果。（缩减操作）</p><p>reduce的作用是把stream中的元素给组合起来，我们可以传入一个初始值，它会按照我们的计算方式依次拿流中的元素和初始化值进行计算，计算结果再和后面的元素计算。</p><p>reduce两个参数的重载形式内部的计算方式如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>T</span> <span class=n>result</span> <span class=o>=</span> <span class=n>identity</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=o>(</span><span class=n>T</span> <span class=n>element</span> <span class=o>:</span> <span class=k>this</span> <span class=n>stream</span><span class=o>)</span>
</span></span><span class=line><span class=cl>	<span class=n>result</span> <span class=o>=</span> <span class=n>accumulator</span><span class=o>.</span><span class=na>apply</span><span class=o>(</span><span class=n>result</span><span class=o>,</span> <span class=n>element</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=k>return</span> <span class=n>result</span><span class=o>;</span>
</span></span></code></pre></td></tr></table></div></div><p>其中identity就是我们可以通过方法参数传入的初始值，accumulator的apply具体进行什么计算也是我们通过方法参数来确定的。</p><p>例子：</p><p>使用reduce求所有作者年龄的和</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 使用reduce求所有作者年龄的和
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>Integer</span> <span class=n>sum</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>distinct</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>reduce</span><span class=o>(</span><span class=mi>0</span><span class=o>,</span> <span class=o>(</span><span class=n>result</span><span class=o>,</span> <span class=n>element</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>result</span> <span class=o>+</span> <span class=n>element</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>sum</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><p>使用reduce求所有作者中年龄的最大值</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 使用reduce求所有作者中年龄的最大值
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>Integer</span> <span class=n>max</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>reduce</span><span class=o>(</span><span class=n>Integer</span><span class=o>.</span><span class=na>MIN_VALUE</span><span class=o>,</span> <span class=o>(</span><span class=n>result</span><span class=o>,</span> <span class=n>element</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>result</span> <span class=o>&lt;</span> <span class=n>element</span> <span class=o>?</span> <span class=n>element</span> <span class=o>:</span> <span class=n>result</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>max</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><p>使用reduce求所有作者中年龄的最小值</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//  使用reduce求所有作者中年龄的最小值
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>Integer</span> <span class=n>min</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>reduce</span><span class=o>(</span><span class=n>Integer</span><span class=o>.</span><span class=na>MAX_VALUE</span><span class=o>,</span> <span class=o>(</span><span class=n>result</span><span class=o>,</span> <span class=n>element</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>result</span> <span class=o>&gt;</span> <span class=n>element</span> <span class=o>?</span> <span class=n>element</span> <span class=o>:</span> <span class=n>result</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>min</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><p>reduce一个参数的重载形式内部的计算</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kt>boolean</span> <span class=n>foundAny</span> <span class=o>=</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=n>T</span> <span class=n>result</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=o>(</span><span class=n>T</span> <span class=n>element</span> <span class=o>:</span> <span class=k>this</span> <span class=n>stream</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>   <span class=k>if</span> <span class=o>(!</span><span class=n>foundAny</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>       <span class=n>foundAny</span> <span class=o>=</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>       <span class=n>result</span> <span class=o>=</span> <span class=n>element</span><span class=o>;</span>
</span></span><span class=line><span class=cl>   <span class=o>}</span>
</span></span><span class=line><span class=cl>   <span class=k>else</span>
</span></span><span class=line><span class=cl>       <span class=n>result</span> <span class=o>=</span> <span class=n>accumulator</span><span class=o>.</span><span class=na>apply</span><span class=o>(</span><span class=n>result</span><span class=o>,</span> <span class=n>element</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=k>return</span> <span class=n>foundAny</span> <span class=o>?</span> <span class=n>Optional</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>result</span><span class=o>)</span> <span class=o>:</span> <span class=n>Optional</span><span class=o>.</span><span class=na>empty</span><span class=o>();</span>
</span></span></code></pre></td></tr></table></div></div><p>如果用一个参数的重载方法去求最小值代码如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//  使用reduce求所有作者中年龄的最小值
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>minOptional</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>reduce</span><span class=o>((</span><span class=n>result</span><span class=o>,</span> <span class=n>element</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>result</span> <span class=o>&gt;</span> <span class=n>element</span> <span class=o>?</span> <span class=n>element</span> <span class=o>:</span> <span class=n>result</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>minOptional</span><span class=o>.</span><span class=na>ifPresent</span><span class=o>(</span><span class=n>age</span><span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>age</span><span class=o>));</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=注意事项>注意事项</h3><ul><li>惰性求值（如果没有终结操作，没有中间操作是不会得到执行的）</li><li>流是一次性的（一旦一个流对象经过一个终结操作后。这个流就不能再被使用）</li><li>不会影响原数据（我们在流中可以多数据做很多处理。但是正常情况下是不会影响原来集合中的元素的。这往往也是我们期望的）</li></ul><h2 id=optional>Optional</h2><h3 id=概述-1>概述</h3><p>我们在编写代码的时候出现最多的就是空指针异常。所以在很多情况下我们需要做各种非空的判断。</p><p>例如：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Author</span> <span class=n>author</span> <span class=o>=</span> <span class=n>getAuthor</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=k>if</span><span class=o>(</span><span class=n>author</span><span class=o>!=</span><span class=kc>null</span><span class=o>){</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>尤其是对象中的属性还是一个对象的情况下。这种判断会更多。</p><p>而过多的判断语句会让我们的代码显得臃肿不堪。</p><p>所以在JDK8中引入了Optional,养成使用Optional的习惯后你可以写出更优雅的代码来避免空指针异常。</p><p>并且在很多函数式编程相关的API中也都用到了Optional，如果不会使用Optional也会对函数式编程的学习造成影响。</p><h3 id=使用>使用</h3><h4 id=创建对象>创建对象</h4><p>Optional就好像是包装类，可以把我们的具体数据封装Optional对象内部。然后我们去使用Optional中封装好的方法操作封装进去的数据就可以非常优雅的避免空指针异常。</p><p>我们一般使用<strong>Optional</strong>的<strong>静态方法ofNullable</strong>来把数据封装成一个Optional对象。无论传入的参数是否为null都不会出现问题。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Author</span> <span class=n>author</span> <span class=o>=</span> <span class=n>getAuthor</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authorOptional</span> <span class=o>=</span> <span class=n>Optional</span><span class=o>.</span><span class=na>ofNullable</span><span class=o>(</span><span class=n>author</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><p>你可能会觉得还要加一行代码来封装数据比较麻烦。但是如果改造下getAuthor方法，让其的返回值就是封装好的Optional的话，我们在使用时就会方便很多。</p><p>而且在实际开发中我们的数据很多是从数据库获取的。Mybatis从3.5版本可以也已经支持Optional了。我们可以直接把dao方法的返回值类型定义成Optional类型，MyBastis会自己把数据封装成Optional对象返回。封装的过程也不需要我们自己操作。</p><p>如果你<strong>确定一个对象不是空</strong>的则可以使用<strong>Optional</strong>的<strong>静态方法of</strong>来把数据封装成Optional对象。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Author</span> <span class=n>author</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Author</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authorOptional</span> <span class=o>=</span> <span class=n>Optional</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>author</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><p>但是一定要注意，如果使用of的时候传入的参数必须不为null。（尝试下传入null会出现什么结果）</p><p>如果一个方法的返回值类型是Optional类型。而如果我们经判断发现某次计算得到的返回值为null，这个时候就需要把null封装成Optional对象返回。这时则可以使用<strong>Optional</strong>的<strong>静态方法empty</strong>来进行封装。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Optional</span><span class=o>.</span><span class=na>empty</span><span class=o>()</span>
</span></span></code></pre></td></tr></table></div></div><p>所以最后你觉得哪种方式会更方便呢？<strong>ofNullable</strong></p><h4 id=安全消费值>安全消费值</h4><p>我们获取到一个Optional对象后肯定需要对其中的数据进行使用。这时候我们可以使用其<strong>ifPresent</strong>方法对来消费其中的值。</p><p>这个方法会判断其内封装的数据是否为空，不为空时才会执行具体的消费代码。这样使用起来就更加安全了。</p><p>例如,以下写法就优雅的避免了空指针异常。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authorOptional</span> <span class=o>=</span> <span class=n>Optional</span><span class=o>.</span><span class=na>ofNullable</span><span class=o>(</span><span class=n>getAuthor</span><span class=o>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>authorOptional</span><span class=o>.</span><span class=na>ifPresent</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>()));</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=获取值>获取值</h4><p>如果我们想获取值自己进行处理可以使用get方法获取，但是不推荐。因为当Optional内部的数据为空的时候会出现异常。</p><h4 id=安全获取值>安全获取值</h4><p>如果我们期望安全的获取值。我们不推荐使用get方法，而是使用Optional提供的以下方法。</p><ul><li><p>orElseGet</p><p>获取数据并且设置数据为空时的默认值。如果数据不为空就能获取到该数据。如果为空则根据你传入的参数来创建对象作为默认值返回。</p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl>  <span class=n>Optional</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authorOptional</span> <span class=o>=</span> <span class=n>Optional</span><span class=o>.</span><span class=na>ofNullable</span><span class=o>(</span><span class=n>getAuthor</span><span class=o>());</span>
</span></span><span class=line><span class=cl>  <span class=n>Author</span> <span class=n>author1</span> <span class=o>=</span> <span class=n>authorOptional</span><span class=o>.</span><span class=na>orElseGet</span><span class=o>(()</span> <span class=o>-&gt;</span> <span class=k>new</span> <span class=n>Author</span><span class=o>());</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><p>orElseThrow</p><p>获取数据，如果数据不为空就能获取到该数据。如果为空则根据你传入的参数来创建异常抛出。</p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authorOptional</span> <span class=o>=</span> <span class=n>Optional</span><span class=o>.</span><span class=na>ofNullable</span><span class=o>(</span><span class=n>getAuthor</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=k>try</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Author</span> <span class=n>author</span> <span class=o>=</span> <span class=n>authorOptional</span><span class=o>.</span><span class=na>orElseThrow</span><span class=o>((</span><span class=n>Supplier</span><span class=o>&lt;</span><span class=n>Throwable</span><span class=o>&gt;)</span> <span class=o>()</span> <span class=o>-&gt;</span> <span class=k>new</span> <span class=n>RuntimeException</span><span class=o>(</span><span class=s>&#34;author为空&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>Throwable</span> <span class=n>throwable</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>throwable</span><span class=o>.</span><span class=na>printStackTrace</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=过滤>过滤</h4><p>我们可以使用filter方法对数据进行过滤。如果原本是有数据的，但是不符合判断，也会变成一个无数据的Optional对象。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authorOptional</span> <span class=o>=</span> <span class=n>Optional</span><span class=o>.</span><span class=na>ofNullable</span><span class=o>(</span><span class=n>getAuthor</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=n>authorOptional</span><span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>()&gt;</span><span class=mi>100</span><span class=o>).</span><span class=na>ifPresent</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>()));</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=判断>判断</h4><p>我们可以使用isPresent方法进行是否存在数据的判断。如果为空返回值为false,如果不为空，返回值为true。但是这种方式并不能体现Optional的好处，<strong>更推荐使用ifPresent方法</strong>。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authorOptional</span> <span class=o>=</span> <span class=n>Optional</span><span class=o>.</span><span class=na>ofNullable</span><span class=o>(</span><span class=n>getAuthor</span><span class=o>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>(</span><span class=n>authorOptional</span><span class=o>.</span><span class=na>isPresent</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>authorOptional</span><span class=o>.</span><span class=na>get</span><span class=o>().</span><span class=na>getName</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=数据转换>数据转换</h4><p>Optional还提供了map可以让我们的对数据进行转换，并且转换得到的数据也还是被Optional包装好的，保证了我们的使用安全。</p><p>例如我们想获取作家的书籍集合。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>private</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>testMap</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Optional</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authorOptional</span> <span class=o>=</span> <span class=n>getAuthorOptional</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>Optional</span><span class=o>&lt;</span><span class=n>List</span><span class=o>&lt;</span><span class=n>Book</span><span class=o>&gt;&gt;</span> <span class=n>optionalBooks</span> <span class=o>=</span> <span class=n>authorOptional</span><span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getBooks</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=n>optionalBooks</span><span class=o>.</span><span class=na>ifPresent</span><span class=o>(</span><span class=n>books</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>books</span><span class=o>));</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=函数式接口>函数式接口</h2><h3 id=概述-2>概述</h3><p><strong>只有一个抽象方法</strong>的接口我们称之为函数接口。</p><p>JDK的函数式接口都加上了**@FunctionalInterface** 注解进行标识。但是无论是否加上该注解只要接口中只有一个抽象方法，都是函数式接口。</p><h3 id=常见函数式接口>常见函数式接口</h3><ul><li><p>Consumer 消费接口</p><p>根据其中抽象方法的参数列表和返回值类型知道，我们可以在方法中对传入的参数进行消费。</p><p><img src=/p/i-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-stream%E6%B5%81/image-20211028145622163-16354041894551.png width=698 height=316 srcset="/p/i-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-stream%E6%B5%81/image-20211028145622163-16354041894551_hu742ae4e794ff770f511673bf2dadf21e_19464_480x0_resize_box_3.png 480w, /p/i-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-stream%E6%B5%81/image-20211028145622163-16354041894551_hu742ae4e794ff770f511673bf2dadf21e_19464_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=220 data-flex-basis=530px></p></li><li><p>Function 计算转换接口</p><p>根据其中抽象方法的参数列表和返回值类型知道，我们可以在方法中对传入的参数计算或转换，把结果返回</p><p><img src=/p/i-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-stream%E6%B5%81/image-20211028145707862-16354042291112.png width=676 height=332 srcset="/p/i-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-stream%E6%B5%81/image-20211028145707862-16354042291112_hu808df3852955e07a29697966674921f5_21210_480x0_resize_box_3.png 480w, /p/i-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-stream%E6%B5%81/image-20211028145707862-16354042291112_hu808df3852955e07a29697966674921f5_21210_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=203 data-flex-basis=488px></p></li><li><p>Predicate 判断接口</p><p>根据其中抽象方法的参数列表和返回值类型知道，我们可以在方法中对传入的参数条件判断，返回判断结果</p><p><img src=/p/i-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-stream%E6%B5%81/image-20211028145818743-16354043004393.png width=910 height=392 srcset="/p/i-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-stream%E6%B5%81/image-20211028145818743-16354043004393_hu4d08138e5ed9c2d8ebd48ea50c50ba23_29527_480x0_resize_box_3.png 480w, /p/i-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-stream%E6%B5%81/image-20211028145818743-16354043004393_hu4d08138e5ed9c2d8ebd48ea50c50ba23_29527_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=232 data-flex-basis=557px></p></li><li><p>Supplier 生产型接口</p><p>根据其中抽象方法的参数列表和返回值类型知道，我们可以在方法中创建对象，把创建好的对象返回</p></li></ul><p><img src=/p/i-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-stream%E6%B5%81/image-20211028145843368-16354043246954.png width=539 height=370 srcset="/p/i-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-stream%E6%B5%81/image-20211028145843368-16354043246954_huee90427326c3452915697bcf7520f92a_15901_480x0_resize_box_3.png 480w, /p/i-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-stream%E6%B5%81/image-20211028145843368-16354043246954_huee90427326c3452915697bcf7520f92a_15901_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=145 data-flex-basis=349px></p><h3 id=常用的默认方法>常用的默认方法</h3><ul><li><p>and</p><p>我们在使用Predicate接口时候可能需要进行判断条件的拼接。而and方法相当于是使用&&来拼接两个判断条件</p><p>例如：</p><p>打印作家中年龄大于17并且姓名的长度大于1的作家。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java></code></pre></td></tr></table></div></div></li></ul><p>List authors = getAuthors();
Stream authorStream = authors.stream();
authorStream.filter(new Predicate() {
@Override
public boolean test(Author author) {
return author.getAge()>17;
}
}.and(new Predicate() {
@Override
public boolean test(Author author) {
return author.getName().length()>1;
}
})).forEach(author -> System.out.println(author));</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>
</span></span><span class=line><span class=cl>- or
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>我们在使用Predicate接口时候可能需要进行判断条件的拼接。而or方法相当于是使用||来拼接两个判断条件。
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>例如：
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>打印作家中年龄大于17或者姓名的长度小于2的作家。
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>```java
</span></span><span class=line><span class=cl>//        打印作家中年龄大于17或者姓名的长度小于2的作家。
</span></span><span class=line><span class=cl>List&lt;Author&gt; authors = getAuthors();
</span></span><span class=line><span class=cl>authors.stream()
</span></span><span class=line><span class=cl>      .filter(new Predicate&lt;Author&gt;() {
</span></span><span class=line><span class=cl>          @Override
</span></span><span class=line><span class=cl>          public boolean test(Author author) {
</span></span><span class=line><span class=cl>              return author.getAge()&gt;17;
</span></span><span class=line><span class=cl>          }
</span></span><span class=line><span class=cl>      }.or(new Predicate&lt;Author&gt;() {
</span></span><span class=line><span class=cl>          @Override
</span></span><span class=line><span class=cl>          public boolean test(Author author) {
</span></span><span class=line><span class=cl>              return author.getName().length()&lt;2;
</span></span><span class=line><span class=cl>          }
</span></span><span class=line><span class=cl>      })).forEach(author -&gt; System.out.println(author.getName()));
</span></span></code></pre></td></tr></table></div></div><ul><li><p>negate</p><p>Predicate接口中的方法。negate方法相当于是在判断添加前面加了个! 表示取反</p><p>例如：</p><p>打印作家中年龄不大于17的作家。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//        打印作家中年龄不大于17的作家。
</span></span></span></code></pre></td></tr></table></div></div></li></ul><p>List authors = getAuthors();
authors.stream()
.filter(new Predicate() {
@Override
public boolean test(Author author) {
return author.getAge()>17;
}
}.negate()).forEach(author -> System.out.println(author.getAge()));</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>##  方法引用
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>我们在使用lambda时，如果方法体中只有一个方法的调用的话（包括构造方法）,我们可以用方法引用进一步简化代码。
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>### 推荐用法
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>我们在使用lambda时不需要考虑什么时候用方法引用，用哪种方法引用，方法引用的格式是什么。我们只需要在写完lambda方法发现方法体只有一行代码，并且是方法的调用时使用快捷键尝试是否能够转换成方法引用即可。
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>当我们方法引用使用的多了慢慢的也可以直接写出方法引用。
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>### 基本格式
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>类名或者对象名::方法名
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>### 语法详解(了解)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>#### 引用类的静态方法
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>其实就是引用类的静态方法
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>##### 格式
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>```java
</span></span><span class=line><span class=cl>类名::方法名
</span></span></code></pre></td></tr></table></div></div><h5 id=使用前提>使用前提</h5><p>如果我们在重写方法的时候，方法体中<strong>只有一行代码</strong>，并且这行代码是<strong>调用了某个类的静态方法</strong>，并且我们把要重写的<strong>抽象方法中所有的参数都按照顺序传入了这个静态方法中</strong>，这个时候我们就可以引用类的静态方法。</p><p>例如：</p><p>如下代码就可以用方法引用进行简化</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authorStream</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>authorStream</span><span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>age</span><span class=o>-&gt;</span><span class=n>String</span><span class=o>.</span><span class=na>valueOf</span><span class=o>(</span><span class=n>age</span><span class=o>));</span>
</span></span></code></pre></td></tr></table></div></div><p>注意，如果我们所重写的方法是没有参数的，调用的方法也是没有参数的也相当于符合以上规则。</p><p>优化后如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authorStream</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>authorStream</span><span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>String</span><span class=o>::</span><span class=n>valueOf</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=引用对象的实例方法>引用对象的实例方法</h4><h5 id=格式>格式</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nl>对象名:</span><span class=o>:</span><span class=n>方法名</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=使用前提-1>使用前提</h5><p>如果我们在重写方法的时候，方法体中<strong>只有一行代码</strong>，并且这行代码是<strong>调用了某个对象的成员方法</strong>，并且我们把要重写的<strong>抽象方法中所有的参数都按照顺序传入了这个成员方法中</strong>，这个时候我们就可以引用对象的实例方法</p><p>例如：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authorStream</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>StringBuilder</span> <span class=n>sb</span> <span class=o>=</span> <span class=k>new</span> <span class=n>StringBuilder</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>authorStream</span><span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>name</span><span class=o>-&gt;</span><span class=n>sb</span><span class=o>.</span><span class=na>append</span><span class=o>(</span><span class=n>name</span><span class=o>));</span>
</span></span></code></pre></td></tr></table></div></div><p>优化后：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authorStream</span> <span class=o>=</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>StringBuilder</span> <span class=n>sb</span> <span class=o>=</span> <span class=k>new</span> <span class=n>StringBuilder</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>authorStream</span><span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>sb</span><span class=o>::</span><span class=n>append</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=引用类的实例方法>引用类的实例方法</h4><h5 id=格式-1>格式</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nl>类名:</span><span class=o>:</span><span class=n>方法名</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=使用前提-2>使用前提</h5><p>如果我们在重写方法的时候，方法体中<strong>只有一行代码</strong>，并且这行代码是<strong>调用了第一个参数的成员方法</strong>，并且我们把要<strong>重写的抽象方法中剩余的所有的参数都按照顺序传入了这个成员方法中</strong>，这个时候我们就可以引用类的实例方法。</p><p>例如：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>interface</span> <span class=nc>UseString</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>String</span> <span class=nf>use</span><span class=o>(</span><span class=n>String</span> <span class=n>str</span><span class=o>,</span><span class=kt>int</span> <span class=n>start</span><span class=o>,</span><span class=kt>int</span> <span class=n>length</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=n>String</span> <span class=nf>subAuthorName</span><span class=o>(</span><span class=n>String</span> <span class=n>str</span><span class=o>,</span> <span class=n>UseString</span> <span class=n>useString</span><span class=o>){</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>start</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>length</span> <span class=o>=</span> <span class=mi>1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>useString</span><span class=o>.</span><span class=na>use</span><span class=o>(</span><span class=n>str</span><span class=o>,</span><span class=n>start</span><span class=o>,</span><span class=n>length</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>subAuthorName</span><span class=o>(</span><span class=s>&#34;三更草堂&#34;</span><span class=o>,</span> <span class=k>new</span> <span class=n>UseString</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>        <span class=kd>public</span> <span class=n>String</span> <span class=nf>use</span><span class=o>(</span><span class=n>String</span> <span class=n>str</span><span class=o>,</span> <span class=kt>int</span> <span class=n>start</span><span class=o>,</span> <span class=kt>int</span> <span class=n>length</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>str</span><span class=o>.</span><span class=na>substring</span><span class=o>(</span><span class=n>start</span><span class=o>,</span><span class=n>length</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>优化后如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>subAuthorName</span><span class=o>(</span><span class=s>&#34;三更草堂&#34;</span><span class=o>,</span> <span class=n>String</span><span class=o>::</span><span class=n>substring</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=构造器引用>构造器引用</h4><p>如果方法体中的一行代码是构造器的话就可以使用构造器引用。</p><h5 id=格式-2>格式</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nl>类名:</span><span class=o>:</span><span class=k>new</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=使用前提-3>使用前提</h5><p>如果我们在重写方法的时候，方法体中<strong>只有一行代码</strong>，并且这行代码是<strong>调用了某个类的构造方法</strong>，并且我们把<strong>要重写的抽象方法中的所有的参数都按照顺序传入了这个构造方法中</strong>，这个时候我们就可以引用构造器。</p><p>例如：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>name</span><span class=o>-&gt;</span><span class=k>new</span> <span class=n>StringBuilder</span><span class=o>(</span><span class=n>name</span><span class=o>))</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>sb</span><span class=o>-&gt;</span><span class=n>sb</span><span class=o>.</span><span class=na>append</span><span class=o>(</span><span class=s>&#34;-三更&#34;</span><span class=o>).</span><span class=na>toString</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>str</span><span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>str</span><span class=o>));</span>
</span></span></code></pre></td></tr></table></div></div><p>优化后：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getName</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>StringBuilder</span><span class=o>::</span><span class=k>new</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>sb</span><span class=o>-&gt;</span><span class=n>sb</span><span class=o>.</span><span class=na>append</span><span class=o>(</span><span class=s>&#34;-三更&#34;</span><span class=o>).</span><span class=na>toString</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>str</span><span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>str</span><span class=o>));</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=高级用法>高级用法</h2><h3 id=基本数据类型优化>基本数据类型优化</h3><p>我们之前用到的很多Stream的方法由于都使用了泛型。所以涉及到的参数和返回值都是引用数据类型。</p><p>即使我们操作的是整数小数，但是实际用的都是他们的包装类。JDK5中引入的自动装箱和自动拆箱让我们在使用对应的包装类时就好像使用基本数据类型一样方便。但是你一定要知道装箱和拆箱肯定是要消耗时间的。虽然这个时间消耗很下。但是在大量的数据不断的重复装箱拆箱的时候，你就不能无视这个时间损耗了。</p><p>所以为了让我们能够对这部分的时间消耗进行优化。Stream还提供了很多专门针对基本数据类型的方法。</p><p>例如：mapToInt,mapToLong,mapToDouble,flatMapToInt,flatMapToDouble等。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>private</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>test27</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>())</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>age</span> <span class=o>-&gt;</span> <span class=n>age</span> <span class=o>+</span> <span class=mi>10</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=n>age</span><span class=o>-&gt;</span><span class=n>age</span><span class=o>&gt;</span><span class=mi>18</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>age</span><span class=o>-&gt;</span><span class=n>age</span><span class=o>+</span><span class=mi>2</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>::</span><span class=n>println</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>mapToInt</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>())</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>age</span> <span class=o>-&gt;</span> <span class=n>age</span> <span class=o>+</span> <span class=mi>10</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=n>age</span><span class=o>-&gt;</span><span class=n>age</span><span class=o>&gt;</span><span class=mi>18</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>age</span><span class=o>-&gt;</span><span class=n>age</span><span class=o>+</span><span class=mi>2</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>::</span><span class=n>println</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=并行流>并行流</h3><p>当流中有大量元素时，我们可以使用并行流去提高操作的效率。其实并行流就是把任务分配给多个线程去完全。如果我们自己去用代码实现的话其实会非常的复杂，并且要求你对并发编程有足够的理解和认识。而如果我们使用Stream的话，我们只需要修改一个方法的调用就可以使用并行流来帮我们实现，从而提高效率。</p><p>parallel方法可以把串行流转换成并行流。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>private</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>test28</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Stream</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>stream</span> <span class=o>=</span> <span class=n>Stream</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=mi>1</span><span class=o>,</span> <span class=mi>2</span><span class=o>,</span> <span class=mi>3</span><span class=o>,</span> <span class=mi>4</span><span class=o>,</span> <span class=mi>5</span><span class=o>,</span> <span class=mi>6</span><span class=o>,</span> <span class=mi>7</span><span class=o>,</span> <span class=mi>8</span><span class=o>,</span> <span class=mi>9</span><span class=o>,</span> <span class=mi>10</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>Integer</span> <span class=n>sum</span> <span class=o>=</span> <span class=n>stream</span><span class=o>.</span><span class=na>parallel</span><span class=o>()</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>peek</span><span class=o>(</span><span class=k>new</span> <span class=n>Consumer</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>                <span class=kd>public</span> <span class=kt>void</span> <span class=nf>accept</span><span class=o>(</span><span class=n>Integer</span> <span class=n>num</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>num</span><span class=o>+</span><span class=n>Thread</span><span class=o>.</span><span class=na>currentThread</span><span class=o>().</span><span class=na>getName</span><span class=o>());</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>})</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=n>num</span> <span class=o>-&gt;</span> <span class=n>num</span> <span class=o>&gt;</span> <span class=mi>5</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>reduce</span><span class=o>((</span><span class=n>result</span><span class=o>,</span> <span class=n>ele</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>result</span> <span class=o>+</span> <span class=n>ele</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>get</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>sum</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>也可以通过parallelStream直接获取并行流对象。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span> <span class=o>=</span> <span class=n>getAuthors</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>authors</span><span class=o>.</span><span class=na>parallelStream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>author</span> <span class=o>-&gt;</span> <span class=n>author</span><span class=o>.</span><span class=na>getAge</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>age</span> <span class=o>-&gt;</span> <span class=n>age</span> <span class=o>+</span> <span class=mi>10</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=n>age</span><span class=o>-&gt;</span><span class=n>age</span><span class=o>&gt;</span><span class=mi>18</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>age</span><span class=o>-&gt;</span><span class=n>age</span><span class=o>+</span><span class=mi>2</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>::</span><span class=n>println</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=链接>链接</h2><p><a class=link href=https://objcoding.com/2019/03/04/lambda/ target=_blank rel=noopener>https://objcoding.com/2019/03/04/lambda/</a></p></section><footer class=article-footer><section class=article-tags><a href=/tags/java%E5%9F%BA%E7%A1%80/>java基础</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css integrity="sha256-J+iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s=" crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js integrity="sha256-InsNdER1b2xUewP+pKCUJpkhiqwHgqiPXDlIk7GzBu4=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI=" crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.querySelector(`.article-content`),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script></article><footer class=site-footer><section class=copyright>&copy;
2023 importzhh的小破站</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.16.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>