<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="ç»§ã€Šé¢å‘å¼€å‘è€…çš„ChatGPTæç¤ºå·¥ç¨‹ã€‹ä¸€è¯¾çˆ†ç«ä¹‹åï¼Œæ—¶éš”ä¸€ä¸ªæœˆï¼Œå´æ©è¾¾æ•™æˆå†æ¬¡æ¨å‡ºäº†å¦å¤–ä¸‰é—¨å…è´¹çš„AIè¯¾ç¨‹ï¼Œä»Šå¤©è¦è®²çš„å°±æ˜¯å…¶ä¸­è”åˆäº† LangChain ä¸€èµ·"><title>I: åŸºäºLangChainçš„å¤§è¯­è¨€æ¨¡å‹åº”ç”¨å¼€å‘(ä¸Š)</title><link rel=canonical href=https://blog.importzhh.me/p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/><link rel=stylesheet href=/scss/style.min.0d8902b26558cddb5286ea49f2a7aadd5761ed898547e29e5ab572d8c0619ba6.css><meta property="og:title" content="I: åŸºäºLangChainçš„å¤§è¯­è¨€æ¨¡å‹åº”ç”¨å¼€å‘(ä¸Š)"><meta property="og:description" content="ç»§ã€Šé¢å‘å¼€å‘è€…çš„ChatGPTæç¤ºå·¥ç¨‹ã€‹ä¸€è¯¾çˆ†ç«ä¹‹åï¼Œæ—¶éš”ä¸€ä¸ªæœˆï¼Œå´æ©è¾¾æ•™æˆå†æ¬¡æ¨å‡ºäº†å¦å¤–ä¸‰é—¨å…è´¹çš„AIè¯¾ç¨‹ï¼Œä»Šå¤©è¦è®²çš„å°±æ˜¯å…¶ä¸­è”åˆäº† LangChain ä¸€èµ·"><meta property="og:url" content="https://blog.importzhh.me/p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/"><meta property="og:site_name" content="importzhhçš„å°ç ´ç«™"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="LangChain"><meta property="article:published_time" content="2023-08-29T12:44:47+08:00"><meta property="article:modified_time" content="2023-08-29T12:44:47+08:00"><meta name=twitter:title content="I: åŸºäºLangChainçš„å¤§è¯­è¨€æ¨¡å‹åº”ç”¨å¼€å‘(ä¸Š)"><meta name=twitter:description content="ç»§ã€Šé¢å‘å¼€å‘è€…çš„ChatGPTæç¤ºå·¥ç¨‹ã€‹ä¸€è¯¾çˆ†ç«ä¹‹åï¼Œæ—¶éš”ä¸€ä¸ªæœˆï¼Œå´æ©è¾¾æ•™æˆå†æ¬¡æ¨å‡ºäº†å¦å¤–ä¸‰é—¨å…è´¹çš„AIè¯¾ç¨‹ï¼Œä»Šå¤©è¦è®²çš„å°±æ˜¯å…¶ä¸­è”åˆäº† LangChain ä¸€èµ·"><link rel="shortcut icon" href=/favicon.ico></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_huce6e906a97de2553354850eae15a0392_8624_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>ğŸ¥</span></figure><div class=site-meta><h1 class=site-name><a href=/>importzhhçš„å°ç ´ç«™</a></h1><h2 class=site-description>å®äº‹æ±‚æ˜¯ æ€å±æ€é€€æ€å˜</h2></div></header><ol class=social-menu><li><a href=https://github.com/importzhh target=_blank title=GitHub rel=me><svg width="800" height="800" viewBox="-1.65 0 259.3 259.3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid"><g><path fill="#9edcf2" d="M200.9 199.8c0 13.9-32.2 25.1-71.9 25.1-39.7.0-71.9-11.3-71.9-25.1.0-13.9 32.2-25.1 71.9-25.1C168.7 174.7 200.9 185.9 200.9 199.8zm0 0"/><g><defs><path id="SVGID_1_" d="M98.1 244.8c1.6 7.5 5.5 11.9 9.4 14.5h41.1c5-3.4 10.1-9.8 10.1-21.8v-31s.6-7.7 7.7-10.2c0 0 4.1-2.9-.3-4.5.0.0-19.5-1.6-19.5 14.4v23.6s.8 8.7-3.8 12.3v-29.2s.3-9.3 5.1-12.8c0 0 3.2-5.7-3.8-4.2.0.0-13.4 1.9-14 17.6l-.3 30h-3.2l-.3-30c-.6-15.6-14-17.6-14-17.6-7-1.6-3.8 4.2-3.8 4.2 4.8 3.5 5.1 12.8 5.1 12.8v29.5c-4.6-3.3-3.8-12.6-3.8-12.6v-23.6c0-16-19.5-14.4-19.5-14.4-4.5 1.6-.3 4.5-.3 4.5 7 2.6 7.7 10.2 7.7 10.2v21.7L98.1 244.8z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" overflow="visible"/></clipPath><path clip-path="url(#SVGID_2_)" fill="#7dbce7" d="M200.9 199.8c0 13.9-32.2 25.1-71.9 25.1-39.7.0-71.9-11.3-71.9-25.1.0-13.9 32.2-25.1 71.9-25.1C168.7 174.7 200.9 185.9 200.9 199.8zm0 0"/></g><path fill="#9edcf2" d="M46.9 125.9l-2.1 7.2s-.5 2.6 1.9 3.1c2.6-.1 2.4-2.5 2.2-3.2L46.9 125.9zm0 0"/><path fill="#010101" d="M255.8 95.6l.2-.9c-21.1-4.2-42.7-4.3-55.8-3.7 2.1-7.7 2.8-16.7 2.8-26.6.0-14.3-5.4-25.7-14-34.3 1.5-4.9 3.5-15.8-2-29.7.0.0-9.8-3.1-32.1 11.8-8.7-2.2-18-3.3-27.3-3.3-10.2.0-20.5 1.3-30.2 3.9C74.4-2.9 64.3.3 64.3.3c-6.6 16.5-2.5 28.8-1.3 31.8-7.8 8.4-12.5 19.1-12.5 32.2.0 9.9 1.1 18.8 3.9 26.5-13.2-.5-34-.3-54.4 3.8l.2.9c20.4-4.1 41.4-4.2 54.5-3.7.6 1.6 1.3 3.2 2 4.7-13 .4-35.1 2.1-56.3 8.1l.3.9c21.4-6 43.7-7.6 56.6-8 7.8 14.4 23 23.8 50.2 26.7-3.9 2.6-7.8 7-9.4 14.5-5.3 2.5-21.9 8.7-31.9-8.5.0.0-5.6-10.2-16.3-11 0 0-10.4-.2-.7 6.5.0.0 6.9 3.3 11.7 15.6.0.0 6.3 21 36.4 14.2V177s-.6 7.7-7.7 10.2c0 0-4.2 2.9.3 4.5.0.0 19.5 1.6 19.5-14.4v-23.6s-.8-9.4 3.8-12.6v38.8s-.3 9.3-5.1 12.8c0 0-3.2 5.7 3.8 4.2.0.0 13.4-1.9 14-17.6l.3-39.3h3.2l.3 39.3c.6 15.6 14 17.6 14 17.6 7 1.6 3.8-4.2 3.8-4.2-4.8-3.5-5.1-12.8-5.1-12.8v-38.5c4.6 3.6 3.8 12.3 3.8 12.3v23.6c0 16 19.5 14.4 19.5 14.4 4.5-1.6.3-4.5.3-4.5-7-2.6-7.7-10.2-7.7-10.2v-31c0-12.1-5.1-18.5-10.1-21.8 29-2.9 42.9-12.2 49.3-26.8 12.7.3 35.6 1.9 57.4 8.1l.3-.9c-21.7-6.1-44.4-7.7-57.3-8.1.6-1.5 1.1-3 1.6-4.6C212.9 91.4 234.6 91.4 255.8 95.6zm0 0"/><path fill="#f5ccb3" d="M174.6 63.7c6.2 5.7 9.9 12.5 9.9 19.8.0 34.4-25.6 35.3-57.2 35.3S70.1 114 70.1 83.5c0-7.3 3.6-14.1 9.8-19.7 10.3-9.4 27.7-4.4 47.4-4.4 19.7.0 37-5.1 47.3 4.3zm0 0"/><path fill="#fff" d="M108.3 85.3c0 9.5-5.3 17.1-11.9 17.1-6.6.0-11.9-7.7-11.9-17.1.0-9.5 5.3-17.1 11.9-17.1C103 68.1 108.3 75.8 108.3 85.3zm0 0"/><path fill="#af5c51" d="M104.5 85.5c0 6.3-3.6 11.4-7.9 11.4-4.4.0-7.9-5.1-7.9-11.4.0-6.3 3.6-11.4 7.9-11.4S104.5 79.2 104.5 85.5zm0 0"/><path fill="#fff" d="M172.2 85.3c0 9.5-5.3 17.1-11.9 17.1s-11.9-7.7-11.9-17.1c0-9.5 5.3-17.1 11.9-17.1C166.8 68.1 172.2 75.8 172.2 85.3zm0 0"/><path fill="#af5c51" d="M168.3 85.5c0 6.3-3.6 11.4-7.9 11.4-4.4.0-7.9-5.1-7.9-11.4.0-6.3 3.6-11.4 7.9-11.4C164.8 74.1 168.3 79.2 168.3 85.5zm0 0"/><path fill="#af5c51" d="M130.5 100.5c0 1.6-1.3 3-3 3-1.6.0-3-1.3-3-3s1.3-3 3-3c1.59999999999999.0 3 1.3 3 3zm0 0"/><path fill="#af5c51" d="M120.6 108c-.2-.5.1-1 .6-1.2s1 .1 1.2.6c.8 2.2 2.8 3.6 5.1 3.6s4.3-1.5 5.1-3.6c.2-.5.7-.8 1.2-.6s.8.7.6 1.2c-1 2.9-3.8 4.9-6.9 4.9C124.4 112.9 121.6 110.9 120.6 108zm0 0"/><path fill="#c4e5d9" d="M54.5 121.6c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4.0-.8.9-1.4 2.1-1.4C53.6 120.2 54.5 120.8 54.5 121.6zm0 0"/><path fill="#c4e5d9" d="M60.3 124.8c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4.0-.8.9-1.4 2.1-1.4C59.4 123.4 60.3 124 60.3 124.8zm0 0"/><path fill="#c4e5d9" d="M63.8 129c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4s.9-1.4 2.1-1.4C62.9 127.5 63.8 128.2 63.8 129zm0 0"/><path fill="#c4e5d9" d="M67 133.8c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4s.9-1.4 2.1-1.4C66.1 132.3 67 133 67 133.8zm0 0"/><path fill="#c4e5d9" d="M70.5 138.2c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4s.9-1.4 2.1-1.4C69.6 136.8 70.5 137.4 70.5 138.2zm0 0"/><path fill="#c4e5d9" d="M75.3 142.1c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4s.9-1.4 2.1-1.4C74.4 140.6 75.3 141.3 75.3 142.1zm0 0"/><path fill="#c4e5d9" d="M82 144.6c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4s.9-1.4 2.1-1.4S82 143.8 82 144.6zm0 0"/><path fill="#c4e5d9" d="M88.7 144.6c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4s.9-1.4 2.1-1.4S88.7 143.8 88.7 144.6zm0 0"/><path fill="#c4e5d9" d="M95.5 143.5c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4s.9-1.4 2.1-1.4C94.5 142.1 95.5 142.7 95.5 143.5zm0 0"/></g></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><li><a href=/links/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg><span>Links</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>æš—è‰²æ¨¡å¼</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#ä»‹ç»>ä»‹ç»</a><ol><li><a href=#langchainæ˜¯ä»€ä¹ˆ>LangChainæ˜¯ä»€ä¹ˆï¼Ÿ</a></li><li><a href=#langchainåšäº†ä»€ä¹ˆå·¥ä½œ>LangChainåšäº†ä»€ä¹ˆå·¥ä½œï¼Ÿ</a></li><li><a href=#langchainæœ‰ä»€ä¹ˆç‰¹ç‚¹>LangChainæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ</a></li></ol></li><li><a href=#æ¨¡å‹æç¤ºä¸è¾“å‡ºè§£æ>æ¨¡å‹ã€æç¤ºä¸è¾“å‡ºè§£æ</a></li><li><a href=#ç›´æ¥è°ƒç”¨api-vs-ä½¿ç”¨langchain>ç›´æ¥è°ƒç”¨API vs ä½¿ç”¨LangChain</a><ol><li><a href=#ç›´æ¥è°ƒç”¨api>ç›´æ¥è°ƒç”¨API</a><ol><li><a href=#æ­¥éª¤1å®šä¹‰è¾…åŠ©å‡½æ•°ç”¨äºè°ƒç”¨openai-api>æ­¥éª¤1ï¼šå®šä¹‰è¾…åŠ©å‡½æ•°ï¼Œç”¨äºè°ƒç”¨OpenAI API</a></li><li><a href=#æ­¥éª¤2å®šä¹‰å¾…ç¿»è¯‘æ–‡æœ¬ä¸ç¿»è¯‘é£æ ¼>æ­¥éª¤2ï¼šå®šä¹‰å¾…ç¿»è¯‘æ–‡æœ¬ä¸ç¿»è¯‘é£æ ¼</a></li><li><a href=#æ­¥éª¤3å®šä¹‰æç¤ºç”¨äºæŒ‡å®šç›®æ ‡è¯­è¨€å¹¶ä»¥å­—ç¬¦ä¸²æ’å€¼çš„å½¢å¼æ’å…¥æ–‡æœ¬ä¸é£æ ¼>æ­¥éª¤3ï¼šå®šä¹‰æç¤ºï¼Œç”¨äºæŒ‡å®šç›®æ ‡è¯­è¨€ï¼Œå¹¶ä»¥å­—ç¬¦ä¸²æ’å€¼çš„å½¢å¼æ’å…¥æ–‡æœ¬ä¸é£æ ¼</a></li><li><a href=#æ­¥éª¤4è°ƒç”¨å‡½æ•°å¹¶æ‰“å°ç»“æœ>æ­¥éª¤4ï¼šè°ƒç”¨å‡½æ•°å¹¶æ‰“å°ç»“æœ</a></li></ol></li><li><a href=#ä½¿ç”¨langchain>ä½¿ç”¨LangChain</a><ol><li><a href=#æ­¥éª¤1åˆ›å»ºchatopenaiå®ä¾‹>æ­¥éª¤1ï¼šåˆ›å»ºChatOpenAIå®ä¾‹</a></li><li><a href=#æ­¥éª¤2åˆ›å»ºæç¤ºæ¨¡æ¿å®ä¾‹>æ­¥éª¤2ï¼šåˆ›å»ºæç¤ºæ¨¡æ¿å®ä¾‹</a></li><li><a href=#æ­¥éª¤3å®šä¹‰ç¿»è¯‘é£æ ¼ä¸å¾…ç¿»è¯‘æ–‡æœ¬ä½œä¸ºè¾“å…¥å˜é‡ä¼ å…¥æç¤ºæ¨¡æ¿>æ­¥éª¤3ï¼šå®šä¹‰ç¿»è¯‘é£æ ¼ä¸å¾…ç¿»è¯‘æ–‡æœ¬ï¼Œä½œä¸ºè¾“å…¥å˜é‡ä¼ å…¥æç¤ºæ¨¡æ¿</a></li><li><a href=#æ­¥éª¤4è°ƒç”¨llmç¿»è¯‘æˆæŒ‡å®šé£æ ¼å¹¶æ‰“å°ç»“æœ>æ­¥éª¤4ï¼šè°ƒç”¨LLMç¿»è¯‘æˆæŒ‡å®šé£æ ¼ï¼Œå¹¶æ‰“å°ç»“æœ</a></li></ol></li><li><a href=#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æç¤ºæ¨¡æ¿>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æç¤ºæ¨¡æ¿ï¼Ÿ</a></li></ol></li><li><a href=#langchainè¾“å‡ºè§£æå™¨çš„ä½œç”¨>LangChainè¾“å‡ºè§£æå™¨çš„ä½œç”¨</a><ol><li><ol><li><a href=#æ­¥éª¤1æŒ‡å®šè¿”å›çš„jsonçš„æ ¼å¼è§„èŒƒ>æ­¥éª¤1ï¼šæŒ‡å®šè¿”å›çš„JSONçš„æ ¼å¼è§„èŒƒ</a></li><li><a href=#æ­¥éª¤2åˆ›å»ºè§£æå™¨å®ä¾‹è·å–æ ¼å¼æŒ‡ä»¤>æ­¥éª¤2ï¼šåˆ›å»ºè§£æå™¨å®ä¾‹ï¼Œè·å–æ ¼å¼æŒ‡ä»¤</a></li><li><a href=#æ­¥éª¤3åˆ›å»ºæç¤ºæ¨¡æ¿å®ä¾‹å°†æ–‡æœ¬å’Œæ ¼å¼æŒ‡ä»¤ä½œä¸ºè¾“å…¥å˜é‡ä¼ å…¥>æ­¥éª¤3ï¼šåˆ›å»ºæç¤ºæ¨¡æ¿å®ä¾‹ï¼Œå°†æ–‡æœ¬å’Œæ ¼å¼æŒ‡ä»¤ä½œä¸ºè¾“å…¥å˜é‡ä¼ å…¥</a></li></ol></li><li><a href=#æ­¥éª¤4è°ƒç”¨llmè§£ææ–‡æœ¬å¹¶æ‰“å°ç»“æœ>æ­¥éª¤4ï¼šè°ƒç”¨LLMè§£ææ–‡æœ¬ï¼Œå¹¶æ‰“å°ç»“æœ</a></li><li><a href=#æ­¥éª¤5å°†ç»“æœè§£æä¸ºå­—å…¸ç±»å‹å¹¶æå–ä¸é€è´§å¤©æ•°ç›¸å…³è”çš„å€¼>æ­¥éª¤5ï¼šå°†ç»“æœè§£æä¸ºå­—å…¸ç±»å‹ï¼Œå¹¶æå–ä¸é€è´§å¤©æ•°ç›¸å…³è”çš„å€¼</a></li></ol></li><li><a href=#è®°å¿†memory>è®°å¿†(Memory)</a></li><li><a href=#conversationbuffermemory>ConversationBufferMemory</a><ol><li><ol><li><a href=#æ­¥éª¤1åˆ›å»ºå¯¹è¯é“¾å®ä¾‹>æ­¥éª¤1ï¼šåˆ›å»ºå¯¹è¯é“¾å®ä¾‹</a></li><li><a href=#æ­¥éª¤2ä½¿ç”¨conversationpredictå‡½æ•°è¿›è¡Œå¯¹è¯>æ­¥éª¤2ï¼šä½¿ç”¨"conversation.predict"å‡½æ•°è¿›è¡Œå¯¹è¯</a></li><li><a href=#æ­¥éª¤3æ‰“å°å½“å‰å¯¹è¯å­˜å‚¨çš„æ‰€æœ‰å†å²æ¶ˆæ¯>æ­¥éª¤3ï¼šæ‰“å°å½“å‰å¯¹è¯å­˜å‚¨çš„æ‰€æœ‰å†å²æ¶ˆæ¯</a></li></ol></li></ol></li><li><a href=#conversationbufferwindowmemory>ConversationBufferWindowMemory</a></li><li><a href=#conversationaltokenbuffermemory>ConversationalTokenBufferMemory</a></li><li><a href=#conversationsummarybuffermemory>ConversationSummaryBufferMemory</a></li><li><a href=#å…¶ä»–è®°å¿†å­˜å‚¨ç®¡ç†ç­–ç•¥>å…¶ä»–è®°å¿†å­˜å‚¨ç®¡ç†ç­–ç•¥</a></li><li><a href=#é“¾>é“¾</a></li><li><a href=#llmé“¾llmchain>LLMé“¾ï¼ˆLLMChainï¼‰</a><ol><li><ol><li><a href=#æ­¥éª¤1åˆå§‹åŒ–è¯­è¨€æ¨¡å‹å’Œæç¤º>æ­¥éª¤1ï¼šåˆå§‹åŒ–è¯­è¨€æ¨¡å‹å’Œæç¤º</a></li><li><a href=#æ­¥éª¤2å°†äº§å“ä¼ å…¥é“¾ä¸­å¹¶è¿è¡Œé“¾>æ­¥éª¤2ï¼šå°†äº§å“ä¼ å…¥é“¾ä¸­ï¼Œå¹¶è¿è¡Œé“¾</a></li></ol></li></ol></li><li><a href=#ç®€å•é¡ºåºé“¾simplesequentialchain>ç®€å•é¡ºåºé“¾ï¼ˆSimpleSequentialChainï¼‰</a><ol><li><ol><li><a href=#æ­¥éª¤1åˆå§‹åŒ–è¯­è¨€æ¨¡å‹>æ­¥éª¤1ï¼šåˆå§‹åŒ–è¯­è¨€æ¨¡å‹</a></li><li><a href=#æ­¥éª¤2åˆ›å»ºç¬¬ä¸€ä¸ªé“¾>æ­¥éª¤2ï¼šåˆ›å»ºç¬¬ä¸€ä¸ªé“¾</a></li><li><a href=#æ­¥éª¤3åˆ›å»ºç¬¬äºŒä¸ªé“¾>æ­¥éª¤3ï¼šåˆ›å»ºç¬¬äºŒä¸ªé“¾</a></li><li><a href=#æ­¥éª¤4åˆ›å»ºç®€å•é¡ºåºé“¾å®ä¾‹å¹¶è¿è¡Œé“¾>æ­¥éª¤4ï¼šåˆ›å»ºç®€å•é¡ºåºé“¾å®ä¾‹ï¼Œå¹¶è¿è¡Œé“¾</a></li></ol></li></ol></li><li><a href=#å¸¸è§„é¡ºåºé“¾sequentialchain>å¸¸è§„é¡ºåºé“¾ï¼ˆSequentialChainï¼‰</a><ol><li><ol><li><a href=#æ­¥éª¤1åˆå§‹åŒ–è¯­è¨€æ¨¡å‹-1>æ­¥éª¤1ï¼šåˆå§‹åŒ–è¯­è¨€æ¨¡å‹</a></li><li><a href=#æ­¥éª¤2åˆ›å»ºä¸€å †å°†ä¾æ¬¡ä½¿ç”¨çš„é“¾>æ­¥éª¤2ï¼šåˆ›å»ºä¸€å †å°†ä¾æ¬¡ä½¿ç”¨çš„é“¾</a></li><li><a href=#æ­¥éª¤3å°†è¿™äº›é“¾ç»„åˆåœ¨é¡ºåºé“¾ä¸­å¹¶æŒ‡å®šè¾“å…¥ä¸è¾“å‡ºå˜é‡>æ­¥éª¤3ï¼šå°†è¿™äº›é“¾ç»„åˆåœ¨é¡ºåºé“¾ä¸­ï¼Œå¹¶æŒ‡å®šè¾“å…¥ä¸è¾“å‡ºå˜é‡</a></li><li><a href=#æ­¥éª¤4é€‰æ‹©ä¸€æ¡è¯„è®ºå¹¶å°†å…¶ä¼ é€’åˆ°æ•´ä¸ªé“¾ä¸­>æ­¥éª¤4ï¼šé€‰æ‹©ä¸€æ¡è¯„è®ºå¹¶å°†å…¶ä¼ é€’åˆ°æ•´ä¸ªé“¾ä¸­</a></li></ol></li></ol></li><li><a href=#è·¯ç”±é“¾routerchain>è·¯ç”±é“¾ï¼ˆRouterChainï¼‰</a><ol><li><ol><li><a href=#æ­¥éª¤1æä¾›å¤šä¸ªç‰¹å®šç±»å‹çš„æç¤ºæ¨¡æ¿>æ­¥éª¤1ï¼šæä¾›å¤šä¸ªç‰¹å®šç±»å‹çš„æç¤ºæ¨¡æ¿</a></li><li><a href=#æ­¥éª¤2ä¸ºæ¯ä¸ªæç¤ºæ¨¡æ¿æä¾›æ›´å¤šç›¸å…³ä¿¡æ¯>æ­¥éª¤2ï¼šä¸ºæ¯ä¸ªæç¤ºæ¨¡æ¿æä¾›æ›´å¤šç›¸å…³ä¿¡æ¯</a></li><li><a href=#æ­¥éª¤3å¯¼å…¥éœ€è¦çš„é“¾ç±»å‹å®šä¹‰ä½¿ç”¨çš„è¯­è¨€æ¨¡å‹>æ­¥éª¤3ï¼šå¯¼å…¥éœ€è¦çš„é“¾ç±»å‹ï¼Œå®šä¹‰ä½¿ç”¨çš„è¯­è¨€æ¨¡å‹</a></li><li><a href=#æ­¥éª¤4åˆ›å»ºç›®æ ‡é“¾>æ­¥éª¤4ï¼šåˆ›å»ºç›®æ ‡é“¾</a></li><li><a href=#æ­¥éª¤5åˆ›å»ºé»˜è®¤é“¾>æ­¥éª¤5ï¼šåˆ›å»ºé»˜è®¤é“¾</a></li><li><a href=#æ­¥éª¤6å®šä¹‰ä¸€ä¸ªè·¯ç”±æç¤ºæ¨¡æ¿>æ­¥éª¤6ï¼šå®šä¹‰ä¸€ä¸ªè·¯ç”±æç¤ºæ¨¡æ¿</a></li><li><a href=#æ­¥éª¤7ç»„åˆè¯­è¨€æ¨¡å‹è·¯ç”±æç¤ºæ¨¡æ¿æ„æˆè·¯ç”±é“¾>æ­¥éª¤7ï¼šç»„åˆè¯­è¨€æ¨¡å‹ã€è·¯ç”±æç¤ºæ¨¡æ¿ï¼Œæ„æˆè·¯ç”±é“¾</a></li><li><a href=#æ­¥éª¤8ç»„åˆè·¯ç”±é“¾ç›®æ ‡é“¾å’Œé»˜è®¤é“¾åˆ›å»ºæ•´æ¡é“¾>æ­¥éª¤8ï¼šç»„åˆè·¯ç”±é“¾ã€ç›®æ ‡é“¾å’Œé»˜è®¤é“¾ï¼Œåˆ›å»ºæ•´æ¡é“¾</a></li><li><a href=#æ­¥éª¤9æé—®ä¸åŒç±»å‹çš„é—®é¢˜>æ­¥éª¤9ï¼šæé—®ä¸åŒç±»å‹çš„é—®é¢˜</a></li></ol></li></ol></li><li><a href=#ç›¸å…³é“¾æ¥>ç›¸å…³é“¾æ¥</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/chatgpt/>chatgpt</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/>I: åŸºäºLangChainçš„å¤§è¯­è¨€æ¨¡å‹åº”ç”¨å¼€å‘(ä¸Š)</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Aug 29, 2023</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>é˜…è¯»æ—¶é•¿: 16 åˆ†é’Ÿ</time></div></footer></div></header><section class=article-content><p>ç»§ã€Šé¢å‘å¼€å‘è€…çš„ChatGPTæç¤ºå·¥ç¨‹ã€‹ä¸€è¯¾çˆ†ç«ä¹‹åï¼Œæ—¶éš”ä¸€ä¸ªæœˆï¼Œå´æ©è¾¾æ•™æˆå†æ¬¡æ¨å‡ºäº†å¦å¤–ä¸‰é—¨å…è´¹çš„AIè¯¾ç¨‹ï¼Œä»Šå¤©è¦è®²çš„å°±æ˜¯å…¶ä¸­è”åˆäº† LangChain ä¸€èµ·æˆè¯¾çš„â€”â€”ã€ŠåŸºäºLangChainçš„å¤§è¯­è¨€æ¨¡å‹åº”ç”¨å¼€å‘ã€‹ã€‚</p><p>è¿™é—¨è¯¾ç¨‹å°†ç³»ç»Ÿåœ°ä»‹ç» LangChain çš„å¸¸è§ç»„ä»¶åŠå…¶åº”ç”¨ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li>æ¨¡å‹ï¼Œæç¤ºå’Œè¾“å‡ºè§£æï¼ˆç¬¬1ç« èŠ‚ï¼‰</li><li>è®°å¿†ï¼ˆç¬¬2ç« èŠ‚ï¼‰</li><li>é“¾ï¼ˆç¬¬3ç« èŠ‚ï¼‰</li><li>åŸºäºæ–‡æ¡£çš„é—®ç­”ï¼ˆç¬¬4ç« èŠ‚ï¼‰</li><li>è¯„ä¼°ï¼ˆç¬¬5ç« èŠ‚ï¼‰</li><li>ä»£ç†ï¼ˆç¬¬6ç« èŠ‚ï¼‰</li></ul><p>åœ¨çº¿è§‚çœ‹é“¾æ¥ï¼š<a class=link href=%22https://www.deeplearning.ai/short-courses/langchain-for-llm-application-development/%22>https://www.deeplearning.ai/</a></p><div class=video-wrapper><iframe src="https://player.bilibili.com/player.html?as_wide=1&amp;high_quality=1&amp;page=1&bvid=BV1zu4y1Z7mc" scrolling=no frameborder=no framespacing=0 allowfullscreen></iframe></div><h2 id=ä»‹ç»>ä»‹ç»</h2><h3 id=langchainæ˜¯ä»€ä¹ˆ>LangChainæ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>ä¸€ä¸ªå¼€æºçš„ã€ç”¨äºæ„å»ºLLMåº”ç”¨çš„å¼€å‘æ¡†æ¶ã€‚</p><h3 id=langchainåšäº†ä»€ä¹ˆå·¥ä½œ>LangChainåšäº†ä»€ä¹ˆå·¥ä½œï¼Ÿ</h3><p>è™½ç„¶é€šè¿‡æç¤ºï¼ˆPromptï¼‰ï¼Œå¯ä»¥åŠ é€Ÿå¼€å‘LLMåº”ç”¨çš„è¿›ç¨‹ï¼Œä½†è¿‡ç¨‹ä¸­å¯èƒ½ä¼šäº§ç”Ÿå¾ˆå¤šèƒ¶æ°´ä»£ç ã€‚</p><p>LangChainæ‰€åšçš„ï¼Œå°±æ˜¯<strong>æŠŠå…¶ä¸­ä¸€äº›å…¬å…±çš„éƒ¨åˆ†æŠ½è±¡å‡ºæ¥</strong>ã€‚</p><h3 id=langchainæœ‰ä»€ä¹ˆç‰¹ç‚¹>LangChainæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ</h3><p><img src=/p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.09.19.png width=1218 height=792 srcset="/p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.09.19_hu735320dc350694b53f27ad438b98daf4_240133_480x0_resize_box_3.png 480w, /p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.09.19_hu735320dc350694b53f27ad438b98daf4_240133_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=153 data-flex-basis=369px></p><p><strong>LangChainæ³¨é‡ç»„åˆå’Œæ¨¡å—åŒ–</strong>ã€‚</p><p>LangChainæ‹¥æœ‰è®¸å¤šç‹¬ç«‹ç»„ä»¶ï¼Œå¯ä»¥å•ç‹¬ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä¸å…¶ä»–ç»„ä»¶ç»„åˆä½¿ç”¨ã€‚</p><p>é€šè¿‡å°†æ¨¡å—åŒ–çš„ç»„ä»¶é“¾å¼ç»„åˆï¼Œå¯ä»¥æ„å»ºä¸€ä¸ªæ›´å®Œæ•´çš„åº”ç”¨ç¨‹åºã€‚</p><p><img src=/p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.18.21.png width=2564 height=1374 srcset="/p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.18.21_hu3be2ac64ab509db36ae966eb92e60995_908875_480x0_resize_box_3.png 480w, /p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.18.21_hu3be2ac64ab509db36ae966eb92e60995_908875_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=186 data-flex-basis=447px></p><h2 id=æ¨¡å‹æç¤ºä¸è¾“å‡ºè§£æ>æ¨¡å‹ã€æç¤ºä¸è¾“å‡ºè§£æ</h2><p>å…ˆç†æ¸…å‡ ä¸ªæ¦‚å¿µï¼š</p><div class=table-wrapper><table><thead><tr><th>æ¦‚å¿µ</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>æ¨¡å‹</td><td>è¯­è¨€æ¨¡å‹ï¼Œç”¨äºç”Ÿæˆæ–‡æœ¬ã€‚</td></tr><tr><td>æç¤º</td><td>ç”¨äºå‘æ¨¡å‹ä¼ é€’ä¿¡æ¯ã€‚</td></tr><tr><td>è§£æå™¨</td><td>æ¥æ”¶æ¨¡å‹çš„è¾“å‡ºï¼Œå¹¶å°†å…¶è§£ææˆæ›´ç»“æ„åŒ–çš„æ ¼å¼ã€‚</td></tr></tbody></table></div><p>LangChainæä¾›äº†ä¸€å¥—ç®€å•çš„æŠ½è±¡ï¼Œç”¨äºç®€åŒ–åŸå…ˆéœ€è¦å¯¹æ¨¡å‹åå¤æç¤ºä¸è§£æçš„æ“ä½œã€‚</p><h2 id=ç›´æ¥è°ƒç”¨api-vs-ä½¿ç”¨langchain>ç›´æ¥è°ƒç”¨API vs ä½¿ç”¨LangChain</h2><p>ä½¿ç”¨LangChainè®¿é—®ChatGPTï¼Œä¸ç›´æ¥ä½¿ç”¨OpenAI APIæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿè®©æˆ‘ä»¬ç”¨ä¸€ä¸ªä¾‹å­æ¥å¯¹æ¯”ä¸€ä¸‹ã€‚</p><p>ä»»åŠ¡æ˜¯å°†æ–‡æœ¬æŒ‰æŒ‡å®šé£æ ¼ç¿»è¯‘æˆç›®æ ‡è¯­è¨€ã€‚</p><h3 id=ç›´æ¥è°ƒç”¨api>ç›´æ¥è°ƒç”¨API</h3><h4 id=æ­¥éª¤1å®šä¹‰è¾…åŠ©å‡½æ•°ç”¨äºè°ƒç”¨openai-api>æ­¥éª¤1ï¼šå®šä¹‰è¾…åŠ©å‡½æ•°ï¼Œç”¨äºè°ƒç”¨OpenAI API</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_completion</span><span class=p>(</span><span class=n>prompt</span><span class=p>,</span> <span class=n>model</span><span class=o>=</span><span class=s2>&#34;gpt-3.5-turbo&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>messages</span> <span class=o>=</span> <span class=p>[{</span><span class=s2>&#34;role&#34;</span><span class=p>:</span> <span class=s2>&#34;user&#34;</span><span class=p>,</span> <span class=s2>&#34;content&#34;</span><span class=p>:</span> <span class=n>prompt</span><span class=p>}]</span>
</span></span><span class=line><span class=cl>    <span class=n>response</span> <span class=o>=</span> <span class=n>openai</span><span class=o>.</span><span class=n>ChatCompletion</span><span class=o>.</span><span class=n>create</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>model</span><span class=o>=</span><span class=n>model</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>messages</span><span class=o>=</span><span class=n>messages</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>temperature</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>response</span><span class=o>.</span><span class=n>choices</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>message</span><span class=p>[</span><span class=s2>&#34;content&#34;</span><span class=p>]</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤2å®šä¹‰å¾…ç¿»è¯‘æ–‡æœ¬ä¸ç¿»è¯‘é£æ ¼>æ­¥éª¤2ï¼šå®šä¹‰å¾…ç¿»è¯‘æ–‡æœ¬ä¸ç¿»è¯‘é£æ ¼</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># æ–‡æœ¬</span>
</span></span><span class=line><span class=cl><span class=n>customer_email</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>Arrr, I be fuming that me blender lid </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>flew off and splattered me kitchen walls </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>with smoothie! And to make matters worse,</span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>the warranty don&#39;t cover the cost of </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>cleaning up me kitchen. I need yer help </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>right now, matey!
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># é£æ ¼</span>
</span></span><span class=line><span class=cl><span class=n>style</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34;American English </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>in a calm and respectful tone
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤3å®šä¹‰æç¤ºç”¨äºæŒ‡å®šç›®æ ‡è¯­è¨€å¹¶ä»¥å­—ç¬¦ä¸²æ’å€¼çš„å½¢å¼æ’å…¥æ–‡æœ¬ä¸é£æ ¼>æ­¥éª¤3ï¼šå®šä¹‰æç¤ºï¼Œç”¨äºæŒ‡å®šç›®æ ‡è¯­è¨€ï¼Œå¹¶ä»¥å­—ç¬¦ä¸²æ’å€¼çš„å½¢å¼æ’å…¥æ–‡æœ¬ä¸é£æ ¼</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>prompt</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;&#34;&#34;Translate the text </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>that is delimited by triple backticks 
</span></span></span><span class=line><span class=cl><span class=s2>into a style that is </span><span class=si>{</span><span class=n>style</span><span class=si>}</span><span class=s2>.
</span></span></span><span class=line><span class=cl><span class=s2>text: ```</span><span class=si>{</span><span class=n>customer_email</span><span class=si>}</span><span class=s2>```
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤4è°ƒç”¨å‡½æ•°å¹¶æ‰“å°ç»“æœ>æ­¥éª¤4ï¼šè°ƒç”¨å‡½æ•°å¹¶æ‰“å°ç»“æœ</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>response</span> <span class=o>=</span> <span class=n>get_completion</span><span class=p>(</span><span class=n>prompt</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>response</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=ä½¿ç”¨langchain>ä½¿ç”¨LangChain</h3><h4 id=æ­¥éª¤1åˆ›å»ºchatopenaiå®ä¾‹>æ­¥éª¤1ï¼šåˆ›å»ºChatOpenAIå®ä¾‹</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># å¯¼å…¥ChatOpenAIï¼Œè¿™æ˜¯LangChainå¯¹ChatGPT APIè®¿é—®çš„æŠ½è±¡</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>langchain.chat_models</span> <span class=kn>import</span> <span class=n>ChatOpenAI</span>
</span></span><span class=line><span class=cl><span class=c1># è¦æ§åˆ¶ LLM ç”Ÿæˆæ–‡æœ¬çš„éšæœºæ€§å’Œåˆ›é€ æ€§ï¼Œè¯·ä½¿ç”¨ temperature = 0.0</span>
</span></span><span class=line><span class=cl><span class=n>chat</span> <span class=o>=</span> <span class=n>ChatOpenAI</span><span class=p>(</span><span class=n>temperature</span><span class=o>=</span><span class=mf>0.0</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤2åˆ›å»ºæç¤ºæ¨¡æ¿å®ä¾‹>æ­¥éª¤2ï¼šåˆ›å»ºæç¤ºæ¨¡æ¿å®ä¾‹</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œç”¨äºæŒ‡å®šç›®æ ‡è¯­è¨€ï¼Œæ‹¥æœ‰ä¸¤ä¸ªè¾“å…¥å˜é‡ï¼Œ&#34;style&#34;å’Œ&#34;text&#34;</span>
</span></span><span class=line><span class=cl><span class=n>template_string</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34;Translate the text </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>that is delimited by triple backticks </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>into a style that is </span><span class=si>{style}</span><span class=s2>. </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>text: ```</span><span class=si>{text}</span><span class=s2>```
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># æ„å»ºä¸€ä¸ªChatPromptTemplateå®ä¾‹ï¼Œç”¨äºæ¨¡æ¿çš„é‡ç”¨</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>langchain.prompts</span> <span class=kn>import</span> <span class=n>ChatPromptTemplate</span>
</span></span><span class=line><span class=cl><span class=n>prompt_template</span> <span class=o>=</span> <span class=n>ChatPromptTemplate</span><span class=o>.</span><span class=n>from_template</span><span class=p>(</span><span class=n>template_string</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤3å®šä¹‰ç¿»è¯‘é£æ ¼ä¸å¾…ç¿»è¯‘æ–‡æœ¬ä½œä¸ºè¾“å…¥å˜é‡ä¼ å…¥æç¤ºæ¨¡æ¿>æ­¥éª¤3ï¼šå®šä¹‰ç¿»è¯‘é£æ ¼ä¸å¾…ç¿»è¯‘æ–‡æœ¬ï¼Œä½œä¸ºè¾“å…¥å˜é‡ä¼ å…¥æç¤ºæ¨¡æ¿</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># é£æ ¼</span>
</span></span><span class=line><span class=cl><span class=n>customer_style</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34;American English </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>in a calm and respectful tone
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ–‡æœ¬</span>
</span></span><span class=line><span class=cl><span class=n>customer_email</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>Arrr, I be fuming that me blender lid </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>flew off and splattered me kitchen walls </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>with smoothie! And to make matters worse, </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>the warranty don&#39;t cover the cost of </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>cleaning up me kitchen. I need yer help </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>right now, matey!
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å°†é£æ ¼å’Œæ–‡æœ¬ä½œä¸ºè¾“å…¥å˜é‡ä¼ å…¥æç¤ºæ¨¡æ¿</span>
</span></span><span class=line><span class=cl><span class=n>customer_messages</span> <span class=o>=</span> <span class=n>prompt_template</span><span class=o>.</span><span class=n>format_messages</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                    <span class=n>style</span><span class=o>=</span><span class=n>customer_style</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>text</span><span class=o>=</span><span class=n>customer_email</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤4è°ƒç”¨llmç¿»è¯‘æˆæŒ‡å®šé£æ ¼å¹¶æ‰“å°ç»“æœ>æ­¥éª¤4ï¼šè°ƒç”¨LLMç¿»è¯‘æˆæŒ‡å®šé£æ ¼ï¼Œå¹¶æ‰“å°ç»“æœ</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>customer_response</span> <span class=o>=</span> <span class=n>chat</span><span class=p>(</span><span class=n>customer_messages</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>customer_response</span><span class=o>.</span><span class=n>content</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>å¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨LangChainè®¿é—®ChatGPTï¼Œä¸ç›´æ¥ä½¿ç”¨OpenAI APIç›¸æ¯”ï¼Œä¸»è¦åŒºåˆ«æ˜¯ï¼š</p><ul><li>å¯¹ChatGPT APIçš„è®¿é—®åšäº†æŠ½è±¡ï¼Œç®€åŒ–è°ƒç”¨</li><li>æ”¹ç”¨æç¤ºæ¨¡æ¿ï¼Œè€Œä¸æ˜¯"f"å­—ç¬¦ä¸²ï¼Œæ–¹ä¾¿é‡ç”¨</li></ul><h3 id=ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æç¤ºæ¨¡æ¿>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æç¤ºæ¨¡æ¿ï¼Ÿ</h3><p>éšç€æ„å»ºåº”ç”¨ç¨‹åºçš„å¤æ‚åº¦å¢åŠ æ—¶ï¼Œæç¤ºå¯èƒ½ä¼šéœ€è¦æ›´é•¿ä¸”æ›´è¯¦ç»†ã€‚</p><p><strong>æç¤ºæ¨¡æ¿ä½œä¸ºä¸€ç§æŠ½è±¡ï¼Œå¯ä»¥è®©æˆ‘ä»¬é€‚æ—¶é‡ç”¨æç¤º</strong>ã€‚</p><p>æ­¤å¤–ï¼ŒLangChainè¿˜ä¸ºä¸€äº›å¸¸è§æ“ä½œæä¾›äº†æç¤ºï¼Œå¦‚æ‘˜è¦ã€å›ç­”é—®é¢˜ã€è¿æ¥åˆ°SQLæ•°æ®åº“æˆ–è¿æ¥åˆ°ä¸åŒçš„APIã€‚</p><p>é€šè¿‡ä½¿ç”¨LangChainçš„å†…ç½®æç¤ºï¼Œå¯ä»¥å¿«é€Ÿåœ°ä½¿åº”ç”¨ç¨‹åºè¿è¡Œï¼Œè€Œæ— éœ€è®¾è®¡è‡ªå·±çš„æç¤ºã€‚</p><h2 id=langchainè¾“å‡ºè§£æå™¨çš„ä½œç”¨>LangChainè¾“å‡ºè§£æå™¨çš„ä½œç”¨</h2><p><img src=/p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.29.32.png width=1544 height=1508 srcset="/p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.29.32_hu8a097bdeec505056b142e7ca9c926294_1166905_480x0_resize_box_3.png 480w, /p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.29.32_hu8a097bdeec505056b142e7ca9c926294_1166905_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=102 data-flex-basis=245px></p><p><strong>è¾“å‡ºè§£æå™¨å¯ä»¥æå–æ¨¡å‹è¾“å‡ºä¸­çš„ç‰¹å®šå­—æ®µï¼Œè§£æä¸ºæ›´æ˜“äºå¤„ç†çš„æ ¼å¼</strong>ã€‚</p><p>æ¯”å¦‚ï¼Œè§£æä¸º Python å­—å…¸ï¼š</p><h4 id=æ­¥éª¤1æŒ‡å®šè¿”å›çš„jsonçš„æ ¼å¼è§„èŒƒ>æ­¥éª¤1ï¼šæŒ‡å®šè¿”å›çš„JSONçš„æ ¼å¼è§„èŒƒ</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>langchain.output_parsers</span> <span class=kn>import</span> <span class=n>ResponseSchema</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>langchain.output_parsers</span> <span class=kn>import</span> <span class=n>StructuredOutputParser</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç¤¼ç‰©è§„èŒƒ</span>
</span></span><span class=line><span class=cl><span class=n>gift_schema</span> <span class=o>=</span> <span class=n>ResponseSchema</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s2>&#34;gift&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                             <span class=n>description</span><span class=o>=</span><span class=s2>&#34;Was the item purchased</span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>                             as a gift for someone else? </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>                             Answer True if yes,</span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>                             False if not or unknown.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># é€è´§æ—¥æœŸè§„èŒƒ</span>
</span></span><span class=line><span class=cl><span class=n>delivery_days_schema</span> <span class=o>=</span> <span class=n>ResponseSchema</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s2>&#34;delivery_days&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                                      <span class=n>description</span><span class=o>=</span><span class=s2>&#34;How many days</span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>                                      did it take for the product</span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>                                      to arrive? If this </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>                                      information is not found,</span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>                                      output -1.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># ä»·æ ¼å€¼è§„èŒƒ</span>
</span></span><span class=line><span class=cl><span class=n>price_value_schema</span> <span class=o>=</span> <span class=n>ResponseSchema</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s2>&#34;price_value&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                                    <span class=n>description</span><span class=o>=</span><span class=s2>&#34;Extract any</span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>                                    sentences about the value or </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>                                    price, and output them as a </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>                                    comma separated Python list.&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤2åˆ›å»ºè§£æå™¨å®ä¾‹è·å–æ ¼å¼æŒ‡ä»¤>æ­¥éª¤2ï¼šåˆ›å»ºè§£æå™¨å®ä¾‹ï¼Œè·å–æ ¼å¼æŒ‡ä»¤</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># å°†æ ¼å¼è§„èŒƒæ”¾åˆ°ä¸€ä¸ªåˆ—è¡¨é‡Œ</span>
</span></span><span class=line><span class=cl><span class=n>response_schemas</span> <span class=o>=</span> <span class=p>[</span><span class=n>gift_schema</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                    <span class=n>delivery_days_schema</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>price_value_schema</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=c1># æ„å»ºä¸€ä¸ªStructuredOutputParserå®ä¾‹</span>
</span></span><span class=line><span class=cl><span class=n>output_parser</span> <span class=o>=</span> <span class=n>StructuredOutputParser</span><span class=o>.</span><span class=n>from_response_schemas</span><span class=p>(</span><span class=n>response_schemas</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># è·å–å°†å‘é€ç»™LLMçš„æ ¼å¼æŒ‡ä»¤</span>
</span></span><span class=line><span class=cl><span class=n>format_instructions</span> <span class=o>=</span> <span class=n>output_parser</span><span class=o>.</span><span class=n>get_format_instructions</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>format_instructions</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>æ ¼å¼æŒ‡ä»¤ç”¨äºè®©LLMç”ŸæˆæŒ‡å®šçš„å†…å®¹æ ¼å¼ï¼Œä»¥ä¾¿è§£æå™¨å¯ä»¥è§£æï¼Œæ‰“å°å¾—åˆ°å…¶å†…å®¹å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>The output should be a markdown code snippet formatted in the following schema, including the leading and trailing &#34;\`\`\`json&#34; and &#34;\`\`\`&#34;:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>```json
</span></span><span class=line><span class=cl>{
</span></span><span class=line><span class=cl>&#34;gift&#34;: string  // Was the item purchased as a gift for someone else? Answer True if yes, False if not or unknown.
</span></span><span class=line><span class=cl>&#34;delivery_days&#34;: string  // How many days did it take for the product to arrive? If this information is not found,                                      output -1.
</span></span><span class=line><span class=cl>&#34;price_value&#34;: string  // Extract any sentences about the value or price, and output them as a comma separated Python list.
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>\```
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤3åˆ›å»ºæç¤ºæ¨¡æ¿å®ä¾‹å°†æ–‡æœ¬å’Œæ ¼å¼æŒ‡ä»¤ä½œä¸ºè¾“å…¥å˜é‡ä¼ å…¥>æ­¥éª¤3ï¼šåˆ›å»ºæç¤ºæ¨¡æ¿å®ä¾‹ï¼Œå°†æ–‡æœ¬å’Œæ ¼å¼æŒ‡ä»¤ä½œä¸ºè¾“å…¥å˜é‡ä¼ å…¥</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># æç¤º</span>
</span></span><span class=line><span class=cl><span class=n>review_template_2</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34;</span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>For the following text, extract the following information:
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>gift: Was the item purchased as a gift for someone else? </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>Answer True if yes, False if not or unknown.
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>delivery_days: How many days did it take for the product</span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>to arrive? If this information is not found, output -1.
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>price_value: Extract any sentences about the value or price,</span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>and output them as a comma separated Python list.
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>text: </span><span class=si>{text}</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2></span><span class=si>{format_instructions}</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ„å»ºä¸€ä¸ªChatPromptTemplateå®ä¾‹ï¼Œç”¨äºæ¨¡æ¿çš„é‡ç”¨</span>
</span></span><span class=line><span class=cl><span class=n>prompt</span> <span class=o>=</span> <span class=n>ChatPromptTemplate</span><span class=o>.</span><span class=n>from_template</span><span class=p>(</span><span class=n>template</span><span class=o>=</span><span class=n>review_template_2</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># å°†æ–‡æœ¬å’Œæ ¼å¼æŒ‡ä»¤ä½œä¸ºè¾“å…¥å˜é‡ä¼ å…¥</span>
</span></span><span class=line><span class=cl><span class=n>messages</span> <span class=o>=</span> <span class=n>prompt</span><span class=o>.</span><span class=n>format_messages</span><span class=p>(</span><span class=n>text</span><span class=o>=</span><span class=n>customer_review</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                                <span class=n>format_instructions</span><span class=o>=</span><span class=n>format_instructions</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=æ­¥éª¤4è°ƒç”¨llmè§£ææ–‡æœ¬å¹¶æ‰“å°ç»“æœ>æ­¥éª¤4ï¼šè°ƒç”¨LLMè§£ææ–‡æœ¬ï¼Œå¹¶æ‰“å°ç»“æœ</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>response</span> <span class=o>=</span> <span class=n>chat</span><span class=p>(</span><span class=n>messages</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>content</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>æ‰“å°ç»“æœå¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=err>```</span><span class=n>json</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;gift&#34;</span><span class=p>:</span> <span class=n>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;delivery_days&#34;</span><span class=p>:</span> <span class=s2>&#34;2&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;price_value&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;It&#39;s slightly more expensive than the other leaf blowers out there, but I think it&#39;s worth it for the extra features.&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>\<span class=err>```</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=æ­¥éª¤5å°†ç»“æœè§£æä¸ºå­—å…¸ç±»å‹å¹¶æå–ä¸é€è´§å¤©æ•°ç›¸å…³è”çš„å€¼>æ­¥éª¤5ï¼šå°†ç»“æœè§£æä¸ºå­—å…¸ç±»å‹ï¼Œå¹¶æå–ä¸é€è´§å¤©æ•°ç›¸å…³è”çš„å€¼</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>output_dict</span> <span class=o>=</span> <span class=n>output_parser</span><span class=o>.</span><span class=n>parse</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>content</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>output_dict</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;delivery_days&#39;</span><span class=p>))</span>
</span></span></code></pre></td></tr></table></div></div><p>æå–åˆ°çš„å€¼å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&#39;2&#39;
</span></span></code></pre></td></tr></table></div></div><h2 id=è®°å¿†memory>è®°å¿†(Memory)</h2><p><img src=/p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.32.58.png width=1286 height=1636 srcset="/p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.32.58_hu7ea1315de7147e74b2875cf34fcfb480_765235_480x0_resize_box_3.png 480w, /p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.32.58_hu7ea1315de7147e74b2875cf34fcfb480_765235_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=78 data-flex-basis=188px></p><p>å½“æˆ‘ä»¬ä¸æ¨¡å‹äº’åŠ¨æ—¶ï¼Œç”±äºæ¨¡å‹æœ¬èº«æ˜¯æ— çŠ¶æ€çš„ï¼Œå› æ­¤å®ƒé€šå¸¸æ— æ³•è®°ä½ä¹‹å‰å¯¹è¯çš„å†å²æ¶ˆæ¯ã€‚</p><p>æ¯ä¸ªè¯·æ±‚äº¤äº’ï¼Œæ¯æ¬¡è°ƒç”¨APIéƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œè¿™å¯¹äºæ„å»ºæµç•…çš„å¯¹è¯åº”ç”¨æ˜¯ä¸ªé—®é¢˜ã€‚</p><p>ä¸ºæ­¤ï¼ŒLangChainæä¾›äº†å¤šç§è®°å¿†å­˜å‚¨ç®¡ç†ç­–ç•¥ã€‚</p><p><img src=/p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.32.13.png width=1264 height=1358 srcset="/p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.32.13_hu9665565be476273cf2c1f5198a903ab7_466143_480x0_resize_box_3.png 480w, /p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.32.13_hu9665565be476273cf2c1f5198a903ab7_466143_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=93 data-flex-basis=223px></p><div class=table-wrapper><table><thead><tr><th>ç­–ç•¥</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>ConversationBufferMemory</td><td>å­˜å‚¨å®Œæ•´çš„å¯¹è¯å†å²</td></tr><tr><td>ConversationBufferWindowMemory</td><td>åªä¿ç•™æœ€åå‡ è½®å¯¹è¯</td></tr><tr><td>ConversationalTokenBufferMemory</td><td>é™åˆ¶å­˜å‚¨çš„ä»¤ç‰Œæ•°é‡</td></tr><tr><td>ConversationSummaryBufferMemory</td><td>ä½¿ç”¨æ‘˜è¦å­˜å‚¨å¯¹è¯å†å²</td></tr></tbody></table></div><h2 id=conversationbuffermemory>ConversationBufferMemory</h2><p>ConversationBufferMemoryå¯ç”¨äºä¸´æ—¶å­˜å‚¨å®Œæ•´çš„å¯¹è¯å†å²ã€‚</p><p>ä¾‹å­å¦‚ä¸‹ï¼š</p><h4 id=æ­¥éª¤1åˆ›å»ºå¯¹è¯é“¾å®ä¾‹>æ­¥éª¤1ï¼šåˆ›å»ºå¯¹è¯é“¾å®ä¾‹</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>langchain.chat_models</span> <span class=kn>import</span> <span class=n>ChatOpenAI</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>langchain.chains</span> <span class=kn>import</span> <span class=n>ConversationChain</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>langchain.memory</span> <span class=kn>import</span> <span class=n>ConversationBufferMemory</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>llm</span> <span class=o>=</span> <span class=n>ChatOpenAI</span><span class=p>(</span><span class=n>temperature</span><span class=o>=</span><span class=mf>0.0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>memory</span> <span class=o>=</span> <span class=n>ConversationBufferMemory</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>conversation</span> <span class=o>=</span> <span class=n>ConversationChain</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>llm</span><span class=o>=</span><span class=n>llm</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=n>memory</span> <span class=o>=</span> <span class=n>memory</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>verbose</span><span class=o>=</span><span class=kc>True</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤2ä½¿ç”¨conversationpredictå‡½æ•°è¿›è¡Œå¯¹è¯>æ­¥éª¤2ï¼šä½¿ç”¨"conversation.predict"å‡½æ•°è¿›è¡Œå¯¹è¯</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>conversation</span><span class=o>.</span><span class=n>predict</span><span class=p>(</span><span class=nb>input</span><span class=o>=</span><span class=s2>&#34;Hi, my name is Andrew&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>conversation</span><span class=o>.</span><span class=n>predict</span><span class=p>(</span><span class=nb>input</span><span class=o>=</span><span class=s2>&#34;What is 1+1?&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>conversation</span><span class=o>.</span><span class=n>predict</span><span class=p>(</span><span class=nb>input</span><span class=o>=</span><span class=s2>&#34;What is my name?&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¹Ÿå¯ä½¿ç”¨"memory.save_context"ç›´æ¥å¾€å­˜å‚¨é‡Œæ·»åŠ æ–°å†…å®¹</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>memory</span><span class=o>.</span><span class=n>save_context</span><span class=p>({</span><span class=s2>&#34;input&#34;</span><span class=p>:</span> <span class=s2>&#34;Not much, just hanging&#34;</span><span class=p>},</span> 
</span></span><span class=line><span class=cl>                    <span class=p>{</span><span class=s2>&#34;output&#34;</span><span class=p>:</span> <span class=s2>&#34;Cool&#34;</span><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>ç”±äºæˆ‘ä»¬æŠŠ"verbose"å˜é‡æ”¹æˆ"Trueï¼Œå› æ­¤å¯ä»¥çœ‹åˆ°LangChainè¿è¡Œæ—¶çš„æ›´å¤šç»†èŠ‚ï¼š</p><blockquote><p>> Entering new ConversationChain chain&mldr;</p><p>Prompt after formatting:</p><p>The following is a friendly conversation between a human and an AI. The AI is talkative and provides lots of specific details from its context. If the AI does not know the answer to a question, it truthfully says it does not know.</p><p>Current conversation:</p><p>Human: Hi, my name is Andrew</p><p>AI: Hello Andrew, it&rsquo;s nice to meet you. My name is AI. How can I assist you today?</p><p>Human: What is 1+1?</p><p>AI: The answer to 1+1 is 2.</p><p>Human: What is my name?</p><p>AI:</p><p>> Finished chain.</p><p>&lsquo;Your name is Andrew, as you mentioned earlier.&rsquo;</p></blockquote><p>å¯ä»¥çœ‹åˆ°ï¼Œè®°å¿†å­˜å‚¨åŒ…å«äº†åˆ°ç›®å‰ä¸ºæ­¢çš„æ‰€æœ‰å¯¹è¯æ¶ˆæ¯ï¼Œå¹¶ç”¨ä½œLLMçš„è¾“å…¥æˆ–é¢å¤–ä¸Šä¸‹æ–‡ã€‚</p><p>è¿™æ ·ï¼Œå®ƒåœ¨ç”Ÿæˆè¾“å‡ºæ—¶ï¼Œå°±å¯ä»¥åŸºäºä¹‹å‰æ‰€è¯´è¿‡çš„ä¼šè¯å†…å®¹ï¼Œå†ç”Ÿæˆæ–°çš„ä¼šè¯ï¼Œè®©ä½ æ„Ÿè§‰å®ƒå¥½åƒâ€œè®°å¾—â€ä½ è¯´è¿‡çš„è¯ã€‚</p><h4 id=æ­¥éª¤3æ‰“å°å½“å‰å¯¹è¯å­˜å‚¨çš„æ‰€æœ‰å†å²æ¶ˆæ¯>æ­¥éª¤3ï¼šæ‰“å°å½“å‰å¯¹è¯å­˜å‚¨çš„æ‰€æœ‰å†å²æ¶ˆæ¯</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>memory</span><span class=o>.</span><span class=n>buffer</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>Human: Hi, my name is Andrew</p><p>AI: Hello Andrew, it&rsquo;s nice to meet you. My name is AI. How can I assist you today?</p><p>Human: What is 1+1?</p><p>AI: The answer to 1+1 is 2.</p><p>Human: What is my name?</p><p>AI: Your name is Andrew, as you mentioned earlier.</p></blockquote><p>æˆ–è€…ï¼Œ</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>memory</span><span class=o>.</span><span class=n>load_memory_variables</span><span class=p>({}))</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>{&lsquo;history&rsquo;: &ldquo;Human: Hi, my name is Andrew\nAI: Hello Andrew, it&rsquo;s nice to meet you. My name is AI. How can I assist you today?\nHuman: What is 1+1?\nAI: The answer to 1+1 is 2.\nHuman: What is my name?\nAI: Your name is Andrew, as you mentioned earlier.&rdquo;}</p></blockquote><p>ä½†éšç€å¯¹è¯çš„è¿›è¡Œï¼Œè®°å¿†å­˜å‚¨çš„å¤§å°ä¼šå¢åŠ ï¼Œå‘é€Tokençš„æˆæœ¬ä¹Ÿä¼šå¢åŠ ï¼Œä¸ºæ­¤ï¼ŒLangChainæä¾›äº†å¦å¤–å‡ ç§ç­–ç•¥ã€‚</p><h2 id=conversationbufferwindowmemory>ConversationBufferWindowMemory</h2><p>ConversationBufferWindowMemoryåªä¿ç•™çª—å£è®°å¿†ï¼Œä¹Ÿå³åªä¿ç•™æœ€åå‡ è½®å¯¹è¯ã€‚å®ƒæœ‰ä¸€ä¸ªå˜é‡kï¼Œè¡¨ç¤ºæƒ³è®°ä½æœ€åå‡ è½®å¯¹è¯ã€‚</p><p>æ¯”å¦‚ï¼Œå½“kç­‰äº1æ—¶ï¼Œè¡¨ç¤ºä»…è®°ä½æœ€åä¸€è½®å¯¹è¯ã€‚</p><p>ä¾‹å­å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>langchain.memory</span> <span class=kn>import</span> <span class=n>ConversationBufferWindowMemory</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>llm</span> <span class=o>=</span> <span class=n>ChatOpenAI</span><span class=p>(</span><span class=n>temperature</span><span class=o>=</span><span class=mf>0.0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>memory</span> <span class=o>=</span> <span class=n>ConversationBufferWindowMemory</span><span class=p>(</span><span class=n>k</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>conversation</span> <span class=o>=</span> <span class=n>ConversationChain</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>llm</span><span class=o>=</span><span class=n>llm</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=n>memory</span> <span class=o>=</span> <span class=n>memory</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>verbose</span><span class=o>=</span><span class=kc>False</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>æˆ‘ä»¬å¯ä»¥åœ¨è¿›è¡Œå‡ è½®å¯¹è¯ä¹‹åï¼Œå°è¯•è®©å…¶å›é¡¾ä¹‹å‰çš„å¯¹è¯å†…å®¹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>conversation</span><span class=o>.</span><span class=n>predict</span><span class=p>(</span><span class=nb>input</span><span class=o>=</span><span class=s2>&#34;Hi, my name is Andrew&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># &#34;Hello Andrew, it&#39;s nice to meet you. My name is AI. How can I assist you today?&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>conversation</span><span class=o>.</span><span class=n>predict</span><span class=p>(</span><span class=nb>input</span><span class=o>=</span><span class=s2>&#34;What is 1+1?&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># &#39;The answer to 1+1 is 2.&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>conversation</span><span class=o>.</span><span class=n>predict</span><span class=p>(</span><span class=nb>input</span><span class=o>=</span><span class=s2>&#34;What is my name?&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># &#34;I&#39;m sorry, I don&#39;t have access to that information. Could you please tell me your name?&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>è¿™æ—¶æˆ‘ä»¬ä¼šå‘ç°ï¼Œç”±äºçª—å£è®°å¿†çš„é™åˆ¶ï¼Œå®ƒä¼šä¸¢å¤±äº†å‰é¢æœ‰å…³åå­—çš„äº¤æµï¼Œä»è€Œæ— æ³•è¯´å‡ºæˆ‘çš„åå­—ã€‚</p><p>è¿™ä¸ªåŠŸèƒ½å¯ä»¥é˜²æ­¢è®°å¿†å­˜å‚¨é‡éšç€å¯¹è¯çš„è¿›è¡Œè€Œæ— é™å¢é•¿ã€‚å½“ç„¶åœ¨å®é™…ä½¿ç”¨æ—¶ï¼Œkä¸ä¼šè®¾ä¸º1ï¼Œè€Œæ˜¯ä¼šé€šå¸¸è®¾ç½®ä¸ºä¸€ä¸ªè¾ƒå¤§çš„æ•°å­—ã€‚</p><h2 id=conversationaltokenbuffermemory>ConversationalTokenBufferMemory</h2><p>å¾ˆå¤šLLMå®šä»·æ˜¯åŸºäºTokençš„ï¼ŒTokenè°ƒç”¨çš„æ•°é‡ç›´æ¥åæ˜ äº†LLMè°ƒç”¨çš„æˆæœ¬ã€‚</p><p>ä½¿ç”¨ConversationalTokenBufferMemoryï¼Œå¯ä»¥é™åˆ¶ä¿å­˜åœ¨è®°å¿†å­˜å‚¨çš„ä»¤ç‰Œæ•°é‡ã€‚</p><p>ä¾‹å­å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>langchain.memory</span> <span class=kn>import</span> <span class=n>ConversationTokenBufferMemory</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>langchain.llms</span> <span class=kn>import</span> <span class=n>OpenAI</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>llm</span> <span class=o>=</span> <span class=n>ChatOpenAI</span><span class=p>(</span><span class=n>temperature</span><span class=o>=</span><span class=mf>0.0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æŒ‡å®šLLMå’ŒTokené™åˆ¶å€¼</span>
</span></span><span class=line><span class=cl><span class=n>memory</span> <span class=o>=</span> <span class=n>ConversationTokenBufferMemory</span><span class=p>(</span><span class=n>llm</span><span class=o>=</span><span class=n>llm</span><span class=p>,</span> <span class=n>max_token_limit</span><span class=o>=</span><span class=mi>30</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>åœ¨æ’å…¥ä¸€äº›æ¶ˆæ¯ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥æ‰“å°å…¶å®é™…ä¿å­˜çš„å†å²æ¶ˆæ¯ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># æ’å…¥ä¸€äº›æ¶ˆæ¯</span>
</span></span><span class=line><span class=cl><span class=n>memory</span><span class=o>.</span><span class=n>save_context</span><span class=p>({</span><span class=s2>&#34;input&#34;</span><span class=p>:</span> <span class=s2>&#34;AI is what?!&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>                    <span class=p>{</span><span class=s2>&#34;output&#34;</span><span class=p>:</span> <span class=s2>&#34;Amazing!&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=n>memory</span><span class=o>.</span><span class=n>save_context</span><span class=p>({</span><span class=s2>&#34;input&#34;</span><span class=p>:</span> <span class=s2>&#34;Backpropagation is what?&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>                    <span class=p>{</span><span class=s2>&#34;output&#34;</span><span class=p>:</span> <span class=s2>&#34;Beautiful!&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=n>memory</span><span class=o>.</span><span class=n>save_context</span><span class=p>({</span><span class=s2>&#34;input&#34;</span><span class=p>:</span> <span class=s2>&#34;Chatbots are what?&#34;</span><span class=p>},</span> 
</span></span><span class=line><span class=cl>                    <span class=p>{</span><span class=s2>&#34;output&#34;</span><span class=p>:</span> <span class=s2>&#34;Charming!&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ‰“å°å†å²æ¶ˆæ¯</span>
</span></span><span class=line><span class=cl><span class=n>memory</span><span class=o>.</span><span class=n>load_memory_variables</span><span class=p>({})</span>
</span></span></code></pre></td></tr></table></div></div><p>æ‰“å°å†…å®¹å¦‚ä¸‹ï¼š</p><blockquote><p>{&lsquo;history&rsquo;: &lsquo;AI: Beautiful!\nHuman: Chatbots are what?\nAI: Charming!&rsquo;}</p></blockquote><p>æˆ‘ä»¬ä¼šå‘ç°ï¼Œå½“æŠŠTokené™åˆ¶å€¼è°ƒå¾—æ¯”è¾ƒé«˜æ—¶ï¼Œå®ƒå‡ ä¹å¯ä»¥åŒ…å«æ•´ä¸ªå¯¹è¯ã€‚</p><p><strong>è€Œå¦‚æœå‡å°‘å€¼ï¼Œå®ƒä¼šåˆ æ‰å¯¹è¯æœ€æ—©çš„é‚£éƒ¨åˆ†æ¶ˆæ¯ï¼Œåªä¿ç•™æœ€è¿‘å¯¹è¯çš„æ¶ˆæ¯ï¼Œå¹¶ä¸”ä¿è¯æ€»çš„æ¶ˆæ¯å†…å®¹é•¿åº¦ä¸è¶…è¿‡Tokené™åˆ¶å€¼</strong>ã€‚</p><p>å¦å¤–ï¼Œä¹‹æ‰€ä»¥è¿˜è¦æŒ‡å®šä¸€ä¸ªLLMå‚æ•°ï¼Œæ˜¯å› ä¸ºä¸åŒçš„LLMä½¿ç”¨ä¸åŒçš„Tokenè®¡ç®—æ–¹å¼ã€‚</p><p>è¿™é‡Œæ˜¯å‘Šè¯‰å®ƒï¼Œä½¿ç”¨ChatOpenAI LLMä½¿ç”¨çš„è®¡ç®—Tokençš„æ–¹æ³•ã€‚</p><h2 id=conversationsummarybuffermemory>ConversationSummaryBufferMemory</h2><p>ConversationSummaryBufferMemoryè¯•å›¾å°†æ¶ˆæ¯çš„æ˜¾æ€§è®°å¿†ï¼Œä¿æŒåœ¨æˆ‘ä»¬è®¾å®šçš„Tokené™åˆ¶å€¼ä¹‹ä¸‹ï¼Œä¹Ÿå³</p><ol><li>å½“Tokené™åˆ¶å€¼èƒ½è¦†ç›–æ–‡æœ¬é•¿åº¦æ—¶ï¼Œä¼šå­˜å‚¨æ•´ä¸ªå¯¹è¯å†å²ã€‚</li><li>è€Œå½“Tokené™åˆ¶å€¼å°äºæ–‡æœ¬é•¿åº¦æ—¶ï¼Œåˆ™ä¼šä¸ºæ‰€æœ‰å†å²æ¶ˆæ¯ç”Ÿæˆæ‘˜è¦ï¼Œæ”¹åœ¨è®°å¿†ä¸­å­˜å‚¨å†å²æ¶ˆæ¯çš„æ‘˜è¦ã€‚</li></ol><p>ä»¥æƒ…å†µ2ä¸ºä¾‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>langchain.memory</span> <span class=kn>import</span> <span class=n>ConversationSummaryBufferMemory</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åˆ›å»ºä¸€ä¸ªé•¿å­—ç¬¦ä¸²</span>
</span></span><span class=line><span class=cl><span class=n>schedule</span> <span class=o>=</span> <span class=s2>&#34;There is a meeting at 8am with your product team. </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>You will need your powerpoint presentation prepared. </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>9am-12pm have time to work on your LangChain </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>project which will go quickly because Langchain is such a powerful tool. </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>At Noon, lunch at the italian resturant with a customer who is driving </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>from over an hour away to meet you to understand the latest in AI. </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>Be sure to bring your laptop to show the latest LLM demo.&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>memory</span> <span class=o>=</span> <span class=n>ConversationSummaryBufferMemory</span><span class=p>(</span><span class=n>llm</span><span class=o>=</span><span class=n>llm</span><span class=p>,</span> <span class=n>max_token_limit</span><span class=o>=</span><span class=mi>100</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>memory</span><span class=o>.</span><span class=n>save_context</span><span class=p>({</span><span class=s2>&#34;input&#34;</span><span class=p>:</span> <span class=s2>&#34;Hello&#34;</span><span class=p>},</span> <span class=p>{</span><span class=s2>&#34;output&#34;</span><span class=p>:</span> <span class=s2>&#34;What&#39;s up&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=n>memory</span><span class=o>.</span><span class=n>save_context</span><span class=p>({</span><span class=s2>&#34;input&#34;</span><span class=p>:</span> <span class=s2>&#34;Not much, just hanging&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>                    <span class=p>{</span><span class=s2>&#34;output&#34;</span><span class=p>:</span> <span class=s2>&#34;Cool&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=n>memory</span><span class=o>.</span><span class=n>save_context</span><span class=p>({</span><span class=s2>&#34;input&#34;</span><span class=p>:</span> <span class=s2>&#34;What is on the schedule today?&#34;</span><span class=p>},</span> 
</span></span><span class=line><span class=cl>                    <span class=p>{</span><span class=s2>&#34;output&#34;</span><span class=p>:</span> <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>schedule</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl>                    
</span></span><span class=line><span class=cl><span class=n>conversation</span> <span class=o>=</span> <span class=n>ConversationChain</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>llm</span><span class=o>=</span><span class=n>llm</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=n>memory</span> <span class=o>=</span> <span class=n>memory</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>verbose</span><span class=o>=</span><span class=kc>True</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>conversation</span><span class=o>.</span><span class=n>predict</span><span class=p>(</span><span class=nb>input</span><span class=o>=</span><span class=s2>&#34;What would be a good demo to show?&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>è¿è¡Œçš„ç»†èŠ‚å¦‚ä¸‹ï¼š</p><blockquote><p>> Entering new ConversationChain chain&mldr;</p><p>Prompt after formatting:</p><p>The following is a friendly conversation between a human and an AI. The AI is talkative and provides lots of specific details from its context. If the AI does not know the answer to a question, it truthfully says it does not know.</p><p>Current conversation:</p><p>System: The human and AI engage in small talk before discussing the day&rsquo;s schedule. The AI informs the human of a morning meeting with the product team, time to work on the LangChain project, and a lunch meeting with a customer interested in the latest AI developments.</p><p>Human: What would be a good demo to show?</p><p>AI:</p><p>> Finished chain.</p><p>&ldquo;Based on the customer&rsquo;s interest in AI developments, I would suggest showcasing our latest natural language processing capabilities. We could demonstrate how our AI can accurately understand and respond to complex language queries, and even provide personalized recommendations based on the user&rsquo;s preferences. Additionally, we could highlight our AI&rsquo;s ability to learn and adapt over time, making it a valuable tool for businesses looking to improve their customer experience.&rdquo;</p></blockquote><p>å¯ä»¥çœ‹åˆ°ï¼Œç”±äºè¶…è¿‡äº†è®¾å®šçš„Tokené™åˆ¶å€¼ï¼Œå®ƒä¸ºå†å²ä¼šè¯çš„ç”Ÿæˆäº†ä¸€ä¸ªæ‘˜è¦ï¼Œå¹¶æ”¾åœ¨ç³»ç»Ÿæ¶ˆæ¯çš„æç¤ºè¯ä¸­ã€‚</p><h2 id=å…¶ä»–è®°å¿†å­˜å‚¨ç®¡ç†ç­–ç•¥>å…¶ä»–è®°å¿†å­˜å‚¨ç®¡ç†ç­–ç•¥</h2><p><img src=/p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.34.37.png width=1184 height=1300 srcset="/p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.34.37_hufe9a9f43432785de90ec5dec88198dea_390623_480x0_resize_box_3.png 480w, /p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.34.37_hufe9a9f43432785de90ec5dec88198dea_390623_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=91 data-flex-basis=218px></p><div class=table-wrapper><table><thead><tr><th>ç­–ç•¥</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>å‘é‡æ•°æ®å­˜å‚¨ï¼ˆVectorDataMemoryï¼‰</td><td>å­˜å‚¨åµŒå…¥å‘é‡ï¼Œç”¨äºæ£€ç´¢ç›¸å…³æ–‡æœ¬å—</td></tr><tr><td>å®ä½“è®°å¿†å­˜å‚¨ï¼ˆEntityMemoriesï¼‰</td><td>è®°ä½ç‰¹å®šå®ä½“çš„è¯¦ç»†ä¿¡æ¯ï¼Œæ¯”å¦‚å¯¹è¯ä¸­æŸä¸ªé‡è¦äººç‰©çš„ä¿¡æ¯</td></tr></tbody></table></div><p>é™¤äº†è¿™äº›è®°å¿†å­˜å‚¨ç±»å‹ï¼Œä¹Ÿå¯å°†æ•´ä¸ªå¯¹è¯å­˜å‚¨åœ¨ä¼ ç»Ÿæ•°æ®åº“ä¸­ï¼Œå¦‚é”®å€¼å­˜å‚¨ï¼ˆkey-value storeï¼‰æˆ–SQLæ•°æ®åº“ã€‚</p><p>è¿™æ ·å°±å¯ä»¥å›é¡¾æ•´ä¸ªå¯¹è¯ï¼Œè¿›è¡Œå®¡è®¡æˆ–è¿›ä¸€æ­¥æ”¹è¿›ç³»ç»Ÿã€‚</p><h2 id=é“¾>é“¾</h2><p><img src=/p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.35.09.png width=1352 height=1308 srcset="/p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.35.09_hu5c90364c4845edbcb1f3a55186e5e104_408777_480x0_resize_box_3.png 480w, /p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.35.09_hu5c90364c4845edbcb1f3a55186e5e104_408777_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=103 data-flex-basis=248px></p><p><strong>é“¾ï¼ˆChainï¼‰æ˜¯LangChainä¸­æœ€å…³é”®çš„æ„å»ºæ¨¡å—</strong>ã€‚</p><p>é™¤äº†å°† LLM ä¸æç¤ºç»“åˆåœ¨ä¸€èµ·ï¼Œè¿˜å¯ä»¥é€šè¿‡ç»„åˆå¤šä¸ªé“¾ï¼Œå¯¹æ–‡æœ¬æˆ–å…¶ä»–æ•°æ®æ‰§è¡Œä¸€ç³»åˆ—çš„æ“ä½œã€‚</p><p>LangChainæä¾›äº†å¤šç§å¯ç”¨çš„é“¾ç±»å‹ï¼š</p><div class=table-wrapper><table><thead><tr><th>ç±»å‹</th><th>åœºæ™¯</th></tr></thead><tbody><tr><td>LLMé“¾ï¼ˆLLMChainï¼‰</td><td>å°†LLMå’Œæç¤ºç»“åˆåœ¨ä¸€èµ·</td></tr><tr><td>ç®€å•é¡ºåºé“¾ï¼ˆSimpleSequentialChainï¼‰</td><td>åªéœ€è¦ä¸€ä¸ªè¾“å…¥å¹¶ä¸”åªè¿”å›ä¸€ä¸ªè¾“å‡º</td></tr><tr><td>å¸¸è§„é¡ºåºé“¾ï¼ˆSequentialChainï¼‰</td><td>æœ‰å¤šä¸ªè¾“å…¥æˆ–å¤šä¸ªè¾“å‡º</td></tr><tr><td>è·¯ç”±é“¾ï¼ˆRouterChainï¼‰</td><td>æ ¹æ®è¾“å…¥çš„å…·ä½“å†…å®¹è·¯ç”±åˆ°ä¸åŒçš„å­é“¾</td></tr></tbody></table></div><p>ä¸‹é¢è®©æˆ‘ä»¬æ¥é€ä¸€äº†è§£ä¸€ä¸‹ã€‚</p><p>é¦–å…ˆï¼Œç”¨ pandas DataFrame åŠ è½½ä¸€äº›ç¨åè¦ç”¨åˆ°çš„æ•°æ®ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pandas</span> <span class=k>as</span> <span class=nn>pd</span>
</span></span><span class=line><span class=cl><span class=n>df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=s1>&#39;Data.csv&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>df</span><span class=o>.</span><span class=n>head</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><p><img src=/p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.38.36.png width=1220 height=496 srcset="/p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.38.36_huc0757b480bceda5a98dc0adf748b58f6_221984_480x0_resize_box_3.png 480w, /p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.38.36_huc0757b480bceda5a98dc0adf748b58f6_221984_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=245 data-flex-basis=590px></p><h2 id=llmé“¾llmchain>LLMé“¾ï¼ˆLLMChainï¼‰</h2><p>LLMé“¾æ˜¯ä¸€ä¸ªç®€å•ä½†éå¸¸å¼ºå¤§çš„é“¾ï¼Œå®ƒæ˜¯æˆ‘ä»¬åé¢è¦è®¨è®ºçš„å…¶ä»–é“¾ç±»å‹çš„åŸºç¡€ï¼Œç”¨äºå°†LLMå’Œæç¤ºç»“åˆåœ¨ä¸€èµ·ã€‚</p><p>ä¾‹å­å¦‚ä¸‹ï¼š</p><h4 id=æ­¥éª¤1åˆå§‹åŒ–è¯­è¨€æ¨¡å‹å’Œæç¤º>æ­¥éª¤1ï¼šåˆå§‹åŒ–è¯­è¨€æ¨¡å‹å’Œæç¤º</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>langchain.chat_models</span> <span class=kn>import</span> <span class=n>ChatOpenAI</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>langchain.prompts</span> <span class=kn>import</span> <span class=n>ChatPromptTemplate</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>langchain.chains</span> <span class=kn>import</span> <span class=n>LLMChain</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç”¨ä¸€ä¸ªæ¯”è¾ƒé«˜çš„temperatureå€¼ä»¥è·å¾—ä¸€äº›æ›´æœ‰æ„æ€çš„ç»“æœ</span>
</span></span><span class=line><span class=cl><span class=n>llm</span> <span class=o>=</span> <span class=n>ChatOpenAI</span><span class=p>(</span><span class=n>temperature</span><span class=o>=</span><span class=mf>0.9</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># æ¥æ”¶ä¸€ä¸ªåä¸ºâ€œproductâ€çš„å˜é‡ï¼Œè¦æ±‚LLMç”Ÿæˆæè¿°ç”Ÿäº§è¯¥äº§å“çš„å…¬å¸çš„æœ€ä½³åç§°</span>
</span></span><span class=line><span class=cl><span class=n>prompt</span> <span class=o>=</span> <span class=n>ChatPromptTemplate</span><span class=o>.</span><span class=n>from_template</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;What is the best name to describe </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>    a company that makes </span><span class=si>{product}</span><span class=s2>?&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤2å°†äº§å“ä¼ å…¥é“¾ä¸­å¹¶è¿è¡Œé“¾>æ­¥éª¤2ï¼šå°†äº§å“ä¼ å…¥é“¾ä¸­ï¼Œå¹¶è¿è¡Œé“¾</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>chain</span> <span class=o>=</span> <span class=n>LLMChain</span><span class=p>(</span><span class=n>llm</span><span class=o>=</span><span class=n>llm</span><span class=p>,</span> <span class=n>prompt</span><span class=o>=</span><span class=n>prompt</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>product</span> <span class=o>=</span> <span class=s2>&#34;Queen Size Sheet Set&#34;</span>
</span></span><span class=line><span class=cl><span class=n>chain</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>product</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>è¿è¡Œé“¾åï¼Œå®ƒå°†åœ¨åå°æ ¼å¼åŒ–æç¤ºè¯ï¼Œç„¶åå°†æ ¼å¼åŒ–åçš„å®Œæ•´æç¤ºè¯ä¼ é€’ç»™LLMï¼Œç„¶åå¾—åˆ°ç»“æœï¼š</p><blockquote><p>&lsquo;Royal Beddings.&rsquo;</p></blockquote><h2 id=ç®€å•é¡ºåºé“¾simplesequentialchain>ç®€å•é¡ºåºé“¾ï¼ˆSimpleSequentialChainï¼‰</h2><p><img src=/p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.39.51.png width=1622 height=1020 srcset="/p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.39.51_hu317d630e86a3269847b8ca5af0b56617_365903_480x0_resize_box_3.png 480w, /p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.39.51_hu317d630e86a3269847b8ca5af0b56617_365903_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=159 data-flex-basis=381px></p><p>å½“æˆ‘ä»¬çš„å­é“¾åªéœ€è¦ä¸€ä¸ªè¾“å…¥å¹¶ä¸”åªè¿”å›ä¸€ä¸ªè¾“å‡ºæ—¶ï¼Œç®€å•é¡ºåºé“¾å¾ˆæœ‰æ•ˆã€‚</p><p>ä¾‹å­å¦‚ä¸‹ï¼š</p><h4 id=æ­¥éª¤1åˆå§‹åŒ–è¯­è¨€æ¨¡å‹>æ­¥éª¤1ï¼šåˆå§‹åŒ–è¯­è¨€æ¨¡å‹</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>langchain.chains</span> <span class=kn>import</span> <span class=n>SimpleSequentialChain</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>llm</span> <span class=o>=</span> <span class=n>ChatOpenAI</span><span class=p>(</span><span class=n>temperature</span><span class=o>=</span><span class=mf>0.9</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤2åˆ›å»ºç¬¬ä¸€ä¸ªé“¾>æ­¥éª¤2ï¼šåˆ›å»ºç¬¬ä¸€ä¸ªé“¾</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># æç¤ºæ¨¡æ¿1ï¼šæ¥å—äº§å“å¹¶è¿”å›æè¿°è¯¥å…¬å¸çš„æœ€ä½³åç§°</span>
</span></span><span class=line><span class=cl><span class=n>first_prompt</span> <span class=o>=</span> <span class=n>ChatPromptTemplate</span><span class=o>.</span><span class=n>from_template</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;What is the best name to describe </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>    a company that makes </span><span class=si>{product}</span><span class=s2>?&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç¬¬ä¸€ä¸ªé“¾</span>
</span></span><span class=line><span class=cl><span class=n>chain_one</span> <span class=o>=</span> <span class=n>LLMChain</span><span class=p>(</span><span class=n>llm</span><span class=o>=</span><span class=n>llm</span><span class=p>,</span> <span class=n>prompt</span><span class=o>=</span><span class=n>first_prompt</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤3åˆ›å»ºç¬¬äºŒä¸ªé“¾>æ­¥éª¤3ï¼šåˆ›å»ºç¬¬äºŒä¸ªé“¾</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># æç¤ºæ¨¡æ¿2ï¼šè·å–å…¬å¸åç§°ï¼Œç„¶åè¾“å‡ºè¯¥å…¬å¸çš„ 20 å­—æè¿°</span>
</span></span><span class=line><span class=cl><span class=n>second_prompt</span> <span class=o>=</span> <span class=n>ChatPromptTemplate</span><span class=o>.</span><span class=n>from_template</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;Write a 20 words description for the following </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>    company:</span><span class=si>{company_name}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># ç¬¬äºŒä¸ªé“¾</span>
</span></span><span class=line><span class=cl><span class=n>chain_two</span> <span class=o>=</span> <span class=n>LLMChain</span><span class=p>(</span><span class=n>llm</span><span class=o>=</span><span class=n>llm</span><span class=p>,</span> <span class=n>prompt</span><span class=o>=</span><span class=n>second_prompt</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤4åˆ›å»ºç®€å•é¡ºåºé“¾å®ä¾‹å¹¶è¿è¡Œé“¾>æ­¥éª¤4ï¼šåˆ›å»ºç®€å•é¡ºåºé“¾å®ä¾‹ï¼Œå¹¶è¿è¡Œé“¾</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># ç¬¬ä¸€ä¸ªé“¾çš„è¾“å‡ºå°†ä¼ é€’åˆ°ç¬¬äºŒä¸ªé“¾</span>
</span></span><span class=line><span class=cl><span class=n>overall_simple_chain</span> <span class=o>=</span> <span class=n>SimpleSequentialChain</span><span class=p>(</span><span class=n>chains</span><span class=o>=</span><span class=p>[</span><span class=n>chain_one</span><span class=p>,</span> <span class=n>chain_two</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                                             <span class=n>verbose</span><span class=o>=</span><span class=kc>True</span>
</span></span><span class=line><span class=cl>                                            <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>overall_simple_chain</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>product</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>è¿è¡Œçš„ç»†èŠ‚å¦‚ä¸‹ï¼š</p><blockquote><p>> Entering new SimpleSequentialChain chain&mldr;</p><p>&ldquo;Royal Bedding Co.&rdquo;</p><p>&ldquo;Royal Bedding Co. offers luxurious and comfortable bedding solutions for a restful and regal sleep experience fit for royalty.&rdquo;</p><p>> Finished chain.</p></blockquote><p>å¯ä»¥çœ‹åˆ°ï¼Œå®ƒé¦–å…ˆè¾“å‡ºå…¬å¸åç§°ï¼Œç„¶åå°†å…¶ä¼ é€’åˆ°ç¬¬äºŒæ¡é“¾ï¼Œå¹¶ç»™å‡ºè¯¥å…¬å¸å¯èƒ½çš„ä¸šåŠ¡æè¿°ã€‚</p><h2 id=å¸¸è§„é¡ºåºé“¾sequentialchain>å¸¸è§„é¡ºåºé“¾ï¼ˆSequentialChainï¼‰</h2><p><img src=/p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.40.29.png width=1620 height=1202 srcset="/p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.40.29_hu92af770f6d1a9a5d2bb1f2e8d4d2f923_544177_480x0_resize_box_3.png 480w, /p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.40.29_hu92af770f6d1a9a5d2bb1f2e8d4d2f923_544177_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=134 data-flex-basis=323px></p><p>å½“æœ‰å¤šä¸ªè¾“å…¥æˆ–å¤šä¸ªè¾“å‡ºæ—¶ï¼Œå¯ä»¥ä½¿ç”¨å¸¸è§„é¡ºåºé“¾ã€‚</p><p>ä¾‹å­å¦‚ä¸‹ï¼š</p><h4 id=æ­¥éª¤1åˆå§‹åŒ–è¯­è¨€æ¨¡å‹-1>æ­¥éª¤1ï¼šåˆå§‹åŒ–è¯­è¨€æ¨¡å‹</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>langchain.chains</span> <span class=kn>import</span> <span class=n>SequentialChain</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>llm</span> <span class=o>=</span> <span class=n>ChatOpenAI</span><span class=p>(</span><span class=n>temperature</span><span class=o>=</span><span class=mf>0.9</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤2åˆ›å»ºä¸€å †å°†ä¾æ¬¡ä½¿ç”¨çš„é“¾>æ­¥éª¤2ï¼šåˆ›å»ºä¸€å †å°†ä¾æ¬¡ä½¿ç”¨çš„é“¾</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># ç¬¬ä¸€æ¡é“¾ï¼Œå°†è¯„è®ºç¿»è¯‘æˆè‹±è¯­ã€‚</span>
</span></span><span class=line><span class=cl><span class=n>first_prompt</span> <span class=o>=</span> <span class=n>ChatPromptTemplate</span><span class=o>.</span><span class=n>from_template</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;Translate the following review to english:&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;</span><span class=se>\n\n</span><span class=si>{Review}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>chain_one</span> <span class=o>=</span> <span class=n>LLMChain</span><span class=p>(</span><span class=n>llm</span><span class=o>=</span><span class=n>llm</span><span class=p>,</span> <span class=n>prompt</span><span class=o>=</span><span class=n>first_prompt</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                     <span class=n>output_key</span><span class=o>=</span><span class=s2>&#34;English_Review&#34;</span>
</span></span><span class=line><span class=cl>                    <span class=p>)</span>
</span></span><span class=line><span class=cl>           
</span></span><span class=line><span class=cl><span class=c1># ç¬¬äºŒæ¡é“¾ï¼Œç”¨ä¸€å¥è¯æ€»ç»“è¯¥è¯„è®º       </span>
</span></span><span class=line><span class=cl><span class=n>second_prompt</span> <span class=o>=</span> <span class=n>ChatPromptTemplate</span><span class=o>.</span><span class=n>from_template</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;Can you summarize the following review in 1 sentence:&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;</span><span class=se>\n\n</span><span class=si>{English_Review}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>chain_two</span> <span class=o>=</span> <span class=n>LLMChain</span><span class=p>(</span><span class=n>llm</span><span class=o>=</span><span class=n>llm</span><span class=p>,</span> <span class=n>prompt</span><span class=o>=</span><span class=n>second_prompt</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                     <span class=n>output_key</span><span class=o>=</span><span class=s2>&#34;summary&#34;</span>
</span></span><span class=line><span class=cl>                    <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç¬¬ä¸‰æ¡é“¾ï¼Œæ£€æµ‹åŸå§‹è¯„è®ºçš„è¯­è¨€</span>
</span></span><span class=line><span class=cl><span class=n>third_prompt</span> <span class=o>=</span> <span class=n>ChatPromptTemplate</span><span class=o>.</span><span class=n>from_template</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;What language is the following review:</span><span class=se>\n\n</span><span class=si>{Review}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>chain_three</span> <span class=o>=</span> <span class=n>LLMChain</span><span class=p>(</span><span class=n>llm</span><span class=o>=</span><span class=n>llm</span><span class=p>,</span> <span class=n>prompt</span><span class=o>=</span><span class=n>third_prompt</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                       <span class=n>output_key</span><span class=o>=</span><span class=s2>&#34;language&#34;</span>
</span></span><span class=line><span class=cl>                      <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç¬¬å››æ¡é“¾ï¼Œæ¥æ”¶ç¬¬äºŒæ¡é“¾çš„æ‘˜è¦å†…å®¹(&#34;summary&#34;å˜é‡)ï¼Œä»¥åŠç¬¬ä¸‰æ¡é“¾çš„è¯­è¨€ç±»åˆ«(&#34;language&#34;å˜é‡)ï¼Œè¦æ±‚åç»­å›å¤æ‘˜è¦å†…å®¹æ—¶ä½¿ç”¨æŒ‡å®šè¯­è¨€ã€‚</span>
</span></span><span class=line><span class=cl><span class=n>fourth_prompt</span> <span class=o>=</span> <span class=n>ChatPromptTemplate</span><span class=o>.</span><span class=n>from_template</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;Write a follow up response to the following &#34;</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;summary in the specified language:&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;</span><span class=se>\n\n</span><span class=s2>Summary: </span><span class=si>{summary}</span><span class=se>\n\n</span><span class=s2>Language: </span><span class=si>{language}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>chain_four</span> <span class=o>=</span> <span class=n>LLMChain</span><span class=p>(</span><span class=n>llm</span><span class=o>=</span><span class=n>llm</span><span class=p>,</span> <span class=n>prompt</span><span class=o>=</span><span class=n>fourth_prompt</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                      <span class=n>output_key</span><span class=o>=</span><span class=s2>&#34;followup_message&#34;</span>
</span></span><span class=line><span class=cl>                     <span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>å¸¸è§„é¡ºåºé“¾ä¸­çš„ä»»ä½•ä¸€ä¸ªæ­¥éª¤ï¼Œéƒ½å¯ä»¥æ¥æ”¶æ¥è‡ªä¸Šæ¸¸çš„å¤šä¸ªè¾“å…¥å˜é‡ï¼Œç‰¹åˆ«å½“ä½ æœ‰å¤æ‚çš„ä¸‹æ¸¸é“¾éœ€è¦å’Œå¤šä¸ªä¸Šæ¸¸é“¾ç»„åˆæ—¶ï¼Œè¿™ä¼šéå¸¸æœ‰ç”¨ã€‚</p><h4 id=æ­¥éª¤3å°†è¿™äº›é“¾ç»„åˆåœ¨é¡ºåºé“¾ä¸­å¹¶æŒ‡å®šè¾“å…¥ä¸è¾“å‡ºå˜é‡>æ­¥éª¤3ï¼šå°†è¿™äº›é“¾ç»„åˆåœ¨é¡ºåºé“¾ä¸­ï¼Œå¹¶æŒ‡å®šè¾“å…¥ä¸è¾“å‡ºå˜é‡</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>overall_chain</span> <span class=o>=</span> <span class=n>SequentialChain</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>chains</span><span class=o>=</span><span class=p>[</span><span class=n>chain_one</span><span class=p>,</span> <span class=n>chain_two</span><span class=p>,</span> <span class=n>chain_three</span><span class=p>,</span> <span class=n>chain_four</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=n>input_variables</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;Review&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=n>output_variables</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;English_Review&#34;</span><span class=p>,</span> <span class=s2>&#34;summary&#34;</span><span class=p>,</span><span class=s2>&#34;followup_message&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=n>verbose</span><span class=o>=</span><span class=kc>True</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>è®©è¿™äº›å˜é‡åç§°å‡†ç¡®æ’åˆ—éå¸¸é‡è¦ï¼Œå› ä¸ºæœ‰å¾ˆå¤šä¸åŒçš„è¾“å…¥å’Œè¾“å‡ºã€‚å¦‚æœä½ é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè¯·æ£€æŸ¥å®ƒä»¬æ’åˆ—é¡ºåºæ˜¯å¦æ­£ç¡®ã€‚</p><h4 id=æ­¥éª¤4é€‰æ‹©ä¸€æ¡è¯„è®ºå¹¶å°†å…¶ä¼ é€’åˆ°æ•´ä¸ªé“¾ä¸­>æ­¥éª¤4ï¼šé€‰æ‹©ä¸€æ¡è¯„è®ºå¹¶å°†å…¶ä¼ é€’åˆ°æ•´ä¸ªé“¾ä¸­</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>review</span> <span class=o>=</span> <span class=n>df</span><span class=o>.</span><span class=n>Review</span><span class=p>[</span><span class=mi>5</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>overall_chain</span><span class=p>(</span><span class=n>review</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>æ‰§è¡Œçš„ç»†èŠ‚å¦‚ä¸‹ï¼š</p><blockquote><p>> Entering new SequentialChain chain&mldr;</p><p>> Finished chain.</p><p>{&lsquo;Review&rsquo;: &ldquo;Je trouve le goÃ»t mÃ©diocre. La mousse ne tient pas, c&rsquo;est bizarre. J&rsquo;achÃ¨te les mÃªmes dans le commerce et le goÃ»t est bien meilleur&mldr;\nVieux lot ou contrefaÃ§on !?&rdquo;,</p><p>&lsquo;English_Review&rsquo;: &ldquo;I find the taste mediocre. The foam doesn&rsquo;t hold up, it&rsquo;s weird. I buy the same ones in stores and the taste is much better&mldr; Old batch or counterfeit!?&rdquo;,</p><p>&lsquo;summary&rsquo;: &lsquo;The reviewer expresses dissatisfaction with the taste and foam of the product, suspecting that it might be an old batch or counterfeit.&rsquo;,</p><p>&lsquo;followup_message&rsquo;: &ldquo;RÃ©ponse : Le critique exprime sa dÃ©ception quant au goÃ»t et Ã  la mousse du produit, soupÃ§onnant qu&rsquo;il s&rsquo;agit peut-Ãªtre d&rsquo;un lot pÃ©rimÃ© ou contrefait. Il est important que les fabricants prennent des mesures pour garantir la qualitÃ© de leurs produits afin de maintenir la confiance de leurs clients. Nous espÃ©rons que ce problÃ¨me sera rapidement rÃ©solu pour que les consommateurs puissent profiter du produit tel qu&rsquo;il est censÃ© Ãªtre.&rdquo;}</p></blockquote><p>å¯ä»¥çœ‹åˆ°ï¼Œå…¶æœ€ç»ˆé‡‡ç”¨äº†æ£€æµ‹åˆ°çš„åŸå§‹è¯­è¨€â€”â€”æ³•è¯­å¯¹æ‘˜è¦å†…å®¹è¿›è¡Œäº†å›å¤ã€‚</p><h2 id=è·¯ç”±é“¾routerchain>è·¯ç”±é“¾ï¼ˆRouterChainï¼‰</h2><p><img src=/p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.41.15.png width=1638 height=1122 srcset="/p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.41.15_hube66deaf251e62546d64cef5593d50ab_472012_480x0_resize_box_3.png 480w, /p/i-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8A/iShot_2023-08-29_22.41.15_hube66deaf251e62546d64cef5593d50ab_472012_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=145 data-flex-basis=350px></p><p>å¦‚æœä½ æœ‰å¤šä¸ªå­é“¾ï¼Œä¸”æ¯ä¸ªå­é“¾ä¸“é—¨è´Ÿè´£å¤„ç†æŸç§ç‰¹å®šç±»å‹çš„è¾“å…¥ï¼Œè¿™ç§æƒ…å†µå°±å¯ä»¥ä½¿ç”¨è·¯ç”±é“¾ã€‚</p><p><strong>è·¯ç”±é“¾ä¼šæ ¹æ®è¾“å…¥çš„å…·ä½“å†…å®¹è·¯ç”±åˆ°ä¸åŒçš„å­é“¾</strong>ã€‚</p><p>å®ƒä¼šé¦–å…ˆåˆ¤æ–­è¯¥ä½¿ç”¨å“ªä¸ªå­é“¾ï¼Œç„¶åå°†è¾“å…¥ä¼ é€’åˆ°ç›¸åº”çš„å­é“¾ã€‚</p><p>ä¾‹å­å¦‚ä¸‹ï¼š</p><h4 id=æ­¥éª¤1æä¾›å¤šä¸ªç‰¹å®šç±»å‹çš„æç¤ºæ¨¡æ¿>æ­¥éª¤1ï¼šæä¾›å¤šä¸ªç‰¹å®šç±»å‹çš„æç¤ºæ¨¡æ¿</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># ç¬¬ä¸€ä¸ªæç¤ºï¼Œé€‚åˆå›ç­”ç‰©ç†é—®é¢˜</span>
</span></span><span class=line><span class=cl><span class=n>physics_template</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34;You are a very smart physics professor. </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>You are great at answering questions about physics in a concise</span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>and easy to understand manner. </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>When you don&#39;t know the answer to a question you admit</span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>that you don&#39;t know.
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>Here is a question:
</span></span></span><span class=line><span class=cl><span class=s2></span><span class=si>{input}</span><span class=s2>&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç¬¬äºŒä¸ªæç¤ºï¼Œé€‚åˆå›ç­”æ•°å­¦é—®é¢˜</span>
</span></span><span class=line><span class=cl><span class=n>math_template</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34;You are a very good mathematician. </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>You are great at answering math questions. </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>You are so good because you are able to break down </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>hard problems into their component parts, 
</span></span></span><span class=line><span class=cl><span class=s2>answer the component parts, and then put them together</span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>to answer the broader question.
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>Here is a question:
</span></span></span><span class=line><span class=cl><span class=s2></span><span class=si>{input}</span><span class=s2>&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç¬¬ä¸‰ä¸ªæç¤ºï¼Œé€‚åˆå›ç­”å†å²é—®é¢˜</span>
</span></span><span class=line><span class=cl><span class=n>history_template</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34;You are a very good historian. </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>You have an excellent knowledge of and understanding of people,</span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>events and contexts from a range of historical periods. </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>You have the ability to think, reflect, debate, discuss and </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>evaluate the past. You have a respect for historical evidence</span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>and the ability to make use of it to support your explanations </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>and judgements.
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>Here is a question:
</span></span></span><span class=line><span class=cl><span class=s2></span><span class=si>{input}</span><span class=s2>&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç¬¬å››ä¸ªæç¤º,é€‚åˆå›ç­”è®¡ç®—æœºç§‘å­¦é—®é¢˜ã€‚</span>
</span></span><span class=line><span class=cl><span class=n>computerscience_template</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34; You are a successful computer scientist.</span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>You have a passion for creativity, collaboration,</span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>forward-thinking, confidence, strong problem-solving capabilities,</span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>understanding of theories and algorithms, and excellent communication </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>skills. You are great at answering coding questions. </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>You are so good because you know how to solve a problem by </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>describing the solution in imperative steps </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>that a machine can easily interpret and you know how to </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>choose a solution that has a good balance between </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>time complexity and space complexity. 
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>Here is a question:
</span></span></span><span class=line><span class=cl><span class=s2></span><span class=si>{input}</span><span class=s2>&#34;&#34;&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤2ä¸ºæ¯ä¸ªæç¤ºæ¨¡æ¿æä¾›æ›´å¤šç›¸å…³ä¿¡æ¯>æ­¥éª¤2ï¼šä¸ºæ¯ä¸ªæç¤ºæ¨¡æ¿æä¾›æ›´å¤šç›¸å…³ä¿¡æ¯</h4><p>è¿™äº›ä¿¡æ¯å°†ä¼ é€’ç»™è·¯ç”±é“¾ï¼Œä»¥å¸®åŠ©è·¯ç”±é“¾å†³å®šä½•æ—¶ä½¿ç”¨å“ªæ¡å­é“¾ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>prompt_infos</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;physics&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;Good for answering questions about physics&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;prompt_template&#34;</span><span class=p>:</span> <span class=n>physics_template</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;math&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;Good for answering math questions&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;prompt_template&#34;</span><span class=p>:</span> <span class=n>math_template</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;History&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;Good for answering history questions&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;prompt_template&#34;</span><span class=p>:</span> <span class=n>history_template</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;computer science&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;Good for answering computer science questions&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;prompt_template&#34;</span><span class=p>:</span> <span class=n>computerscience_template</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤3å¯¼å…¥éœ€è¦çš„é“¾ç±»å‹å®šä¹‰ä½¿ç”¨çš„è¯­è¨€æ¨¡å‹>æ­¥éª¤3ï¼šå¯¼å…¥éœ€è¦çš„é“¾ç±»å‹ï¼Œå®šä¹‰ä½¿ç”¨çš„è¯­è¨€æ¨¡å‹</h4><p>MultiPromptChainæ˜¯ä¸€ç§ç‰¹å®šç±»å‹çš„é“¾ï¼Œç”¨äºåœ¨å¤šä¸ªä¸åŒæç¤ºæ¨¡æ¿ä¹‹é—´è¿›è¡Œè·¯ç”±ã€‚</p><p>LLMRouterChainä¼šå€ŸåŠ©è¯­è¨€æ¨¡å‹çš„å¸®åŠ©ï¼Œè®©è¯­è¨€æ¨¡å‹æ ¹æ®ä¸Šé¢æä¾›çš„åç§°å’Œæè¿°ç­‰ä¿¡æ¯ï¼Œåˆ¤æ–­å¦‚ä½•è·¯ç”±ã€‚</p><p>RouterOutputParserå°†LLMè¾“å‡ºè§£ææˆä¸€ä¸ªå­—å…¸ï¼Œæ ¹æ®å­—å…¸å†…å®¹ç¡®å®šä¸‹æ¸¸ä½¿ç”¨å“ªæ¡é“¾ï¼Œä»¥åŠé“¾çš„è¾“å…¥åº”è¯¥æ˜¯ä»€ä¹ˆã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>langchain.chains.router</span> <span class=kn>import</span> <span class=n>MultiPromptChain</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>langchain.chains.router.llm_router</span> <span class=kn>import</span> <span class=n>LLMRouterChain</span><span class=p>,</span><span class=n>RouterOutputParser</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>langchain.prompts</span> <span class=kn>import</span> <span class=n>PromptTemplate</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>llm</span> <span class=o>=</span> <span class=n>ChatOpenAI</span><span class=p>(</span><span class=n>temperature</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤4åˆ›å»ºç›®æ ‡é“¾>æ­¥éª¤4ï¼šåˆ›å»ºç›®æ ‡é“¾</h4><p>è·¯ç”±é“¾ä¼šæ ¹æ®è¾“å…¥å†…å®¹è°ƒç”¨è¿™äº›ç›®æ ‡é“¾çš„å…¶ä¸­ä¸€ä¸ªã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>destination_chains</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>p_info</span> <span class=ow>in</span> <span class=n>prompt_infos</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span> <span class=o>=</span> <span class=n>p_info</span><span class=p>[</span><span class=s2>&#34;name&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>prompt_template</span> <span class=o>=</span> <span class=n>p_info</span><span class=p>[</span><span class=s2>&#34;prompt_template&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>prompt</span> <span class=o>=</span> <span class=n>ChatPromptTemplate</span><span class=o>.</span><span class=n>from_template</span><span class=p>(</span><span class=n>template</span><span class=o>=</span><span class=n>prompt_template</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>chain</span> <span class=o>=</span> <span class=n>LLMChain</span><span class=p>(</span><span class=n>llm</span><span class=o>=</span><span class=n>llm</span><span class=p>,</span> <span class=n>prompt</span><span class=o>=</span><span class=n>prompt</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>destination_chains</span><span class=p>[</span><span class=n>name</span><span class=p>]</span> <span class=o>=</span> <span class=n>chain</span>  
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl><span class=n>destinations</span> <span class=o>=</span> <span class=p>[</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>p</span><span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>p</span><span class=p>[</span><span class=s1>&#39;description&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span> <span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>prompt_infos</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>destinations_str</span> <span class=o>=</span> <span class=s2>&#34;</span><span class=se>\n</span><span class=s2>&#34;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>destinations</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤5åˆ›å»ºé»˜è®¤é“¾>æ­¥éª¤5ï¼šåˆ›å»ºé»˜è®¤é“¾</h4><p>é»˜è®¤é“¾æ˜¯åœ¨è·¯ç”±æ‰¾ä¸åˆ°åˆé€‚çš„å­é“¾è°ƒç”¨æ—¶ï¼Œç”¨æ¥å¤‡ç”¨çš„ä¸€æ¡é“¾è·¯ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>default_prompt</span> <span class=o>=</span> <span class=n>ChatPromptTemplate</span><span class=o>.</span><span class=n>from_template</span><span class=p>(</span><span class=s2>&#34;</span><span class=si>{input}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>default_chain</span> <span class=o>=</span> <span class=n>LLMChain</span><span class=p>(</span><span class=n>llm</span><span class=o>=</span><span class=n>llm</span><span class=p>,</span> <span class=n>prompt</span><span class=o>=</span><span class=n>default_prompt</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤6å®šä¹‰ä¸€ä¸ªè·¯ç”±æç¤ºæ¨¡æ¿>æ­¥éª¤6ï¼šå®šä¹‰ä¸€ä¸ªè·¯ç”±æç¤ºæ¨¡æ¿</h4><p>LLM ä¼šæ ¹æ®æç¤ºè¯çš„å†…å®¹åœ¨ä¸åŒé“¾ä¹‹é—´è·¯ç”±ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>MULTI_PROMPT_ROUTER_TEMPLATE</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34;Given a raw text input to a </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>language model select the model prompt best suited for the input. </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>You will be given the names of the available prompts and a </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>description of what the prompt is best suited for. </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>You may also revise the original input if you think that revising</span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>it will ultimately lead to a better response from the language model.
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>&lt;&lt; FORMATTING &gt;&gt;
</span></span></span><span class=line><span class=cl><span class=s2>Return a markdown code snippet with a JSON object formatted to look like:
</span></span></span><span class=line><span class=cl><span class=s2>\```json
</span></span></span><span class=line><span class=cl><span class=s2>{{{{
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;destination&#34;: string \ name of the prompt to use or &#34;DEFAULT&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;next_inputs&#34;: string \ a potentially modified version of the original input
</span></span></span><span class=line><span class=cl><span class=s2>}}}}
</span></span></span><span class=line><span class=cl><span class=s2>\```
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>REMEMBER: &#34;destination&#34; MUST be one of the candidate prompt </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>names specified below OR it can be &#34;DEFAULT&#34; if the input is not</span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>well suited for any of the candidate prompts.
</span></span></span><span class=line><span class=cl><span class=s2>REMEMBER: &#34;next_inputs&#34; can just be the original input </span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=s2>if you don&#39;t think any modifications are needed.
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>&lt;&lt; CANDIDATE PROMPTS &gt;&gt;
</span></span></span><span class=line><span class=cl><span class=s2></span><span class=si>{destinations}</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>&lt;&lt; INPUT &gt;&gt;
</span></span></span><span class=line><span class=cl><span class=s2>{{input}}
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>&lt;&lt; OUTPUT (remember to include the ```json)&gt;&gt;&#34;&#34;&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤7ç»„åˆè¯­è¨€æ¨¡å‹è·¯ç”±æç¤ºæ¨¡æ¿æ„æˆè·¯ç”±é“¾>æ­¥éª¤7ï¼šç»„åˆè¯­è¨€æ¨¡å‹ã€è·¯ç”±æç¤ºæ¨¡æ¿ï¼Œæ„æˆè·¯ç”±é“¾</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>router_template</span> <span class=o>=</span> <span class=n>MULTI_PROMPT_ROUTER_TEMPLATE</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>destinations</span><span class=o>=</span><span class=n>destinations_str</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>router_prompt</span> <span class=o>=</span> <span class=n>PromptTemplate</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>template</span><span class=o>=</span><span class=n>router_template</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>input_variables</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;input&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=n>output_parser</span><span class=o>=</span><span class=n>RouterOutputParser</span><span class=p>(),</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>router_chain</span> <span class=o>=</span> <span class=n>LLMRouterChain</span><span class=o>.</span><span class=n>from_llm</span><span class=p>(</span><span class=n>llm</span><span class=p>,</span> <span class=n>router_prompt</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤8ç»„åˆè·¯ç”±é“¾ç›®æ ‡é“¾å’Œé»˜è®¤é“¾åˆ›å»ºæ•´æ¡é“¾>æ­¥éª¤8ï¼šç»„åˆè·¯ç”±é“¾ã€ç›®æ ‡é“¾å’Œé»˜è®¤é“¾ï¼Œåˆ›å»ºæ•´æ¡é“¾</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>chain</span> <span class=o>=</span> <span class=n>MultiPromptChain</span><span class=p>(</span><span class=n>router_chain</span><span class=o>=</span><span class=n>router_chain</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                         <span class=n>destination_chains</span><span class=o>=</span><span class=n>destination_chains</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                         <span class=n>default_chain</span><span class=o>=</span><span class=n>default_chain</span><span class=p>,</span> <span class=n>verbose</span><span class=o>=</span><span class=kc>True</span>
</span></span><span class=line><span class=cl>                        <span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ­¥éª¤9æé—®ä¸åŒç±»å‹çš„é—®é¢˜>æ­¥éª¤9ï¼šæé—®ä¸åŒç±»å‹çš„é—®é¢˜</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># ç‰©ç†é—®é¢˜</span>
</span></span><span class=line><span class=cl><span class=n>chain</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s2>&#34;What is black body radiation?&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>è¾“å‡ºå¦‚ä¸‹ï¼š</p><blockquote><p>> Entering new MultiPromptChain chain&mldr;</p><p>physics: {&lsquo;input&rsquo;: &lsquo;What is black body radiation?&rsquo;}</p><p>> Finished chain.</p><p>&ldquo;Black body radiation refers to the electromagnetic radiation emitted by a perfect black body, which is an object that absorbs all radiation that falls on it and emits radiation at all wavelengths. The radiation emitted by a black body depends only on its temperature and follows a specific distribution known as Planck&rsquo;s law. This type of radiation is important in understanding the behavior of stars, as well as in the development of technologies such as incandescent light bulbs and infrared cameras.&rdquo;</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl># æ•°å­¦é—®é¢˜
</span></span><span class=line><span class=cl>chain.run(&#34;what is 2 + 2&#34;)
</span></span></code></pre></td></tr></table></div></div><p>è¾“å‡ºå¦‚ä¸‹ï¼š</p><blockquote><p>> Entering new MultiPromptChain chain&mldr;</p><p>math: {&lsquo;input&rsquo;: &lsquo;what is 2 + 2&rsquo;}</p><p>> Finished chain.</p><p>&lsquo;As an AI language model, I can answer this question easily. The answer to 2 + 2 is 4.&rsquo;</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl># ç”Ÿç‰©é—®é¢˜ï¼Œæ— åŒ¹é…ï¼Œèµ°é»˜è®¤é“¾
</span></span><span class=line><span class=cl>chain.run(&#34;Why does every cell in our body contain DNA?&#34;)
</span></span></code></pre></td></tr></table></div></div><blockquote><p>> Entering new MultiPromptChain chain&mldr;</p><p>None: {&lsquo;input&rsquo;: &lsquo;Why does every cell in our body contain DNA?&rsquo;}</p><p>> Finished chain.</p><p>&lsquo;Every cell in our body contains DNA because DNA carries the genetic information that determines the characteristics and functions of each cell. DNA contains the instructions for the synthesis of proteins, which are essential for the structure and function of cells. Additionally, DNA is responsible for the transmission of genetic information from one generation to the next. Therefore, every cell in our body needs DNA to carry out its specific functions and to maintain the integrity of the organism as a whole.&rsquo;</p></blockquote><h2 id=ç›¸å…³é“¾æ¥>ç›¸å…³é“¾æ¥</h2><ul><li><p>langchainä¸­æ–‡ç¤¾åŒº <a class=link href=https://www.langchain.cn/ target=_blank rel=noopener>https://www.langchain.cn/</a></p></li><li><p>langchainæ•™ç¨‹ <a class=link href=https://python.langchain.com/docs/get_started/introduction.html target=_blank rel=noopener>https://python.langchain.com/docs/get_started/introduction.html</a></p></li></ul></section><footer class=article-footer><section class=article-tags><a href=/tags/langchain/>LangChain</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css integrity="sha256-J+iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s=" crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js integrity="sha256-InsNdER1b2xUewP+pKCUJpkhiqwHgqiPXDlIk7GzBu4=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI=" crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.querySelector(`.article-content`),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script></article><aside class=related-content--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-content><div class="flex article-list--tile"><article><a href=/p/iii-%E5%9F%BA%E4%BA%8E%E7%A7%81%E6%9C%89%E6%95%B0%E6%8D%AE%E4%BD%BF%E7%94%A8langchain%E6%9E%84%E5%BB%BA%E8%81%8A%E5%A4%A9%E6%9C%BA%E5%99%A8%E4%BA%BA/><div class=article-details><h2 class=article-title>III: åŸºäºç§æœ‰æ•°æ®ä½¿ç”¨LangChainæ„å»ºèŠå¤©æœºå™¨äºº</h2></div></a></article><article><a href=/p/ii-%E5%9F%BA%E4%BA%8Elangchain%E7%9A%84%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E4%B8%8B/><div class=article-details><h2 class=article-title>II: åŸºäºLangChainçš„å¤§è¯­è¨€æ¨¡å‹åº”ç”¨å¼€å‘(ä¸‹)</h2></div></a></article><article><a href=/p/i-%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8A%80%E6%9C%AF%E9%89%B4%E8%B5%8F/><div class=article-details><h2 class=article-title>I: å‘é‡æ•°æ®åº“æŠ€æœ¯é‰´èµ</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2023 importzhhçš„å°ç ´ç«™</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.16.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>