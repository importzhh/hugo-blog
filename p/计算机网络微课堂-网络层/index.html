<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="网络层概述 简介 网络层的主要任务是实现网络互连，进而实现数据包在各网络之间的传输 这些异构型网络N1~N7如果只是需要各自内部通信，他们只要实现"><title>Ⅳ: 计算机网络微课堂-网络层</title><link rel=canonical href=https://blog.importzhh.me/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/><link rel=stylesheet href=/scss/style.min.0d8902b26558cddb5286ea49f2a7aadd5761ed898547e29e5ab572d8c0619ba6.css><meta property="og:title" content="Ⅳ: 计算机网络微课堂-网络层"><meta property="og:description" content="网络层概述 简介 网络层的主要任务是实现网络互连，进而实现数据包在各网络之间的传输 这些异构型网络N1~N7如果只是需要各自内部通信，他们只要实现"><meta property="og:url" content="https://blog.importzhh.me/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/"><meta property="og:site_name" content="importzhh的小破站"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="计算机网络微课堂笔记"><meta property="article:published_time" content="2023-07-15T12:44:47+08:00"><meta property="article:modified_time" content="2023-07-15T12:44:47+08:00"><meta name=twitter:title content="Ⅳ: 计算机网络微课堂-网络层"><meta name=twitter:description content="网络层概述 简介 网络层的主要任务是实现网络互连，进而实现数据包在各网络之间的传输 这些异构型网络N1~N7如果只是需要各自内部通信，他们只要实现"><link rel="shortcut icon" href=/favicon.ico></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_huce6e906a97de2553354850eae15a0392_8624_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>🍥</span></figure><div class=site-meta><h1 class=site-name><a href=/>importzhh的小破站</a></h1><h2 class=site-description>实事求是 思危思退思变</h2></div></header><ol class=social-menu><li><a href=https://github.com/importzhh target=_blank title=GitHub rel=me><svg width="800" height="800" viewBox="-1.65 0 259.3 259.3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid"><g><path fill="#9edcf2" d="M200.9 199.8c0 13.9-32.2 25.1-71.9 25.1-39.7.0-71.9-11.3-71.9-25.1.0-13.9 32.2-25.1 71.9-25.1C168.7 174.7 200.9 185.9 200.9 199.8zm0 0"/><g><defs><path id="SVGID_1_" d="M98.1 244.8c1.6 7.5 5.5 11.9 9.4 14.5h41.1c5-3.4 10.1-9.8 10.1-21.8v-31s.6-7.7 7.7-10.2c0 0 4.1-2.9-.3-4.5.0.0-19.5-1.6-19.5 14.4v23.6s.8 8.7-3.8 12.3v-29.2s.3-9.3 5.1-12.8c0 0 3.2-5.7-3.8-4.2.0.0-13.4 1.9-14 17.6l-.3 30h-3.2l-.3-30c-.6-15.6-14-17.6-14-17.6-7-1.6-3.8 4.2-3.8 4.2 4.8 3.5 5.1 12.8 5.1 12.8v29.5c-4.6-3.3-3.8-12.6-3.8-12.6v-23.6c0-16-19.5-14.4-19.5-14.4-4.5 1.6-.3 4.5-.3 4.5 7 2.6 7.7 10.2 7.7 10.2v21.7L98.1 244.8z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" overflow="visible"/></clipPath><path clip-path="url(#SVGID_2_)" fill="#7dbce7" d="M200.9 199.8c0 13.9-32.2 25.1-71.9 25.1-39.7.0-71.9-11.3-71.9-25.1.0-13.9 32.2-25.1 71.9-25.1C168.7 174.7 200.9 185.9 200.9 199.8zm0 0"/></g><path fill="#9edcf2" d="M46.9 125.9l-2.1 7.2s-.5 2.6 1.9 3.1c2.6-.1 2.4-2.5 2.2-3.2L46.9 125.9zm0 0"/><path fill="#010101" d="M255.8 95.6l.2-.9c-21.1-4.2-42.7-4.3-55.8-3.7 2.1-7.7 2.8-16.7 2.8-26.6.0-14.3-5.4-25.7-14-34.3 1.5-4.9 3.5-15.8-2-29.7.0.0-9.8-3.1-32.1 11.8-8.7-2.2-18-3.3-27.3-3.3-10.2.0-20.5 1.3-30.2 3.9C74.4-2.9 64.3.3 64.3.3c-6.6 16.5-2.5 28.8-1.3 31.8-7.8 8.4-12.5 19.1-12.5 32.2.0 9.9 1.1 18.8 3.9 26.5-13.2-.5-34-.3-54.4 3.8l.2.9c20.4-4.1 41.4-4.2 54.5-3.7.6 1.6 1.3 3.2 2 4.7-13 .4-35.1 2.1-56.3 8.1l.3.9c21.4-6 43.7-7.6 56.6-8 7.8 14.4 23 23.8 50.2 26.7-3.9 2.6-7.8 7-9.4 14.5-5.3 2.5-21.9 8.7-31.9-8.5.0.0-5.6-10.2-16.3-11 0 0-10.4-.2-.7 6.5.0.0 6.9 3.3 11.7 15.6.0.0 6.3 21 36.4 14.2V177s-.6 7.7-7.7 10.2c0 0-4.2 2.9.3 4.5.0.0 19.5 1.6 19.5-14.4v-23.6s-.8-9.4 3.8-12.6v38.8s-.3 9.3-5.1 12.8c0 0-3.2 5.7 3.8 4.2.0.0 13.4-1.9 14-17.6l.3-39.3h3.2l.3 39.3c.6 15.6 14 17.6 14 17.6 7 1.6 3.8-4.2 3.8-4.2-4.8-3.5-5.1-12.8-5.1-12.8v-38.5c4.6 3.6 3.8 12.3 3.8 12.3v23.6c0 16 19.5 14.4 19.5 14.4 4.5-1.6.3-4.5.3-4.5-7-2.6-7.7-10.2-7.7-10.2v-31c0-12.1-5.1-18.5-10.1-21.8 29-2.9 42.9-12.2 49.3-26.8 12.7.3 35.6 1.9 57.4 8.1l.3-.9c-21.7-6.1-44.4-7.7-57.3-8.1.6-1.5 1.1-3 1.6-4.6C212.9 91.4 234.6 91.4 255.8 95.6zm0 0"/><path fill="#f5ccb3" d="M174.6 63.7c6.2 5.7 9.9 12.5 9.9 19.8.0 34.4-25.6 35.3-57.2 35.3S70.1 114 70.1 83.5c0-7.3 3.6-14.1 9.8-19.7 10.3-9.4 27.7-4.4 47.4-4.4 19.7.0 37-5.1 47.3 4.3zm0 0"/><path fill="#fff" d="M108.3 85.3c0 9.5-5.3 17.1-11.9 17.1-6.6.0-11.9-7.7-11.9-17.1.0-9.5 5.3-17.1 11.9-17.1C103 68.1 108.3 75.8 108.3 85.3zm0 0"/><path fill="#af5c51" d="M104.5 85.5c0 6.3-3.6 11.4-7.9 11.4-4.4.0-7.9-5.1-7.9-11.4.0-6.3 3.6-11.4 7.9-11.4S104.5 79.2 104.5 85.5zm0 0"/><path fill="#fff" d="M172.2 85.3c0 9.5-5.3 17.1-11.9 17.1s-11.9-7.7-11.9-17.1c0-9.5 5.3-17.1 11.9-17.1C166.8 68.1 172.2 75.8 172.2 85.3zm0 0"/><path fill="#af5c51" d="M168.3 85.5c0 6.3-3.6 11.4-7.9 11.4-4.4.0-7.9-5.1-7.9-11.4.0-6.3 3.6-11.4 7.9-11.4C164.8 74.1 168.3 79.2 168.3 85.5zm0 0"/><path fill="#af5c51" d="M130.5 100.5c0 1.6-1.3 3-3 3-1.6.0-3-1.3-3-3s1.3-3 3-3c1.59999999999999.0 3 1.3 3 3zm0 0"/><path fill="#af5c51" d="M120.6 108c-.2-.5.1-1 .6-1.2s1 .1 1.2.6c.8 2.2 2.8 3.6 5.1 3.6s4.3-1.5 5.1-3.6c.2-.5.7-.8 1.2-.6s.8.7.6 1.2c-1 2.9-3.8 4.9-6.9 4.9C124.4 112.9 121.6 110.9 120.6 108zm0 0"/><path fill="#c4e5d9" d="M54.5 121.6c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4.0-.8.9-1.4 2.1-1.4C53.6 120.2 54.5 120.8 54.5 121.6zm0 0"/><path fill="#c4e5d9" d="M60.3 124.8c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4.0-.8.9-1.4 2.1-1.4C59.4 123.4 60.3 124 60.3 124.8zm0 0"/><path fill="#c4e5d9" d="M63.8 129c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4s.9-1.4 2.1-1.4C62.9 127.5 63.8 128.2 63.8 129zm0 0"/><path fill="#c4e5d9" d="M67 133.8c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4s.9-1.4 2.1-1.4C66.1 132.3 67 133 67 133.8zm0 0"/><path fill="#c4e5d9" d="M70.5 138.2c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4s.9-1.4 2.1-1.4C69.6 136.8 70.5 137.4 70.5 138.2zm0 0"/><path fill="#c4e5d9" d="M75.3 142.1c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4s.9-1.4 2.1-1.4C74.4 140.6 75.3 141.3 75.3 142.1zm0 0"/><path fill="#c4e5d9" d="M82 144.6c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4s.9-1.4 2.1-1.4S82 143.8 82 144.6zm0 0"/><path fill="#c4e5d9" d="M88.7 144.6c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4s.9-1.4 2.1-1.4S88.7 143.8 88.7 144.6zm0 0"/><path fill="#c4e5d9" d="M95.5 143.5c0 .8-.9 1.4-2.1 1.4-1.1.0-2.1-.6-2.1-1.4s.9-1.4 2.1-1.4C94.5 142.1 95.5 142.7 95.5 143.5zm0 0"/></g></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><li><a href=/links/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg><span>Links</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>暗色模式</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#网络层概述>网络层概述</a><ol><li><a href=#简介>简介</a></li><li><a href=#总结>总结</a></li></ol></li><li><a href=#网络层提供的两种服务>网络层提供的两种服务</a><ol><li><a href=#面向连接的虚电路服务>面向连接的虚电路服务</a></li><li><a href=#无连接的数据报服务>无连接的数据报服务</a></li><li><a href=#虚电路服务与数据报服务的对比>虚电路服务与数据报服务的对比</a></li></ol></li><li><a href=#ipv4>IPv4</a><ol><li><a href=#概述>概述</a></li><li><a href=#分类编址的ipv4地址>分类编址的IPv4地址</a><ol><li><a href=#简介-1>简介</a></li><li><a href=#a类地址><strong>A类地址</strong></a></li><li><a href=#b类地址><strong>B类地址</strong></a></li><li><a href=#c类地址><strong>C类地址</strong></a></li><li><a href=#练习><strong>练习</strong></a></li><li><a href=#总结-1>总结</a></li></ol></li><li><a href=#划分子网的ipv4地址>划分子网的IPv4地址</a><ol><li><a href=#为什么要划分子网>为什么要划分子网</a></li><li><a href=#如何划分子网>如何划分子网</a></li><li><a href=#子网掩码>子网掩码</a></li><li><a href=#总结-2>总结</a></li></ol></li><li><a href=#无分类编址的ipv4地址>无分类编址的IPv4地址</a><ol><li><a href=#为什么使用无分类编址>为什么使用无分类编址</a></li><li><a href=#如何使用无分类编址>如何使用无分类编址</a></li><li><a href=#路由聚合构造超网>路由聚合（构造超网）</a></li><li><a href=#总结-3>总结</a></li></ol></li><li><a href=#ipv4地址的应用规划>IPv4地址的应用规划</a><ol><li><a href=#定长的子网掩码flsmfixed-length-subnet-mask>定长的子网掩码FLSM（Fixed Length Subnet Mask）</a></li><li><a href=#变长的子网掩码vlsmvariable-length-subnet-mask>变长的子网掩码VLSM（Variable Length Subnet Mask）</a></li></ol></li></ol></li><li><a href=#ip数据报的发送和转发过程>IP数据报的发送和转发过程</a></li><li><a href=#静态路由配置及其可能产生的路由环路问题>静态路由配置及其可能产生的路由环路问题</a><ol><li><a href=#概念>概念</a></li><li><a href=#多种情况举例>多种情况举例</a></li><li><a href=#总结-4>总结</a></li></ol></li><li><a href=#路由选择协议>路由选择协议</a><ol><li><a href=#概述-1>概述</a></li><li><a href=#路由信息协议rip>路由信息协议RIP</a></li><li><a href=#开放最短路径优先ospf>开放最短路径优先OSPF</a></li><li><a href=#边界网关协议bgp>边界网关协议BGP</a></li><li><a href=#直接封装ripospf和bgp报文的协议>直接封装RIP、OSPF和BGP报文的协议</a></li></ol></li><li><a href=#ipv4数据报的首部格式>IPv4数据报的首部格式</a><ol><li><a href=#各字段的作用>各字段的作用</a></li><li><a href=#总结-5>总结</a></li></ol></li><li><a href=#网际控制报文协议icmp>网际控制报文协议ICMP</a><ol><li><a href=#概念-1>概念</a></li><li><a href=#icmp差错报告报文>ICMP差错报告报文</a><ol><li><a href=#终点不可达>终点不可达</a></li><li><a href=#源点抑制>源点抑制</a></li><li><a href=#时间超过>时间超过</a></li><li><a href=#参数问题>参数问题</a></li><li><a href=#改变路由重定向>改变路由（重定向）</a></li><li><a href=#不应发送icmp差错报告报文情况>不应发送ICMP差错报告报文情况</a></li></ol></li><li><a href=#icmp应用举例>ICMP应用举例</a><ol><li><a href=#分组网间探测pingpacket-internet-groper>分组网间探测PING（Packet InterNet Groper）</a></li><li><a href=#跟踪路由traceroute>跟踪路由（traceroute）</a></li></ol></li><li><a href=#总结-6>总结</a></li></ol></li><li><a href=#虚拟专用网vpn与网络地址转换nat>虚拟专用网VPN与网络地址转换NAT</a><ol><li><a href=#虚拟专用网vpnvirtual-private-network>虚拟专用网VPN（Virtual Private Network）</a></li><li><a href=#网络地址转换natnetwork-address-translation>网络地址转换NAT（Network Address Translation）</a></li><li><a href=#总结-7>总结</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/>计算机网络</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/>Ⅳ: 计算机网络微课堂-网络层</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Jul 15, 2023</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>阅读时长: 17 分钟</time></div></footer></div></header><section class=article-content><h2 id=网络层概述>网络层概述</h2><h3 id=简介>简介</h3><ul><li>网络层的主要任务是<strong>实现网络互连</strong>，进而<strong>实现数据包在各网络之间的传输</strong></li></ul><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017134630948.png width=1190 height=512 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017134630948_hued754ef9cbf877a540855cb604ab6ff6_241762_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017134630948_hued754ef9cbf877a540855cb604ab6ff6_241762_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=232 data-flex-basis=557px></p><blockquote><p>这些异构型网络N1~N7如果只是需要各自内部通信，他们只要实现各自的物理层和数据链路层即可</p><p>但是如果要将这些异构型网络互连起来，形成一个更大的互联网，就需要实现网络层设备路由器</p><p>有时为了简单起见，可以不用画出这些网络，图中N1~N7，而将他们看做是一条链路即可</p></blockquote><ul><li><p>要实现网络层任务，需要解决一下主要问题：</p><ul><li>网络层向运输层提供怎样的服务（“可靠传输”还是“不可靠传输”）</li></ul><p>在数据链路层那课讲过的可靠传输，详情可以看那边的笔记：网络层对以下的<strong>分组丢失</strong>、<strong>分组失序</strong>、<strong>分组重复</strong>的传输错误采取措施，使得接收方能正确接受发送方发送的数据，就是<strong>可靠传输</strong>，反之，如果什么措施也不采取，则是<strong>不可靠传输</strong></p><ul><li>网络层寻址问题</li></ul><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017135644630.png width=1268 height=505 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017135644630_hu2d79f6b39d8a681661f903cd851fe6dd_304289_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017135644630_hu2d79f6b39d8a681661f903cd851fe6dd_304289_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=251 data-flex-basis=602px></p><ul><li>路由选择问题</li></ul><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017135710478.png width=1204 height=492 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017135710478_hub49dc10f757f9ec7b440227f387a5f14_224906_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017135710478_hub49dc10f757f9ec7b440227f387a5f14_224906_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=244 data-flex-basis=587px></p><blockquote><p>路由器收到数据后，是依据什么来决定将数据包从自己的哪个接口转发出去？</p><p><strong>依据数据包的目的地址和路由器中的路由表</strong></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017135914985.png width=438 height=236 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017135914985_hu86a61da07cf6ed040cb06e4d404a3ac3_53198_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017135914985_hu86a61da07cf6ed040cb06e4d404a3ac3_53198_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=185 data-flex-basis=445px></p><p>但在实际当中，路由器是怎样知道这些路由记录？</p><ul><li>由用户或网络管理员进行人工配置，这种方法只适用于规模较小且网络拓扑不改变的小型互联网</li><li><strong>另一种是实现各种路由选择协议，由路由器执行路由选择协议中所规定的路由选择算法，而自动得出路由表中的路有记录，这种方法更适合规模较大且网络拓扑经常改变的大型互联网</strong></li></ul></blockquote></li></ul><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017142545630.png width=1799 height=604 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017142545630_hu85460d42e2404f2da0c9534de683ce00_189091_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017142545630_hu85460d42e2404f2da0c9534de683ce00_189091_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=297 data-flex-basis=714px></p><blockquote><p>补充 <strong>网络层（网际层）<strong>除了 <strong>IP协议</strong>外，还有之前介绍过的</strong>地址解析协议ARP</strong>，还有<strong>网际控制报文协议ICMP</strong>，<strong>网际组管理协议IGMP</strong></p></blockquote><h3 id=总结>总结</h3><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017140623851.png width=1523 height=784 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017140623851_hub1dba8fcbd750d23abb012b18f7e65ed_643379_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017140623851_hub1dba8fcbd750d23abb012b18f7e65ed_643379_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=194 data-flex-basis=466px></p><hr><h2 id=网络层提供的两种服务>网络层提供的两种服务</h2><ul><li>在计算机网络领域，网络层应该向运输层提供怎样的服务（“<strong>面向连接</strong>”还是“<strong>无连接</strong>”）曾引起了长期的争论。</li><li>争论焦点的实质就是：<strong>在计算机通信中，可靠交付应当由谁来负责</strong>？是<strong>网络</strong>还是<strong>端系统</strong>？</li></ul><h3 id=面向连接的虚电路服务>面向连接的虚电路服务</h3><p><strong>一种观点：让网络负责可靠交付</strong></p><ul><li>这种观点认为，应借助于电信网的成功经验，让网络负责可靠交付，计算机网络应模仿电信网络，使用<strong>面向连接</strong>的通信方式。</li><li>通信之前先建立<strong>虚电路</strong> (Virtual Circuit)，以保证双方通信所需的一切网络资源。</li><li>如果再使用可靠传输的网络协议，就可使所发送的分组无差错按序到达终点，不丢失、不重复。</li></ul><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017141425892.png width=1207 height=475 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017141425892_huf99f421605e320c0612d9899b6409e05_358949_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017141425892_huf99f421605e320c0612d9899b6409e05_358949_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=254 data-flex-basis=609px></p><p><strong>发送方</strong> 发送给 <strong>接收方</strong> 的所有分组都沿着同一条虚电路传送</p><blockquote><ul><li>虚电路表示这只是一条逻辑上的连接，分组都沿着这条逻辑连接按照存储转发方式传送，而并不是真正建立了一条物理连接。</li><li>请注意，电路交换的电话通信是先建立了一条真正的连接。</li><li>因此分组交换的虚连接和电路交换的连接只是类似，但并不完全一样</li></ul></blockquote><h3 id=无连接的数据报服务>无连接的数据报服务</h3><p><strong>另一种观点：网络提供数据报服务</strong></p><ul><li>互联网的先驱者提出了一种崭新的网络设计思路。</li><li>网络层向上只提供简单灵活的、<strong>无连接的</strong>、<strong>尽最大努力交付</strong>的<strong>数据报服务</strong>。</li><li>网络在发送分组时不需要先建立连接。每一个分组（即 IP 数据报）独立发送，与其前后的分组无关（不进行编号）。</li><li><strong>网络层不提供服务质量的承诺</strong>。即所传送的分组可能出错、丢失、重复和失序（不按序到达终点），当然也不保证分组传送的时限。</li></ul><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017141851030.png width=1863 height=699 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017141851030_hua05f10909c36100f32a469fc6fd76cfe_759210_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017141851030_hua05f10909c36100f32a469fc6fd76cfe_759210_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=266 data-flex-basis=639px></p><p><strong>发送方</strong> 发送给 <strong>接收方</strong> 的分组可能沿着不同路径传送</p><blockquote><p><strong>尽最大努力交付</strong></p><ul><li>如果主机（即端系统）中的进程之间的通信需要是可靠的，那么就由网络的<strong>主机中的运输层负责可靠交付（包括差错处理、流量控制等）</strong> 。</li><li><strong>采用这种设计思路的好处是</strong>：网络的造价大大降低，运行方式灵活，能够适应多种应用。</li><li>互连网能够发展到今日的规模，充分证明了当初采用这种设计思路的正确性。</li></ul></blockquote><h3 id=虚电路服务与数据报服务的对比>虚电路服务与数据报服务的对比</h3><div class=table-wrapper><table><thead><tr><th><strong>对比的方面</strong></th><th><strong>虚电路服务</strong></th><th><strong>数据报服务</strong></th></tr></thead><tbody><tr><td><strong>思路</strong></td><td><strong>可靠通信应当由网络来保证</strong></td><td><strong>可靠通信应当由用户主机来保证</strong></td></tr><tr><td><strong>连接的建立</strong></td><td><strong>必须有</strong></td><td><strong>不需要</strong></td></tr><tr><td><strong>终点地址</strong></td><td><strong>仅在连接建立阶段使用，每个分组使用短的虚电路号</strong></td><td><strong>每个分组都有终点的完整地址</strong></td></tr><tr><td><strong>分组的转发</strong></td><td><strong>属于同一条虚电路的分组均按照同一路由进行转发</strong></td><td><strong>每个分组独立选择路由进行转发</strong></td></tr><tr><td><strong>当结点出故障时</strong></td><td><strong>所有通过出故障的结点的虚电路均不能工作</strong></td><td><strong>出故障的结点可能会丢失分组，一些路由可能会发生变化</strong></td></tr><tr><td><strong>分组的顺序</strong></td><td><strong>总是按发送顺序到达终点</strong></td><td><strong>到达终点时不一定按发送顺序</strong></td></tr><tr><td><strong>端到端的差错处理和流量控制</strong></td><td><strong>可以由网络负责，也可以由用户主机负责</strong></td><td><strong>由用户主机负责</strong></td></tr></tbody></table></div><hr><h2 id=ipv4>IPv4</h2><h3 id=概述>概述</h3><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017143206060.png width=1199 height=1151 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017143206060_hue54cca2edfd767ac93fe46c88607d17a_591317_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017143206060_hue54cca2edfd767ac93fe46c88607d17a_591317_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=104 data-flex-basis=250px></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/iShot_2023-07-22_15.10.56.png width=2842 height=1304 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/iShot_2023-07-22_15.10.56_hu98a9896258d1fc08a0e07a39b191fdeb_936025_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/iShot_2023-07-22_15.10.56_hu98a9896258d1fc08a0e07a39b191fdeb_936025_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=217 data-flex-basis=523px></p><h3 id=分类编址的ipv4地址>分类编址的IPv4地址</h3><h4 id=简介-1>简介</h4><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017144317166.png width=1908 height=851 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017144317166_hu6eb7af3e3e272af6cd6e0d81644eb044_348402_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017144317166_hu6eb7af3e3e272af6cd6e0d81644eb044_348402_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=224 data-flex-basis=538px></p><ul><li>每一类地址都由两个固定长度的字段组成，其中一个字段是<strong>网络号 net-id</strong>，它标志主机（或路由器）所连接到的网络，而另一个字段则是<strong>主机号 host-id</strong>，它标志该主机（或路由器）。</li><li>主机号在它前面的网络号所指明的网络范围内必须是唯一的。</li><li>由此可见，<strong>一个 IP 地址在整个互联网范围内是唯一的</strong>。</li></ul><h4 id=a类地址><strong>A类地址</strong></h4><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017145210533.png width=1901 height=903 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017145210533_hu634b85d3b708c07559bdd7e46895c483_633322_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017145210533_hu634b85d3b708c07559bdd7e46895c483_633322_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=210 data-flex-basis=505px></p><h4 id=b类地址><strong>B类地址</strong></h4><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017145508001.png width=1893 height=900 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017145508001_hu4d114ca9d4091844953a6f6396eb9a0a_632332_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017145508001_hu4d114ca9d4091844953a6f6396eb9a0a_632332_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=210 data-flex-basis=504px></p><h4 id=c类地址><strong>C类地址</strong></h4><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017150204774.png width=1888 height=885 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017150204774_hu14f4309d45451f08ee8ac3e8eb6b6ed7_600740_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017150204774_hu14f4309d45451f08ee8ac3e8eb6b6ed7_600740_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=213 data-flex-basis=512px></p><h4 id=练习><strong>练习</strong></h4><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017150543386.png width=1859 height=888 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017150543386_hu1fee788ca591330db0ee444b79663dd5_627600_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017150543386_hu1fee788ca591330db0ee444b79663dd5_627600_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=209 data-flex-basis=502px></p><h4 id=总结-1>总结</h4><p><strong>IP 地址的指派范围</strong></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017152911541.png width=881 height=195 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017152911541_hu4156995ac41cf04a51a0488f35bc62c4_26489_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017152911541_hu4156995ac41cf04a51a0488f35bc62c4_26489_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=451 data-flex-basis=1084px></p><p><strong>一般不使用的特殊的 IP 地址</strong></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017152959586.png width=882 height=318 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017152959586_hub2dcea77b6afa2c4151d0e84a6cbaf1f_46999_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017152959586_hub2dcea77b6afa2c4151d0e84a6cbaf1f_46999_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=277 data-flex-basis=665px></p><p><strong>IP 地址的一些重要特点</strong></p><p>(1) <strong>IP 地址是一种分等级的地址结构</strong>。分两个等级的好处是：</p><ul><li><strong>第一</strong>，IP 地址管理机构在分配 IP 地址时只分配网络号，而剩下的主机号则由得到该网络号的单位自行分配。这样就方便了 IP 地址的管理。</li><li><strong>第二</strong>，路由器仅根据目的主机所连接的网络号来转发分组（而不考虑目的主机号），这样就可以使路由表中的项目数大幅度减少，从而减小了路由表所占的存储空间。</li></ul><p>(2) <strong>实际上 IP 地址是标志一个主机（或路由器）和一条链路的接口</strong>。</p><ul><li>当一个主机同时连接到两个网络上时，该主机就必须同时具有两个相应的 IP 地址，其网络号 net-id 必须是不同的。这种主机称为<strong>多归属主机</strong> (multihomed host)。</li><li>由于一个路由器至少应当连接到两个网络（这样它才能将 IP 数据报从一个网络转发到另一个网络），因此<strong>一个路由器至少应当有两个不同的 IP 地址</strong>。</li></ul><p>(3) <strong>用转发器或网桥连接起来的若干个局域网仍为一个网络</strong>，因此这些局域网都具有同样的网络号 net-id。</p><p>(4) <strong>所有分配到网络号 net-id 的网络，无论是范围很小的局域网，还是可能覆盖很大地理范围的广域网，都是平等的。</strong></p><h3 id=划分子网的ipv4地址>划分子网的IPv4地址</h3><h4 id=为什么要划分子网>为什么要划分子网</h4><p>在早期，IP 地址的设计存在以下问题：</p><ul><li>IP 地址空间的利用率有时很低。</li><li>给每一个物理网络分配一个网络号会使路由表变得太大因而使网络性能变坏。</li><li>两级的 IP 地址不够灵活。</li></ul><p>如果想要将原来的网络划分成三个独立的网路
是否可以从主机号部分借用一部分作为子网号</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017155026814.png width=1681 height=887 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017155026814_hu0b7a715dee46cc004bf65545272f79eb_595627_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017155026814_hu0b7a715dee46cc004bf65545272f79eb_595627_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=189 data-flex-basis=454px></p><blockquote><p>但是如果未在图中标记子网号部分，那么我们和计算机又如何知道分类地址中主机号有多少比特被用作子网号了呢？</p><p>所以就有了划分子网的工具：<strong>子网掩码</strong></p><ul><li>从 1985 年起在 IP 地址中又增加了一个“<strong>子网号字段</strong>”，使两级的 IP 地址变成为<strong>三级的 IP 地址</strong>。</li><li>这种做法叫做<strong>划分子网</strong> (subnetting) 。</li><li>划分子网已成为互联网的正式标准协议。</li></ul></blockquote><h4 id=如何划分子网>如何划分子网</h4><p>基本思路</p><ul><li>划分子网纯属一个<strong>单位内部的事情</strong>。单位对外仍然表现为没有划分子网的网络。</li><li>从主机号<strong>借用</strong>若干个位作为<strong>子网号</strong> subnet-id，而主机号 host-id 也就相应减少了若干个位。</li></ul><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017155930011.png width=545 height=190 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017155930011_hu67b10f8983298a1e90fc609e5d68f228_8428_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017155930011_hu67b10f8983298a1e90fc609e5d68f228_8428_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=286 data-flex-basis=688px></p><ul><li>凡是从其他网络发送给本单位某个主机的 IP 数据报，仍然是根据 IP 数据报的<strong>目的网络号</strong> net-id，先找到连接在本单位网络上的路由器。</li><li>然后<strong>此路由器</strong>在收到 IP 数据报后，再按<strong>目的网络号</strong> net-id 和<strong>子网号</strong> subnet-id 找到目的子网。</li><li>最后就将 IP 数据报直接交付目的主机。</li></ul><p>划分为三个子网后对外仍是一个网络</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017160116239.png width=773 height=422 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017160116239_hu3916664e714b7ab578d1b5757ec277d2_88901_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017160116239_hu3916664e714b7ab578d1b5757ec277d2_88901_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=183 data-flex-basis=439px></p><blockquote><ul><li><strong>优点</strong>
> 1. 减少了 IP 地址的浪费
2. 使网络的组织更加灵活
3. 更便于维护和管理</li><li><strong>划分子网纯属一个单位内部的事情，对外部网络透明</strong>，对外仍然表现为没有划分子网的一个网络。</li></ul></blockquote><h4 id=子网掩码>子网掩码</h4><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017160252066.png width=1888 height=795 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017160252066_hu45b9534e44cca118e5b54e105b434cd4_590289_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017160252066_hu45b9534e44cca118e5b54e105b434cd4_590289_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=237 data-flex-basis=569px></p><blockquote><p><strong>(IP 地址) AND (子网掩码) = 网络地址</strong> 重要，下面很多相关知识都会用到</p></blockquote><p>你可能记住需要一些常见的二进制与十进制的对应值，例如：</p><p>00000000 = 0
00000001 = 1
00000010 = 2
00000100 = 4
00001000 = 8
00010000 = 16
00100000 = 32
01000000 = 64
10000000 = 128
这些都是只有一位为 1 的情况。你还应该记住一些其他常见的值，</p><p>例如 255（11111111），254（11111110），252（11111100），
248（11111000），240（11110000），224（11100000），
192（11000000），128（10000000）。这些都是网络掩码常用的值。</p><p>举例
例子1</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017161651058.png width=969 height=1211 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017161651058_hu382fb2327e8933fe2b522770f486692f_475241_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017161651058_hu382fb2327e8933fe2b522770f486692f_475241_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=80 data-flex-basis=192px></p><p>例子2</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017161719339.png width=1835 height=885 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017161719339_hu123c26b0e5f197a271b556b780c7b743_1036901_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017161719339_hu123c26b0e5f197a271b556b780c7b743_1036901_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=207 data-flex-basis=497px></p><p><strong>默认子网掩码</strong></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017162807076.png width=1412 height=877 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017162807076_hu00527be6ac2f563b774c99018c0bbd1a_480937_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017162807076_hu00527be6ac2f563b774c99018c0bbd1a_480937_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=161 data-flex-basis=386px></p><h4 id=总结-2>总结</h4><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017162938612.png width=1731 height=894 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017162938612_hu512ec0dae7e50c0384e9250b9b7e810b_886693_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017162938612_hu512ec0dae7e50c0384e9250b9b7e810b_886693_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=193 data-flex-basis=464px></p><blockquote><ul><li>子网掩码是一个网络或一个子网的重要属性。</li><li>路由器在和相邻路由器交换路由信息时，必须把自己所在网络（或子网）的子网掩码告诉相邻路由器。</li><li>路由器的路由表中的每一个项目，除了要给出目的网络地址外，还必须同时给出该网络的子网掩码。</li><li>若一个路由器连接在两个子网上，就拥有两个网络地址和两个子网掩码。</li></ul></blockquote><h3 id=无分类编址的ipv4地址>无分类编址的IPv4地址</h3><h4 id=为什么使用无分类编址>为什么使用无分类编址</h4><p><strong>无分类域间路由选择 CIDR</strong> (Classless Inter-Domain Routing)。</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017164031532.png width=1675 height=762 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017164031532_hue02e9a891f742a3f294dfe98a3cc400b_673591_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017164031532_hue02e9a891f742a3f294dfe98a3cc400b_673591_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=219 data-flex-basis=527px></p><blockquote><p><strong>CIDR 最主要的特点</strong></p><ul><li>CIDR使用各种长度的“<strong>网络前缀</strong>”(network-prefix)来代替分类地址中的网络号和子网号。</li><li><strong>IP 地址从三级编址（使用子网掩码）又回到了两级编址</strong>。</li></ul></blockquote><h4 id=如何使用无分类编址>如何使用无分类编址</h4><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017165037268.png width=1773 height=852 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017165037268_hu4253b5ae772358a759d94b46eab51262_579951_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017165037268_hu4253b5ae772358a759d94b46eab51262_579951_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=208 data-flex-basis=499px></p><p>举例</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017165113442.png width=1838 height=894 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017165113442_huf636469f5aa06affd677e2dfbdae9d0e_409009_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017165113442_huf636469f5aa06affd677e2dfbdae9d0e_409009_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=205 data-flex-basis=493px></p><h4 id=路由聚合构造超网>路由聚合（构造超网）</h4><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017165615915.png width=1869 height=946 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017165615915_hu8b0bb8713f44accfbe5e4980dded8c94_774758_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017165615915_hu8b0bb8713f44accfbe5e4980dded8c94_774758_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=197 data-flex-basis=474px></p><h4 id=总结-3>总结</h4><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017170552495.png width=1823 height=966 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017170552495_hubf61ede6ca5fab2276ef3ecde89df7e4_1272736_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201017170552495_hubf61ede6ca5fab2276ef3ecde89df7e4_1272736_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=188 data-flex-basis=452px></p><h3 id=ipv4地址的应用规划>IPv4地址的应用规划</h3><p>给定一个IPv4地址快，如何将其划分成几个更小的地址块，并将这些地址块分配给互联网中不同网络，进而可以给各网络中的主机和路由器接口分配IPv4地址</p><h4 id=定长的子网掩码flsmfixed-length-subnet-mask>定长的子网掩码FLSM（Fixed Length Subnet Mask）</h4><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018143550103.png width=882 height=736 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018143550103_hu298a64f033736153451f035595b527ab_453597_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018143550103_hu298a64f033736153451f035595b527ab_453597_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=119 data-flex-basis=287px></p><p><strong>划分子网的IPv4就是定长的子网掩码</strong></p><p>举例</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018140809079.png width=1817 height=781 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018140809079_hu62c0991d9fd5bc5f064c13852ca10f23_583519_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018140809079_hu62c0991d9fd5bc5f064c13852ca10f23_583519_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=232 data-flex-basis=558px></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018140916631.png width=1156 height=452 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018140916631_hua6c81515b6addd1171cd923b1f5182cb_177442_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018140916631_hua6c81515b6addd1171cd923b1f5182cb_177442_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=255 data-flex-basis=613px></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018141132446.png width=1845 height=786 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018141132446_hu7e4ae585bbddb00974faea850b452d98_1053711_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018141132446_hu7e4ae585bbddb00974faea850b452d98_1053711_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=234 data-flex-basis=563px></p><blockquote><p>通过上面步骤分析，就可以从子网1~8中任选5个分配给左图中的N1~N5</p><p><strong>采用定长的子网掩码划分，只能划分出2^n个子网，其中n是从主机号部分借用的用来作为子网号的比特数量，每个子网所分配的IP地址数量相同</strong></p><p><strong>但是也因为每个子网所分配的IP地址数量相同，不够灵活，容易造成IP地址的浪费</strong></p></blockquote><h4 id=变长的子网掩码vlsmvariable-length-subnet-mask>变长的子网掩码VLSM（Variable Length Subnet Mask）</h4><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018143632352.png width=874 height=742 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018143632352_hu93a70da5e2d331d03f474f62ddec0cb1_377161_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018143632352_hu93a70da5e2d331d03f474f62ddec0cb1_377161_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=117 data-flex-basis=282px></p><p><strong>无分类编址的IPv4就是变长的子网掩码</strong></p><p>举例</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018142333145.png width=1841 height=793 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018142333145_hu8b4c61410720db1b8c86e8283a6abe3e_917126_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018142333145_hu8b4c61410720db1b8c86e8283a6abe3e_917126_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=232 data-flex-basis=557px></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018143344440.png width=1849 height=785 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018143344440_hucfaf45dc9002f39fa654d450f7a7d571_815313_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018143344440_hucfaf45dc9002f39fa654d450f7a7d571_815313_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=235 data-flex-basis=565px></p><hr><h2 id=ip数据报的发送和转发过程>IP数据报的发送和转发过程</h2><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018144335297.png width=1779 height=630 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018144335297_hu56b3b6922a81352ab4cbf4920042a7b3_467798_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018144335297_hu56b3b6922a81352ab4cbf4920042a7b3_467798_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=282 data-flex-basis=677px></p><p>举例</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018151314019.png width=1773 height=813 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018151314019_hu5d15246d6dfd3cf499a8984b4b35773a_562778_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018151314019_hu5d15246d6dfd3cf499a8984b4b35773a_562778_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=218 data-flex-basis=523px></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018150151171.png width=1202 height=477 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018150151171_huc4f8a58fdea9da6657a6c8944ef1272d_205386_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018150151171_huc4f8a58fdea9da6657a6c8944ef1272d_205386_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=251 data-flex-basis=604px></p><p>源主机如何知道目的主机是否与自己在同一个网络中，是直接交付，还是间接交付？</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018150223497.png width=1208 height=531 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018150223497_huaeddb28583bd0031f605c5368334617f_245028_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018150223497_huaeddb28583bd0031f605c5368334617f_245028_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=227 data-flex-basis=545px></p><blockquote><p>可以通过<strong>目的地址IP</strong>和<strong>源地址的子网掩码</strong>进行<strong>逻辑与运算</strong>得到<strong>目的网络地址</strong></p><ul><li>如果<strong>目的网络地址</strong>和<strong>源网络地址</strong> <strong>相同</strong>，就是<strong>在同一个网络</strong>中，属于<strong>直接交付</strong></li><li>如果<strong>目的网络地址</strong>和<strong>源网络地址</strong> <strong>不相同</strong>，就<strong>不在同一个网络</strong>中，属于<strong>间接交付</strong>，传输给主机所在网络的<strong>默认网关</strong>（路由器——下图会讲解）,由默认网关帮忙转发</li></ul></blockquote><p>主机C如何知道路由器R的存在？</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018145501063.png width=1882 height=817 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018145501063_hu654b111dc64ad65f52369ad519e82ebd_506207_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018145501063_hu654b111dc64ad65f52369ad519e82ebd_506207_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=230 data-flex-basis=552px></p><blockquote><p>用户为了让本网络中的主机能和其他网络中的主机进行通信，就必须给其指定本网络的一个路由器的接口，由该路由器帮忙进行转发，<strong>所指定的路由器</strong>，也被称为<strong>默认网关</strong></p><p>例如。路由器的接口0的IP地址192.168.0.128做为左边网络的默认网关</p></blockquote><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018150029179.png width=1821 height=815 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018150029179_hu92ceb3e6e5a0dfac0f4a9e81a44c3d1c_387144_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018150029179_hu92ceb3e6e5a0dfac0f4a9e81a44c3d1c_387144_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=223 data-flex-basis=536px></p><blockquote><p>主机A会将该IP数据报传输给自己的默认网关，也就是图中所示的路由器接口0</p></blockquote><p>路由器收到IP数据报后如何转发？</p><ul><li>检查IP数据报首部是否出错：<ul><li>若出错，则直接丢弃该IP数据报并通告源主机</li><li>若没有出错，则进行转发</li></ul></li><li>根据IP数据报的目的地址在路由表中查找匹配的条目：<ul><li>若找到匹配的条目，则转发给条目中指示的吓一跳</li><li>若找不到，则丢弃该数据报并通告源主机</li></ul></li></ul><p>假设IP数据报首部没有出错，路由器取出IP数据报首部各地址字段的值</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018151108989.png width=1804 height=806 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018151108989_hueea4f7c29e7cf8df0d5c2409ebebcb8b_464273_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018151108989_hueea4f7c29e7cf8df0d5c2409ebebcb8b_464273_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=223 data-flex-basis=537px></p><p>接下来路由器对该IP数据报进行查表转发</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018151528027.png width=1839 height=889 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018151528027_hu342a74aeace1a3b4ad7800c8ea8b3039_621096_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018151528027_hu342a74aeace1a3b4ad7800c8ea8b3039_621096_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=206 data-flex-basis=496px></p><blockquote><p>逐条检查路由条目，将目的地址与路由条目中的地址掩码进行逻辑与运算得到目的网络地址，然后与路由条目中的目的网络进行比较，如果相同，则这条路由条目就是匹配的路由条目，按照它的下一条指示，图中所示的也就是接口1转发该IP数据报</p></blockquote><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018151956275.png width=1798 height=901 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018151956275_hu81059aee30cddeca6c0df709656f0e58_495293_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018151956275_hu81059aee30cddeca6c0df709656f0e58_495293_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=199 data-flex-basis=478px></p><p>路由器是隔离广播域的</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018152040610.png width=1804 height=834 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018152040610_hue38d7fb0b4980d1b1180218108ae5f60_464185_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018152040610_hue38d7fb0b4980d1b1180218108ae5f60_464185_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=216 data-flex-basis=519px></p><hr><h2 id=静态路由配置及其可能产生的路由环路问题>静态路由配置及其可能产生的路由环路问题</h2><h3 id=概念>概念</h3><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018155702081.png width=1683 height=569 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018155702081_hu90d5cac72b9067489f3ef849c706ae51_327265_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018155702081_hu90d5cac72b9067489f3ef849c706ae51_327265_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=295 data-flex-basis=709px></p><h3 id=多种情况举例>多种情况举例</h3><p><strong>静态路由配置</strong></p><p>举例</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018160349375.png width=1888 height=813 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018160349375_hu203f4d614a92df6a61a5ad7e0562837d_715206_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018160349375_hu203f4d614a92df6a61a5ad7e0562837d_715206_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=232 data-flex-basis=557px></p><p><strong>默认路由</strong></p><p>举例</p><p>默认路由可以被所有网络匹配，但路由匹配有优先级，默认路由是优先级最低的</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018160906284.png width=1895 height=889 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018160906284_hu28b2e66668a1581baf1a9ff03c961698_718854_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018160906284_hu28b2e66668a1581baf1a9ff03c961698_718854_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=213 data-flex-basis=511px></p><p><strong>特定主机路由</strong></p><p>举例</p><p>有时候，我们可以给路由器添加针对某个主机的特定主机路由条目</p><p>一般用于网络管理人员对网络的管理和测试</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018161440257.png width=1906 height=879 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018161440257_huf0b38a7b5d753aa0d6f160b70b322b64_749222_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018161440257_huf0b38a7b5d753aa0d6f160b70b322b64_749222_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=216 data-flex-basis=520px></p><blockquote><p>多条路由可选，匹配路由最具体的</p></blockquote><p><strong>静态路由配置错误导致路由环路</strong></p><p>举例</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018161542579.png width=1896 height=760 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018161542579_hu8bd8e5b5dd9e35c89b347af74c0cb201_820946_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018161542579_hu8bd8e5b5dd9e35c89b347af74c0cb201_820946_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=249 data-flex-basis=598px></p><p>假设将R2的路由表中第三条目录配置错了下一跳</p><p>这导致R2和R3之间产生了路由环路</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018162041966.png width=1902 height=934 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018162041966_hu9589ca1ecd1b79103b49f1472e7f6ace_1134780_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018162041966_hu9589ca1ecd1b79103b49f1472e7f6ace_1134780_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=203 data-flex-basis=488px></p><p><strong>聚合了不存在的网络而导致路由环路</strong></p><p>举例</p><p>正常情况</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018162333671.png width=1865 height=838 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018162333671_huc85d38801e06d375bfb3de7aacc4bcdd_838042_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018162333671_huc85d38801e06d375bfb3de7aacc4bcdd_838042_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=222 data-flex-basis=534px></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018162759562.png width=1817 height=897 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018162759562_hu495c565d11ef68ad2d551d8adddf97f7_668940_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018162759562_hu495c565d11ef68ad2d551d8adddf97f7_668940_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=202 data-flex-basis=486px></p><p>错误情况</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018163323343.png width=1841 height=953 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018163323343_hu51ef2dd4e5fe861672479657e674d0aa_887145_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018163323343_hu51ef2dd4e5fe861672479657e674d0aa_887145_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=193 data-flex-basis=463px></p><p>解决方法</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018163933715.png width=1877 height=968 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018163933715_hubb190f0e43487af17b4d52e3efb45c0a_895916_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018163933715_hubb190f0e43487af17b4d52e3efb45c0a_895916_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=193 data-flex-basis=465px></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018164453398.png width=1887 height=953 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018164453398_hube08f199ff7f9123972c625f4f0b6484_847617_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018164453398_hube08f199ff7f9123972c625f4f0b6484_847617_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=198 data-flex-basis=475px></p><blockquote><p>黑洞路由的下一跳为null0，这是路由器内部的虚拟接口，IP数据报进入它后就被丢弃</p></blockquote><p><strong>网络故障而导致路由环路</strong></p><p>举例</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018164811811.png width=1873 height=841 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018164811811_huf9ca416686cc89370431cd0be7337c2f_572368_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018164811811_huf9ca416686cc89370431cd0be7337c2f_572368_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=222 data-flex-basis=534px></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018164913684.png width=1848 height=841 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018164913684_huf3445dc19a3b60c08ea85fe29411d7cd_709282_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018164913684_huf3445dc19a3b60c08ea85fe29411d7cd_709282_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=219 data-flex-basis=527px></p><p>解决方法</p><p>添加故障的网络为黑洞路由</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018165122023.png width=1811 height=852 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018165122023_huaac59b8e07cf3b43be5c39ac4e59fafa_590270_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018165122023_huaac59b8e07cf3b43be5c39ac4e59fafa_590270_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=212 data-flex-basis=510px></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018165153517.png width=1825 height=832 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018165153517_hu7673a016fd4c15dd5312c81239d109bf_685237_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018165153517_hu7673a016fd4c15dd5312c81239d109bf_685237_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=219 data-flex-basis=526px></p><p>假设。一段时间后故障网络恢复了</p><p>R1又自动地得出了其接口0的直连网络的路由条目</p><p>针对该网络的黑洞网络会自动失效</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018165328319.png width=1853 height=906 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018165328319_hu4a8225f8c91451b008ce1efce21af941_627569_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018165328319_hu4a8225f8c91451b008ce1efce21af941_627569_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=204 data-flex-basis=490px></p><p>如果又故障</p><p>则生效该网络的黑洞网络</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018165521938.png width=1874 height=841 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018165521938_hu63d7d259ca8ed9b1668334f7e92fd9a4_599449_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018165521938_hu63d7d259ca8ed9b1668334f7e92fd9a4_599449_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=222 data-flex-basis=534px></p><h3 id=总结-4>总结</h3><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018165709294.png width=1531 height=901 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018165709294_huc043767c8b4af9580152e8b0cf3500cb_501849_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201018165709294_huc043767c8b4af9580152e8b0cf3500cb_501849_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=169 data-flex-basis=407px></p><hr><h2 id=路由选择协议>路由选择协议</h2><h3 id=概述-1>概述</h3><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019134827343.png width=1895 height=668 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019134827343_huc05d226dd89d7c6befae0697f0ec1988_441415_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019134827343_huc05d226dd89d7c6befae0697f0ec1988_441415_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=283 data-flex-basis=680px></p><p><strong>因特网所采用的路由选择协议的主要特点</strong></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019134946971.png width=1828 height=765 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019134946971_hu6991eb3afec1511d5096046a14bcc547_369291_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019134946971_hu6991eb3afec1511d5096046a14bcc547_369291_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=238 data-flex-basis=573px></p><p><strong>因特网采用分层次的路由选择协议</strong></p><ul><li><strong>自治系统 AS</strong>：在单一的技术管理下的一组路由器，而这些路由器使用一种 AS 内部的路由选择协议和共同的度量以确定分组在该 AS 内的路由，同时还使用一种 AS 之间的路由选择协议用以确定分组在 AS之间的路由。</li></ul><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019135122326.png width=1876 height=636 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019135122326_hu8061d06523b8a2856288ceee9a61e6c6_599493_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019135122326_hu8061d06523b8a2856288ceee9a61e6c6_599493_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=294 data-flex-basis=707px></p><blockquote><p>自治系统之间的路由选择简称为域间路由选择，自治系统内部的路由选择简称为域内路由选择</p></blockquote><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019135328925.png width=1842 height=651 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019135328925_hu92a630e574c4d68d9b76fe77bc94c0ea_601084_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019135328925_hu92a630e574c4d68d9b76fe77bc94c0ea_601084_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=282 data-flex-basis=679px></p><blockquote><p>域间路由选择使用外部网关协议EGP这个类别的路由选择协议</p><p>域内路由选择使用内部网关协议IGP这个类别的路由选择协议</p><p><strong>网关协议</strong>的名称可称为<strong>路由协议</strong></p></blockquote><p><strong>常见的路由选择协议</strong></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019140009740.png width=1891 height=769 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019140009740_hu9c107b3fd56f8116c2d870dc10a1c057_549193_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019140009740_hu9c107b3fd56f8116c2d870dc10a1c057_549193_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=245 data-flex-basis=590px></p><p><strong>路由器的基本结构</strong></p><p>路由器是一种具有多个输入端口，和输出端口的专用计算机，其任务是转发分组</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019140234652.png width=1755 height=840 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019140234652_huf6ca63a83291e673e160aa425b0bc928_480741_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019140234652_huf6ca63a83291e673e160aa425b0bc928_480741_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=208 data-flex-basis=501px></p><p>路由器结构可划分为两大部分：</p><p>1、<strong>分组转发部分</strong></p><p>由三部分构成</p><ul><li><p>交换结构</p></li><li><p>一组输入端口：</p><p>信号从某个输入端口进入路由器</p><p>物理层将信号转换成比特流，送交数据链路层处理</p><p>数据链路层识别从比特流中识别出帧，去掉帧头和帧尾后，送交网络层处理</p><p>如果送交网络层的分组是普通待转发的数据分组</p><p>则根据分组首部中的目的地址进行查表转发</p><p>若找不到匹配的转发条目，则丢弃该分组，否则，按照匹配条目中所指示的端口进行转发</p></li><li><p>一组输出端口</p><p>网络层更新数据分组首部中某些字段的值，例如将数据分组的生存时间减1，然后送交数据链路层进行封装</p><p>数据链路层将数据分组封装成帧，交给物理层处理</p><p>物理层将帧看成比特流将其变换成相应的电信号进行发送</p></li></ul><blockquote><p>路由器的各端口还会有输入缓冲区和输出缓冲区</p><ul><li><p>输入缓冲区用来暂存新进入路由器但还来不及处理的分组</p></li><li><p>输出缓冲区用来暂存已经处理完毕但还来不及发送的分组</p></li></ul><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019143040253.png width=1759 height=497 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019143040253_hub91601f6f072b672f7327715ae7ed244_276128_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019143040253_hub91601f6f072b672f7327715ae7ed244_276128_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=353 data-flex-basis=849px></p><p><strong>路由器的端口一般都具有输入和输出功能</strong>，这些实例分出了输入端口和输出端口是更好演示路由基本工作过程</p></blockquote><p>2、<strong>路由选择部分</strong></p><ul><li><p>路由选择部分的核心构件是路由选择处理机，它的任务是根据所使用的路由选择协议。周期性地与其他路由器 进行路由信息的交互，来更新路由表</p><p>如果送交给输入端口的网络层的分组是路由器之间交换路由信息的路由报文，则把这种分组送交给路由选择处理机</p><p>路由选择处理机根据分组的内容来更新自己的<strong>路由表</strong></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019142415055.png width=1759 height=872 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019142415055_huf8d4f0174ad71d4f390b631bd83dfc36_488087_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019142415055_huf8d4f0174ad71d4f390b631bd83dfc36_488087_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=201 data-flex-basis=484px></p><p>路由选择处理机还会周期性地给其他路由器发送自己所知道的路由信息</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019142924889.png width=1106 height=868 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019142924889_huf90857f0efdd3a6320d93234417fe4b7_353659_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019142924889_huf90857f0efdd3a6320d93234417fe4b7_353659_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=127 data-flex-basis=305px></p></li></ul><h3 id=路由信息协议rip>路由信息协议RIP</h3><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019144915687.png width=1845 height=851 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019144915687_hu343db537ed5f543a3fb84d4b14c9b794_668857_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019144915687_hu343db537ed5f543a3fb84d4b14c9b794_668857_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=216 data-flex-basis=520px></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019145247606.png width=913 height=1225 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019145247606_hu95956f51a7526794d27aa5add61fa14e_410034_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019145247606_hu95956f51a7526794d27aa5add61fa14e_410034_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=74 data-flex-basis=178px></p><p><strong>RIP的基本工作过程</strong></p><p>举例</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019145510947.png width=1901 height=832 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019145510947_hu6c33732cb75baa170a3fb416c9d39d50_683292_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019145510947_hu6c33732cb75baa170a3fb416c9d39d50_683292_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=228 data-flex-basis=548px></p><p><strong>RIP的路由条目的更新规则</strong></p><p>举例1</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019145627339.png width=1448 height=588 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019145627339_hu167334e4ecb2e51d0c665eef41724037_161548_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019145627339_hu167334e4ecb2e51d0c665eef41724037_161548_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=246 data-flex-basis=591px></p><blockquote><p>路由器C的表到达各目的网络的下一条都记为问号，可以理解为路由器D并不需要关心路由器C的这些内容</p><p>假设路由器C的RIP更新报文发送周期到了，则路由器C将自己路由表中的相关路由信息封装到RIP更新报文中发送给路由器D</p></blockquote><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019150120900.png width=1446 height=517 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019150120900_hu4f8bf92df2cdd09e6dfdd91bfec86b0c_184660_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019150120900_hu4f8bf92df2cdd09e6dfdd91bfec86b0c_184660_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=279 data-flex-basis=671px></p><blockquote><p>路由器C能到达这些网络，说明路由器C的相邻路由器也能到达，只是比路由器C的距离大1，于是根据距离的对比，路由器D更新自己的路由表</p></blockquote><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019150412666.png width=1907 height=674 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019150412666_hu486f3d67e4a10f83696d26e0e7c17c83_422139_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019150412666_hu486f3d67e4a10f83696d26e0e7c17c83_422139_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=282 data-flex-basis=679px></p><p>举例2</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019150525711.png width=1897 height=650 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019150525711_hu150a4e6adfe4bc978081e9b7fc2aa67e_397603_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019150525711_hu150a4e6adfe4bc978081e9b7fc2aa67e_397603_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=291 data-flex-basis=700px></p><p><strong>RIP存在“坏消息传播得慢”的问题</strong></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019151041492.png width=1863 height=475 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019151041492_hu431bfef8e500cff8246faba428e8b851_228207_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019151041492_hu431bfef8e500cff8246faba428e8b851_228207_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=392 data-flex-basis=941px></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019151135255.png width=1845 height=523 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019151135255_huf805704d11fd99294e0cf44f31886cd4_218141_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019151135255_huf805704d11fd99294e0cf44f31886cd4_218141_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=352 data-flex-basis=846px></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019151332767.png width=1874 height=739 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019151332767_huf0e46a756c3a43a8ff1a54e729486201_367965_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019151332767_huf0e46a756c3a43a8ff1a54e729486201_367965_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=253 data-flex-basis=608px></p><p>解决方法</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019151639181.png width=1803 height=889 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019151639181_hu60b6def16bfedecb9a74b6f8b5f6edf5_639665_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019151639181_hu60b6def16bfedecb9a74b6f8b5f6edf5_639665_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=202 data-flex-basis=486px></p><blockquote><p>但是，这些方法也不能完全解决“坏消息传播得慢”的问题，这是距离向量的本质决定</p></blockquote><p><strong>总结</strong></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019152526098.png width=1691 height=903 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019152526098_hu1e7f44d27546f4bf14decc66aa02c1ba_955871_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019152526098_hu1e7f44d27546f4bf14decc66aa02c1ba_955871_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=187 data-flex-basis=449px></p><blockquote><p>RIP 协议的优缺点</p><p>优点：</p><ol><li>实现简单，开销较小。</li></ol><p>缺点：</p><ol><li><p>RIP 限制了网络的规模，它能使用的最大距离为 15（16 表示不可达）。</p></li><li><p>路由器之间交换的路由信息是路由器中的完整路由表，因而随着网络规模的扩大，开销也就增加。</p></li><li><p>“坏消息传播得慢”，使更新过程的收敛时间过长。</p></li></ol></blockquote><h3 id=开放最短路径优先ospf>开放最短路径优先OSPF</h3><p><strong>开放最短路径优先 OSPF (Open Shortest Path First)</strong></p><p><strong>注意</strong>：OSPF 只是一个协议的名字，它并不表示其他的路由选择协议不是“最短路径优先”。</p><p><strong>概念</strong></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019161841695.png width=940 height=797 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019161841695_hu1d9dfcb51b1c348a8d9339df2b91cdc8_322563_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019161841695_hu1d9dfcb51b1c348a8d9339df2b91cdc8_322563_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=117 data-flex-basis=283px></p><p><strong>问候（Hello）分组</strong></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019161653875.png width=1603 height=888 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019161653875_hufe61879f7052b12b8c3a2417136d0224_477188_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019161653875_hufe61879f7052b12b8c3a2417136d0224_477188_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=180 data-flex-basis=433px></p><blockquote><p>IP数据报首部中协议号字段的取值应为89，来表明IP数据报的数据载荷为OSPF分组</p></blockquote><p><strong>发送链路状态通告LSA</strong></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019162341151.png width=1734 height=883 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019162341151_hu96723db300a4b1507dbbb86ac7e64112_428479_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019162341151_hu96723db300a4b1507dbbb86ac7e64112_428479_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=196 data-flex-basis=471px></p><blockquote><p>洪泛法有点类似于广播，就是从一个接口进来，从其他剩余所有接口出去</p></blockquote><p><strong>链路状态数据库同步</strong></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019162933483.png width=1778 height=885 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019162933483_huc25e8ca88b54e8e7342a776b224a05b8_453719_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019162933483_huc25e8ca88b54e8e7342a776b224a05b8_453719_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=200 data-flex-basis=482px></p><p><strong>使用SPF算法计算出各自路由器到达其他路由器的最短路径</strong></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019163148068.png width=1771 height=890 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019163148068_hua13802af3943ee6967a02db4f8449899_611809_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019163148068_hua13802af3943ee6967a02db4f8449899_611809_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=198 data-flex-basis=477px></p><p><strong>OSPF五种分组类型</strong></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019163250129.png width=1616 height=717 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019163250129_hu6f2498462d089c1eb9d2433d4777d248_487731_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019163250129_hu6f2498462d089c1eb9d2433d4777d248_487731_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=225 data-flex-basis=540px></p><p><strong>OSPF的基本工作过程</strong></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019163746254.png width=1866 height=808 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019163746254_hu8247e88bd9e5a4de9d2b546cbbca1d4c_454530_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019163746254_hu8247e88bd9e5a4de9d2b546cbbca1d4c_454530_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=230 data-flex-basis=554px></p><p><strong>OSPF在多点接入网络中路由器邻居关系建立</strong></p><p>如果不采用其他机制，将会产生大量的多播分组</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019164657606.png width=1815 height=890 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019164657606_huba36a85fc94c80fa480dde22f13ec09f_567054_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019164657606_huba36a85fc94c80fa480dde22f13ec09f_567054_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=203 data-flex-basis=489px></p><blockquote><p>若DR出现问题，则由BDR顶替DR</p></blockquote><p><strong>为了使OSPF能够用于规模很大的网络，OSPF把一个自治系统再划分为若干个更小的范围，叫做区域（Area）</strong></p><ul><li><p>在该自治系统内，所有路由器都使用OSPF协议，OSPF将该自治系统再划分成4个更小的区域</p></li><li><p>每个区域都有一个32比特的区域标识符</p></li><li><p>主干区域的区域标识符必须为0，主干区域用于连通其他区域</p></li><li><p>其他区域的区域标识符不能为0且不相同</p></li><li><p>每个区域一般不应包含路由器超过200个</p></li><li><p>划分区域的好处就是，利用洪泛法交换链路状态信息局限于每一个区域而不是自治系统，这样减少整个网络上的通信量</p></li></ul><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019170100568.png width=1859 height=884 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019170100568_hu6299a07a1306ef13d60d721a64844ba4_831858_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019170100568_hu6299a07a1306ef13d60d721a64844ba4_831858_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=210 data-flex-basis=504px></p><p><strong>总结</strong></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019170217622.png width=1718 height=913 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019170217622_hu2f68da3f4b9fa88b64ad2bff50f1db4b_971533_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019170217622_hu2f68da3f4b9fa88b64ad2bff50f1db4b_971533_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=188 data-flex-basis=451px></p><h3 id=边界网关协议bgp>边界网关协议BGP</h3><p>BGP（Border Gateway Protocol） 是<strong>不同自治系统的路由器之间</strong>交换路由信息的协议</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019191438399.png width=970 height=1180 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019191438399_hu7a471168523c001a0cb26fe7e46daf6e_559919_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019191438399_hu7a471168523c001a0cb26fe7e46daf6e_559919_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=82 data-flex-basis=197px></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019191718506.png width=1835 height=897 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019191718506_hu756f75252b0a6c5c0328d7c539582a86_750707_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019191718506_hu756f75252b0a6c5c0328d7c539582a86_750707_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=204 data-flex-basis=490px></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019191836397.png width=1874 height=812 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019191836397_hu9bb5325ad18752b6b3a699d6f1a814e4_682083_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019191836397_hu9bb5325ad18752b6b3a699d6f1a814e4_682083_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=230 data-flex-basis=553px></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019192031087.png width=1788 height=849 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019192031087_hu3a8ef21c50c9d973a6cb2ae3e0148eea_656832_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019192031087_hu3a8ef21c50c9d973a6cb2ae3e0148eea_656832_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=210 data-flex-basis=505px></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019192059962.png width=1666 height=420 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019192059962_hu9067395f0c44a76ea8c63ee1b11ba799_280571_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019192059962_hu9067395f0c44a76ea8c63ee1b11ba799_280571_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=396 data-flex-basis=952px></p><p><strong>总结</strong></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019192840368.png width=1710 height=899 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019192840368_huc5ccea5a4056dae643e804e2b55a73bb_1051492_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019192840368_huc5ccea5a4056dae643e804e2b55a73bb_1051492_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=190 data-flex-basis=456px></p><h3 id=直接封装ripospf和bgp报文的协议>直接封装RIP、OSPF和BGP报文的协议</h3><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019192800829.png width=1769 height=657 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019192800829_hu5a613e1db6a204696263e9ce3a955531_277738_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019192800829_hu5a613e1db6a204696263e9ce3a955531_277738_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=269 data-flex-basis=646px></p><hr><h2 id=ipv4数据报的首部格式>IPv4数据报的首部格式</h2><h3 id=各字段的作用>各字段的作用</h3><ul><li>一个 IP 数据报由<strong>首部</strong>和<strong>数据</strong>两部分组成。</li><li><strong>首部的前一部分是固定长度，共 20 字节，是所有 IP 数据报必须具有的。</strong></li><li>在首部的固定部分的后面是一些可选字段，其长度是可变的。</li></ul><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019205931748.png width=1395 height=465 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019205931748_hu388216e7236dba334132601853ecf9bd_132098_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019205931748_hu388216e7236dba334132601853ecf9bd_132098_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=300 data-flex-basis=720px></p><p>图中的每一行都由32个比特（也就是4个字节）构成，每个小格子称为字段或者域，每个字段或某些字段的组合用来表达IP协议的相关功能</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019211719880.png width=1196 height=541 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019211719880_hu1352e990125e31692f39be23f631f6bd_309290_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019211719880_hu1352e990125e31692f39be23f631f6bd_309290_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=221 data-flex-basis=530px></p><blockquote><p><strong>IP数据报的首部长度一定是4字节的整数倍</strong></p><p>因为首部中的可选字段的长度从1个字节到40个字节不等，那么，当20字节的固定部分加上1到40个字节长度不等的可变部分，<strong>会造成首部长度不是4字节整数倍时，就用取值为全0的填充字段填充相应个字节</strong>，以确保IP数据报的首部长度是4字节的整数倍</p></blockquote><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019212617006.png width=1211 height=850 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019212617006_hud2e821f0d483af5970063aeb679372ff_338597_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019212617006_hud2e821f0d483af5970063aeb679372ff_338597_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=142 data-flex-basis=341px></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019220435415.png width=1221 height=967 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019220435415_hue502797e0630eca61311a1361eb517b7_367037_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019220435415_hue502797e0630eca61311a1361eb517b7_367037_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=126 data-flex-basis=303px></p><p><strong>对IPv4数据报进行分片</strong></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019221021157.png width=1853 height=837 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019221021157_huc88b3db9fd308d08d22df0561e034573_346070_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019221021157_huc88b3db9fd308d08d22df0561e034573_346070_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=221 data-flex-basis=531px></p><p>现在假定分片2的IP数据报经过某个网络时还需要进行分片</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019221246870.png width=1894 height=842 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019221246870_hu922eaf87f86d831f54ca16b55fb112d1_371199_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019221246870_hu922eaf87f86d831f54ca16b55fb112d1_371199_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=224 data-flex-basis=539px></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019222512112.png width=1203 height=1105 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019222512112_hudec77e0d51a2cb5be327e38ffa8d0a6b_436176_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019222512112_hudec77e0d51a2cb5be327e38ffa8d0a6b_436176_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=108 data-flex-basis=261px></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019222552444.png width=1647 height=889 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019222552444_hu3d568a6b0395f6004fc1fa38efed725e_323961_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019222552444_hu3d568a6b0395f6004fc1fa38efed725e_323961_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=185 data-flex-basis=444px></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019222729797.png width=1833 height=868 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019222729797_hu5843cb39dd266447513525e47e4555f1_422334_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019222729797_hu5843cb39dd266447513525e47e4555f1_422334_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=211 data-flex-basis=506px></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019223101434.png width=1799 height=598 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019223101434_hu00d29eeba77e0d7b6e9d60402ac5ec18_239638_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019223101434_hu00d29eeba77e0d7b6e9d60402ac5ec18_239638_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=300 data-flex-basis=722px></p><h3 id=总结-5>总结</h3><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019225141559.png width=1885 height=878 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019225141559_hu1b0e42cfa8e4a4823c74a81b8792ae3a_1060256_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019225141559_hu1b0e42cfa8e4a4823c74a81b8792ae3a_1060256_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=214 data-flex-basis=515px></p><hr><h2 id=网际控制报文协议icmp>网际控制报文协议ICMP</h2><h3 id=概念-1>概念</h3><p>架构IP网络时需要特别注意两点：</p><ul><li>确认网络是否正常工作</li><li>遇到异常时进行问题诊断</li></ul><p><strong>而ICMP就是实现这些问题的协议</strong></p><p>ICMP的主要功能包括：</p><ul><li>确认IP包是否成功送达目标地址</li><li>通知在发送过程当中IP包被废弃的具体原因</li><li>改善网络设置等</li></ul><p><strong>有了这些功能以后，就可以获得网络是否正常，设置是否有误以及设备有何异常等信息，从而便于进行网络上的问题诊断</strong></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019232539898.png width=1216 height=944 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019232539898_huefa3e9dbdac65cdfe3fba11b54cc7338_496996_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019232539898_huefa3e9dbdac65cdfe3fba11b54cc7338_496996_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=128 data-flex-basis=309px></p><p><strong>ICMP 不是高层协议（看起来好像是高层协议，因为 ICMP 报文是装在 IP 数据报中，作为其中的数据部分），而是 IP 层的协议</strong></p><p>ICMP 报文的格式</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020001035813.png width=813 height=343 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020001035813_huccfa2ca079c9c620c2d6a6bedcd2076c_33704_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020001035813_huccfa2ca079c9c620c2d6a6bedcd2076c_33704_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=237 data-flex-basis=568px></p><h3 id=icmp差错报告报文>ICMP差错报告报文</h3><h4 id=终点不可达>终点不可达</h4><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019230838587.png width=1882 height=647 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019230838587_hue4e495366d5e3ed8109bc3bfb80ab9f0_455144_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019230838587_hue4e495366d5e3ed8109bc3bfb80ab9f0_455144_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=290 data-flex-basis=698px></p><h4 id=源点抑制>源点抑制</h4><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019231022291.png width=1200 height=827 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019231022291_hu81091a0a72fd1ffa5e266fe2856e893a_394943_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019231022291_hu81091a0a72fd1ffa5e266fe2856e893a_394943_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=145 data-flex-basis=348px></p><h4 id=时间超过>时间超过</h4><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019231230798.png width=1191 height=703 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019231230798_hu0aa7d1d433e0f93644e4e628c184cd84_283359_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019231230798_hu0aa7d1d433e0f93644e4e628c184cd84_283359_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=169 data-flex-basis=406px></p><h4 id=参数问题>参数问题</h4><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019231355471.png width=1878 height=637 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019231355471_hu4fff175eea3b28f45fe7b17d4023cfa8_401240_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019231355471_hu4fff175eea3b28f45fe7b17d4023cfa8_401240_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=294 data-flex-basis=707px></p><h4 id=改变路由重定向>改变路由（重定向）</h4><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019231553990.png width=1186 height=808 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019231553990_hu202e149ecf2b87d4ed70f5f940e5f1a4_268010_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019231553990_hu202e149ecf2b87d4ed70f5f940e5f1a4_268010_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=146 data-flex-basis=352px></p><h4 id=不应发送icmp差错报告报文情况>不应发送ICMP差错报告报文情况</h4><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019231733673.png width=1793 height=536 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019231733673_hub10374dcd1cdd84391b5da662e7a736f_308235_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019231733673_hub10374dcd1cdd84391b5da662e7a736f_308235_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=334 data-flex-basis=802px></p><h3 id=icmp应用举例>ICMP应用举例</h3><h4 id=分组网间探测pingpacket-internet-groper>分组网间探测PING（Packet InterNet Groper）</h4><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019233817921.png width=1855 height=656 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019233817921_hu73ff86b13d16cf648e452f04b0fa83fc_492426_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019233817921_hu73ff86b13d16cf648e452f04b0fa83fc_492426_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=282 data-flex-basis=678px></p><h4 id=跟踪路由traceroute>跟踪路由（traceroute）</h4><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019234123026.png width=964 height=1179 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019234123026_hu79777f5b0c59ed0b3916fd94eaac0a46_485155_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019234123026_hu79777f5b0c59ed0b3916fd94eaac0a46_485155_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=81 data-flex-basis=196px></p><p><strong>tracert命令的实现原理</strong></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019234718107.png width=1191 height=657 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019234718107_hu476fca68300ba83f59fa97c384280eb2_274990_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019234718107_hu476fca68300ba83f59fa97c384280eb2_274990_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=181 data-flex-basis=435px></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019234741268.png width=1191 height=663 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019234741268_hu5af23decf15674e8b10ac6d82db38422_299394_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019234741268_hu5af23decf15674e8b10ac6d82db38422_299394_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=179 data-flex-basis=431px></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019234758693.png width=1214 height=748 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019234758693_hu1d647ab0a19a9efdad7214bc78dd00c5_287804_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019234758693_hu1d647ab0a19a9efdad7214bc78dd00c5_287804_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=162 data-flex-basis=389px></p><h3 id=总结-6>总结</h3><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019234909146.png width=1719 height=891 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019234909146_hua526d633d64f07c9fd8021e8eedb84dc_794199_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019234909146_hua526d633d64f07c9fd8021e8eedb84dc_794199_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=192 data-flex-basis=463px></p><hr><h2 id=虚拟专用网vpn与网络地址转换nat>虚拟专用网VPN与网络地址转换NAT</h2><h3 id=虚拟专用网vpnvirtual-private-network>虚拟专用网VPN（Virtual Private Network）</h3><ul><li>由于 <strong>IP 地址的紧缺</strong>，一个机构能够申请到的IP地址数往往远小于本机构所拥有的主机数。</li><li>考虑到<strong>互联网并不很安全</strong>，一个机构内也并不需要把所有的主机接入到外部的互联网。</li><li>假定在一个机构内部的计算机通信也是采用 TCP/IP 协议，那么从原则上讲，对于这些仅在<strong>机构内部使用</strong>的计算机就可以由本机构<strong>自行分配其 IP 地址</strong>。</li></ul><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019235534728.png width=1842 height=767 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019235534728_hucc15842e2060e701722e391c41e35173_294007_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019235534728_hucc15842e2060e701722e391c41e35173_294007_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=240 data-flex-basis=576px></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019235631474.png width=1881 height=832 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019235631474_hue0985c9fedce72aaf8653b1215ee6d9a_706586_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019235631474_hue0985c9fedce72aaf8653b1215ee6d9a_706586_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=226 data-flex-basis=542px></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019235718010.png width=1892 height=611 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019235718010_hu540687a9612cb0dd60a217477a118a42_887756_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201019235718010_hu540687a9612cb0dd60a217477a118a42_887756_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=309 data-flex-basis=743px></p><blockquote><p>上图是因特网数字分配机构IANA官网查看IPv4地址空间中特殊地址的分配方案</p><p>用粉红色标出来的地址就是无需申请的、可自由分配的专用地址，或称私有地址</p></blockquote><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020000136443.png width=1875 height=963 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020000136443_hu27e3ec923783d6fb06040b61b08955a5_496687_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020000136443_hu27e3ec923783d6fb06040b61b08955a5_496687_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=194 data-flex-basis=467px></p><blockquote><p>私有地址只能用于一个机构的内部通信，而不能用于和因特网上的主机通信</p><p>私有地址只能用作本地地址而不能用作全球地址</p><p>因特网中所有路由器对目的地址是私有地址的IP数据报一律不进行转发</p><p><strong>本地地址与全球地址</strong></p><ul><li><strong>本地地址</strong>——仅在机构内部使用的 IP 地址，可以由本机构自行分配，而不需要向互联网的管理机构申请。</li><li><strong>全球地址</strong>——全球唯一的 IP 地址，必须向互联网的管理机构申请。</li><li><strong>问题</strong>：在内部使用的本地地址就有可能和互联网中某个 IP 地址重合，这样就会出现地址的二义性问题。</li></ul></blockquote><p>所以部门A和部门B至少需要一个 路由器具有合法的全球IP地址，这样各自的专用网才能利用公用的因特网进行通信</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020000618797.png width=1862 height=588 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020000618797_hue0c911716e3b116c33ec4009fa3623d4_317149_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020000618797_hue0c911716e3b116c33ec4009fa3623d4_317149_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=316 data-flex-basis=760px></p><p>部门A向部门B发送数据流程</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020001107425.png width=1854 height=704 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020001107425_huf5b52e6c24115911a44539d9f2cba82b_642689_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020001107425_huf5b52e6c24115911a44539d9f2cba82b_642689_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=263 data-flex-basis=632px></p><blockquote><p>两个专用网内的主机间发送的数据报是通过了公用的因特网，但在效果上就好像是在本机构的专用网上传送一样</p><p>数据报在因特网中可能要经过多个网络和路由器，但从逻辑上看，R1和R2之间好像是一条直通的点对点链路</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020001528569.png width=1889 height=601 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020001528569_hu7f4458d5ac7be3521d84a89682e80862_326294_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020001528569_hu7f4458d5ac7be3521d84a89682e80862_326294_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=314 data-flex-basis=754px></p><p>因此也被称为IP隧道技术</p></blockquote><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020001935801.png width=1889 height=813 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020001935801_huf6e6b3e435db1322fd4ee61c7e970406_652917_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020001935801_huf6e6b3e435db1322fd4ee61c7e970406_652917_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=232 data-flex-basis=557px></p><h3 id=网络地址转换natnetwork-address-translation>网络地址转换NAT（Network Address Translation）</h3><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020002020607.png width=1750 height=414 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020002020607_hu8dfd4cc82004309e2c7596bbb459f940_391947_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020002020607_hu8dfd4cc82004309e2c7596bbb459f940_391947_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=422 data-flex-basis=1014px></p><p>举例</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020002439942.png width=1876 height=705 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020002439942_hu38caaf8cbb7e6831ae588e0927d4aa47_373496_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020002439942_hu38caaf8cbb7e6831ae588e0927d4aa47_373496_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=266 data-flex-basis=638px></p><blockquote><p>使用私有地址的主机，如何才能与因特网上使用全球IP地址的主机进行通信？</p><p>这需要在专用网络连接到因特网的路由器上安装NAT软件</p></blockquote><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020002734192.png width=1844 height=541 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020002734192_hu21fc5517ed250510313191bbf01174a5_321919_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020002734192_hu21fc5517ed250510313191bbf01174a5_321919_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=340 data-flex-basis=818px></p><blockquote><p>专有NAT软件的路由器叫做NAT路由器</p><p>它至少有一个有效的外部全球IP地址</p><p>这样，所有使用私有地址的主机在和外界通信时，都要在NAT路由器上将其私有地址转换为全球IP地址</p></blockquote><p>假设，使用私有地址的主机要给因特网上使用全球IP地址的另一台主机发送IP数据报</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020003238729.png width=1871 height=621 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020003238729_hua29bd90a425c325e4d822b58b25e56b9_535394_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020003238729_hua29bd90a425c325e4d822b58b25e56b9_535394_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=301 data-flex-basis=723px></p><p>因特网上的这台主机给源主机发回数据报</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020003411024.png width=1880 height=627 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020003411024_hua5e0b8849790542515f3e1457481b610_475729_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020003411024_hua5e0b8849790542515f3e1457481b610_475729_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=299 data-flex-basis=719px></p><p>当专用网中的这两台使用私有地址的主机都要给因特网使用全球地址的另一台主机发送数据报时，在NAT路由器的NAT转换表中就会产生两条记录，分别记录两个私有地址与全球地址的对应关系</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020003658349.png width=1864 height=619 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020003658349_hubaca29bc471f638096e18ac12b2e4c2b_418680_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020003658349_hubaca29bc471f638096e18ac12b2e4c2b_418680_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=301 data-flex-basis=722px></p><p>这种基本转换存在一个问题</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020003733863.png width=953 height=221 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020003733863_huf3f66a123fc07d9679e6cf1769dc237e_205613_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020003733863_huf3f66a123fc07d9679e6cf1769dc237e_205613_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=431 data-flex-basis=1034px></p><p>解决方法</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020003840584.png width=1894 height=830 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020003840584_hub919d2a715ac5c6c631e9a381cd23137_829937_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020003840584_hub919d2a715ac5c6c631e9a381cd23137_829937_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=228 data-flex-basis=547px></p><blockquote><p>我们现在用的很多家用路由器都是这种NART路由器</p></blockquote><p>内网主机与外网主机的通信，是否能由外网主机首先发起？</p><p>否定</p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020004159360.png width=1898 height=838 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020004159360_huab87351fc853f78240f04bde8e1f416a_843995_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020004159360_huab87351fc853f78240f04bde8e1f416a_843995_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=226 data-flex-basis=543px></p><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020004312942.png width=1901 height=806 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020004312942_hu8eba720690c5ffed354887032f2db17a_895533_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020004312942_hu8eba720690c5ffed354887032f2db17a_895533_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=235 data-flex-basis=566px></p><h3 id=总结-7>总结</h3><p><img src=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020004447021.png width=1859 height=957 srcset="/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020004447021_hub8bbf15a5e28f5ff0673f6e65735d794_1579172_480x0_resize_box_3.png 480w, /p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%BD%91%E7%BB%9C%E5%B1%82/image-20201020004447021_hub8bbf15a5e28f5ff0673f6e65735d794_1579172_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=194 data-flex-basis=466px></p></section><footer class=article-footer><section class=article-tags><a href=/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/>计算机网络微课堂笔记</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css integrity="sha256-J+iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s=" crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js integrity="sha256-InsNdER1b2xUewP+pKCUJpkhiqwHgqiPXDlIk7GzBu4=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI=" crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.querySelector(`.article-content`),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/p/i-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E6%A6%82%E8%BF%B0/><div class=article-details><h2 class=article-title>I: 计算机网络微课堂-概述</h2></div></a></article><article><a href=/p/ii-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E7%89%A9%E7%90%86%E5%B1%82/><div class=article-details><h2 class=article-title>II: 计算机网络微课堂-物理层</h2></div></a></article><article><a href=/p/iii-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/><div class=article-details><h2 class=article-title>III: 计算机网络微课堂-数据链路层</h2></div></a></article><article><a href=/p/v-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E8%BF%90%E8%BE%93%E5%B1%82/><div class=article-details><h2 class=article-title>V: 计算机网络微课堂-运输层</h2></div></a></article><article><a href=/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BE%AE%E8%AF%BE%E5%A0%82-%E5%BA%94%E7%94%A8%E5%B1%82/><div class=article-details><h2 class=article-title>Ⅵ: 计算机网络微课堂-应用层</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2023 importzhh的小破站</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.16.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>